"use strict";(globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react=globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react||[]).push([[7563],{"./src/core/configuration/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>configuration,FI:()=>getConf,jM:()=>getDeviceConf});var lib=__webpack_require__("./node_modules/react-device-detect/dist/lib.js");const page_size_namespaceObject=JSON.parse('{"mobile":{"pageSize":10},"desktop":{"pageSize":20}}'),page_size_loan_list_namespaceObject=JSON.parse('{"mobile":{"pageSize":10},"desktop":{"pageSize":25}}'),page_size_reservation_list_namespaceObject=JSON.parse('{"mobile":{"pageSize":10},"desktop":{"pageSize":25}}'),recommender_material_limits_namespaceObject=JSON.parse('{"recommender":4,"inspiration":4,"somethingSimilar":4,"somethingSimilarAuthor":4}'),cover_tints_namespaceObject=JSON.parse('{"coverTints":["100","40","80","120","20"]}'),colors_namespaceObject=JSON.parse('{"default":"#484848","danger":"#d5364a","warning":"#f7bf42","success":"#068802"}');var modal_ids=__webpack_require__("./src/core/configuration/modal-ids.json");const getConf=(type,configuration,device)=>{const subConf=configuration[type];return device?subConf[device]:subConf},getDeviceConf=(type,configuration)=>{const device=lib.Fr?"mobile":"desktop";return getConf(type,configuration,device)},configuration={pageSize:page_size_namespaceObject,coverTints:cover_tints_namespaceObject,pageSizeLoanList:page_size_loan_list_namespaceObject,pageSizeReservationList:page_size_reservation_list_namespaceObject,colors:colors_namespaceObject,recommenderMaterialLimits:recommender_material_limits_namespaceObject,modalIds:modal_ids,reservation:JSON.parse('{"defaultInterestDaysForOpenOrder":90}'),payment:JSON.parse('{"paymentChangeDate":"2020-10-27"}')}},"./src/core/configuration/modal-ids.json":module=>{module.exports=JSON.parse('{"allLoansId":"all-loans-id","pauseReservation":"pause-reservation","deleteReservation":"delete-reservation","deleteReservations":"delete-reservations","loanDetails":"loan-details-","acceptModal":"accept-fee","reservationDetails":"reservation-details-","dueDateModal":"due-date","feeDetails":"fee-details-","userMenuAuthenticated":"user-modal-authenticated","userMenuAnonymous":"user-modal-anonymous","userMenuUnregistered":"user-modal-unregistered","reservationsReady":"reservations-ready","reservationsQueued":"reservations-queued"}')},"./src/core/utils/helpers/currency.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function formatCurrency(number){return number.toLocaleString("da-DK",{style:"currency",currency:"DKK"})}__webpack_require__.d(__webpack_exports__,{v:()=>formatCurrency})},"./src/core/utils/helpers/general.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A5:()=>capitalizeFirstLetters,AQ:()=>patronAgeValid,C2:()=>getReleaseYearSearchResult,CT:()=>getRenewableMaterials,EA:()=>sortByLoanDate,El:()=>materialIsOverdue,Ey:()=>getManifestationPublicationYear,G:()=>materialIsFiction,GC:()=>isEnterOrSpacePressed,G_:()=>convertPostIdToFaustId,Gm:()=>getAuthorNames,IN:()=>getReviewRelease,J$:()=>getCoverTint,JB:()=>getMaterialTypes,Ki:()=>pageSizeGlobal,L1:()=>getListItems,OH:()=>convertPostIdsToFaustIds,Sy:()=>orderManifestationsByYear,UV:()=>flattenCreators,Vq:()=>sortLoansByIsRenewableThenDueDate,Y2:()=>sortByReservationDate,Y5:()=>getAllPids,ZG:()=>tallyUpFees,Zc:()=>getContributors,_j:()=>getMaterialType,bn:()=>getAllFaustIds,cK:()=>getDueDatesLoan,e$:()=>getManifestationsPids,eD:()=>getScrollClass,fL:()=>getRecommenderMaterialLimits,hh:()=>getWorkPid,jM:()=>getColors,jw:()=>flattenCreatorsLastNameFirst,kj:()=>groupObjectArrayByProperty,kr:()=>formatDanishPhoneNumber,ng:()=>stringifyValue,nq:()=>divideFirstNameByComma,oI:()=>sortByDueDate,oq:()=>getAmountOfRenewableLoans,sP:()=>creatorsToString,tI:()=>getParams,yG:()=>parseBoolean,yr:()=>getLatestManifestation,yy:()=>getPublicationName});var lodash_uniq__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/uniq.js"),lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_uniq__WEBPACK_IMPORTED_MODULE_0__),lodash_orderBy__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/orderBy.js"),lodash_orderBy__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_orderBy__WEBPACK_IMPORTED_MODULE_1__),lodash_first__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/first.js"),lodash_first__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_first__WEBPACK_IMPORTED_MODULE_2__),_configuration__WEBPACK_IMPORTED_MODULE_20__=(__webpack_require__("./node_modules/core-js/modules/esnext.set.add-all.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.delete-all.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.difference.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.every.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.intersection.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.join.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.reduce.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.some.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),__webpack_require__("./node_modules/core-js/modules/esnext.set.union.js"),__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/core/configuration/index.ts")),_url__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/core/utils/helpers/url.ts"),_store__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/core/store.ts"),_currency__WEBPACK_IMPORTED_MODULE_24__=(__webpack_require__("./src/core/utils/helpers/modal-helpers.ts"),__webpack_require__("./src/core/utils/helpers/currency.ts")),_date__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/core/utils/helpers/date.ts");const capitalizeFirstLetters=str=>str.split(" ").map((word=>word.charAt(0).toUpperCase()+word.slice(1))).join(" "),getManifestationPublicationYear=manifestation=>{var _manifestation$editio,_manifestation$editio2;return(null===(_manifestation$editio=manifestation.edition)||void 0===_manifestation$editio||null===(_manifestation$editio2=_manifestation$editio.publicationYear)||void 0===_manifestation$editio2?void 0:_manifestation$editio2.display)||null},orderManifestationsByYear=(manifestations,order="desc")=>manifestations.sort(((a,b)=>{const currentDate=Number(getManifestationPublicationYear(a)),prevDate=Number(getManifestationPublicationYear(b));return"desc"===order?prevDate-currentDate:currentDate-prevDate})),flattenCreators=creators=>creators.map((creator=>creator.display)),flattenCreatorsLastNameFirst=creators=>creators.map((creator=>creator.nameSort)),divideFirstNameByComma=creatorString=>{const parts=creatorString.split(" ");return parts[0]+=",",parts.join(" ")},creatorsToString=(creators,t)=>{if(creators.length>1){return`${creators.slice(0,2).join(", ")} ${t("etAlText")}`}return 1===creators.length?lodash_first__WEBPACK_IMPORTED_MODULE_2___default()(creators):""},getLatestManifestation=manifestations=>orderManifestationsByYear(manifestations,"desc")[0],getWorkPid=work=>work.manifestations.bestRepresentation.pid||null,getCoverTint=index=>{const conf=(0,_configuration__WEBPACK_IMPORTED_MODULE_20__.FI)("coverTints",_configuration__WEBPACK_IMPORTED_MODULE_20__.Ay),{coverTints}=conf;if(coverTints){return coverTints[index%coverTints.length]}},getColors=()=>(0,_configuration__WEBPACK_IMPORTED_MODULE_20__.FI)("colors",_configuration__WEBPACK_IMPORTED_MODULE_20__.Ay),getRecommenderMaterialLimits=()=>(0,_configuration__WEBPACK_IMPORTED_MODULE_20__.FI)("recommenderMaterialLimits",_configuration__WEBPACK_IMPORTED_MODULE_20__.Ay),convertPostIdToFaustId=postId=>{const matches=postId.match(/^[0-9]+-[a-z]+:([a-zA-Z0-9-_.]+)$/);if(null!=matches&&matches[1])return null==matches?void 0:matches[1];throw new Error(`Unable to extract faust id from post id "${postId}"`)},convertPostIdsToFaustIds=postIds=>postIds.map((pid=>convertPostIdToFaustId(pid))),getParams=props=>Object.entries(props).reduce(((acc,[property,value])=>{const paramValue=value||(0,_url__WEBPACK_IMPORTED_MODULE_21__.d6)(property);return{...acc,[property]:paramValue?String(paramValue):""}}),{}),sortByLoanDate=list=>list.sort(((a,b)=>new Date(a.loanDate||new Date).getTime()-new Date(b.loanDate||new Date).getTime())),sortByReservationDate=list=>list.sort(((objA,objB)=>new Date(objA.dateOfReservation||new Date).getTime()-new Date(objB.dateOfReservation||new Date).getTime())),sortByDueDate=list=>lodash_orderBy__WEBPACK_IMPORTED_MODULE_1___default()(list,(item=>item.dueDate?(0,_date__WEBPACK_IMPORTED_MODULE_25__.ZV)(item.dueDate):1/0),"asc"),sortLoansByIsRenewableThenDueDate=list=>(list=>lodash_orderBy__WEBPACK_IMPORTED_MODULE_1___default()(list,(item=>Number(!!item.isRenewable)),"desc"))(sortByDueDate(list)),getDueDatesLoan=list=>Array.from(new Set(list.filter((({dueDate})=>null!=dueDate)).map((({dueDate})=>dueDate)).sort())),getRenewableMaterials=list=>list.filter((({isRenewable})=>isRenewable)),getAmountOfRenewableLoans=list=>getRenewableMaterials(list).length,groupObjectArrayByProperty=(array,property)=>array.reduce(((result,current)=>{const groupBy=current[property];if(!groupBy)return result;const key=String(groupBy);return key in result?{...result,[key]:[...result[key],current]}:{...result,[key]:[current]}}),{}),getManifestationsPids=manifestations=>manifestations.map((manifestation=>manifestation.pid)),stringifyValue=value=>value?String(value):"",materialIsFiction=({fictionNonfiction})=>"FICTION"===(null==fictionNonfiction?void 0:fictionNonfiction.code),getListItems=(list,itemsShown)=>[...list].splice(0,itemsShown),pageSizeGlobal=(pageSizes,configName)=>{let pageSize=0;return pageSize=null!=pageSizes&&pageSizes.desktop&&null!=pageSizes&&pageSizes.mobile?(({desktop,mobile})=>{const{pageSize}=(0,_configuration__WEBPACK_IMPORTED_MODULE_20__.jM)("pageSize",{pageSize:{mobile:{pageSize:mobile},desktop:{pageSize:desktop}}});return Number(pageSize)})(pageSizes):(pageSizeConf=>{const{pageSize}=(0,_configuration__WEBPACK_IMPORTED_MODULE_20__.jM)(pageSizeConf,_configuration__WEBPACK_IMPORTED_MODULE_20__.Ay);return Number(pageSize)})(configName||"pageSize"),pageSize},materialIsOverdue=date=>!!date&&(0,_date__WEBPACK_IMPORTED_MODULE_25__.Vx)(date),tallyUpFees=fees=>(0,_currency__WEBPACK_IMPORTED_MODULE_24__.v)(fees.reduce(((total,{amount})=>total+amount),0)),getMaterialTypes=(manifestations,onlyFirstType=!0)=>onlyFirstType?lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default()(manifestations.map((manifest=>manifest.materialTypes.map(((type,i)=>0===i?type.materialTypeSpecific.display:null)))).flat().filter((type=>null!==type))):lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default()(manifestations.map((manifest=>manifest.materialTypes.map((type=>{var _type$materialTypeSpe;return null===(_type$materialTypeSpe=type.materialTypeSpecific)||void 0===_type$materialTypeSpe?void 0:_type$materialTypeSpe.display})))).flat()),getMaterialType=manifestations=>{const uniqueTypes=getMaterialTypes(manifestations),firstUniqueType=lodash_first__WEBPACK_IMPORTED_MODULE_2___default()(uniqueTypes);return firstUniqueType||"Unknown"},getAllPids=manifestations=>manifestations.map((manifestation=>manifestation.pid)),getAllFaustIds=manifestations=>convertPostIdsToFaustIds(getAllPids(manifestations)),getScrollClass=modalIds=>modalIds.length>0?"scroll-lock-background":"";const patronAgeValid=(cpr,minAge)=>{const cprDate=function getDateFromCpr(cprInput){const dateSegments=cprInput.replace(/[^\d]/g,"").substring(0,6).match(/.{1,2}/g);if(dateSegments){const[day,month,year]=dateSegments;let prefix="";prefix=Number(year)<21?"20":"19";const yearWithPrefix=Number(`${prefix}${year}`);return new Date(Date.UTC(yearWithPrefix,Number(month)-1,Number(day),0,0,0,0))}return null}(cpr);if(null===cprDate)return!1;return(0,_date__WEBPACK_IMPORTED_MODULE_25__.iq)(cprDate)>=minAge},getAuthorNames=(creators,by,and)=>{const names=creators.map((({display})=>display));let returnContentString="";return 0===names.length||(returnContentString=1===names.length?`${by?`${by} `:""}${names.join(", ")}`:`${by?`${by} `:""} ${names.slice(0,-1).join(", ")} ${and?`${and} `:""}${names.slice(-1)}`),returnContentString},getPublicationName=hostPublication=>hostPublication?hostPublication.title:"",getReviewRelease=(dateFirstEdition,workYear,edition)=>{var _edition$publicationY;return(null==dateFirstEdition?void 0:dateFirstEdition.display)||(null==workYear?void 0:workYear.display)||(null==edition||null===(_edition$publicationY=edition.publicationYear)||void 0===_edition$publicationY?void 0:_edition$publicationY.display)||null},getReleaseYearSearchResult=work=>{const{latest,bestRepresentation}=work.manifestations,manifestation=bestRepresentation||latest;var _work$workYear,_work$workYear2,_manifestation$workYe,_manifestation$dateFi,_manifestation$editio3,_manifestation$editio4;return materialIsFiction(work)?null===(_work$workYear=work.workYear)||void 0===_work$workYear?void 0:_work$workYear.year:materialIsFiction(manifestation)?(null===(_work$workYear2=work.workYear)||void 0===_work$workYear2?void 0:_work$workYear2.year)||(null===(_manifestation$workYe=manifestation.workYear)||void 0===_manifestation$workYe?void 0:_manifestation$workYe.year)||(null===(_manifestation$dateFi=manifestation.dateFirstEdition)||void 0===_manifestation$dateFi?void 0:_manifestation$dateFi.year)||(null===(_manifestation$editio3=manifestation.edition)||void 0===_manifestation$editio3||null===(_manifestation$editio4=_manifestation$editio3.publicationYear)||void 0===_manifestation$editio4?void 0:_manifestation$editio4.display):getManifestationPublicationYear(latest)||""},getContributors=(short,creators)=>{const{text:{data:texts}}=_store__WEBPACK_IMPORTED_MODULE_22__.M_.getState();if(creators&&creators.length>0){if(2===creators.length)return`${texts.materialByAuthorText} ${creators.join(` ${texts.materialAndAuthorText} `)}`;if(creators.length>2)return short?((creators,byText,etAlText)=>`${byText} ${creators.slice(0,2).join(", ")} ${etAlText}`)(creators,texts.materialByAuthorText,texts.etAlText):((creators,byText,andText)=>`${byText} ${creators.slice(0,-1).join(", ")} ${andText} ${creators.slice(-1)}`)(creators,texts.materialByAuthorText,texts.materialAndAuthorText)}return creators[0]},formatDanishPhoneNumber=phoneNumber=>phoneNumber.match(/^\+\d{2}/)?phoneNumber:`+45${phoneNumber}`,parseBoolean=value=>"true"===(null==value?void 0:value.toLowerCase()),isEnterOrSpacePressed=key=>"Enter"===key||" "===key},"./src/core/utils/helpers/modal-helpers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q0:()=>constructModalId,c6:()=>getModalIds,dI:()=>getDetailsModalId,eF:()=>containsDueDateModalQueryParam,xx:()=>dateFromDueDateModalQueryParam});var _configuration__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/configuration/index.ts");const constructModalId=(prefix,fragments)=>""===prefix?fragments.join("-"):[prefix,...fragments].join("-"),getModalIds=()=>(0,_configuration__WEBPACK_IMPORTED_MODULE_0__.FI)("modalIds",_configuration__WEBPACK_IMPORTED_MODULE_0__.Ay),containsDueDateModalQueryParam=queryParam=>{const{dueDateModal}=getModalIds(),regex=new RegExp(`${dueDateModal}\\d{4}-\\d{2}-\\d{2}`,"g"),dateFound=queryParam.match(regex);return dateFound?dateFound[0]:null},dateFromDueDateModalQueryParam=queryParam=>{const dateFound=queryParam.match(/\d{4}-\d{2}-\d{2}/g);return dateFound?dateFound[0]:null},getDetailsModalId=(queryParam,prefix)=>{const regexIdentifier=new RegExp(`(?<=${prefix})((\\d{13})|((\\d{10}))||((\\d{9}))|(\\d{8}))`,"g"),modalId=queryParam.match(regexIdentifier);if(modalId){const[returnId]=modalId;return returnId}return""}}}]);