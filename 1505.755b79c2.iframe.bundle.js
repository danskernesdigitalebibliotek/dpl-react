"use strict";(globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react=globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react||[]).push([[1505],{"./src/apps/material/helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Zh:()=>divideManifestationsByMaterialType,Xf:()=>filterManifestationsByType,AC:()=>getAllIdentifiers,QL:()=>getAvailability,SL:()=>getBestMaterialTypeForWork,We:()=>getBlacklistedQueryArgs,$0:()=>getDbcVerifiedSubjectsFirst,nW:()=>getDetailsListData,oj:()=>getFirstBookManifestation,LX:()=>getInfomediaIds,DH:()=>getManifestationAudience,x4:()=>getManifestationAuthors,xb:()=>getManifestationBasedOnType,v9:()=>getManifestationContributors,jC:()=>getManifestationEdition,f$:()=>getManifestationGenreAndForm,L_:()=>getManifestationIsbn,PG:()=>getManifestationLanguageIsoCode,gG:()=>getManifestationLanguages,TU:()=>getManifestationMaterialTypes,KA:()=>getManifestationNotes,n5:()=>getManifestationNumberOfPages,ub:()=>getManifestationOriginalTitle,mI:()=>getManifestationPhysicalDescription,Zs:()=>getManifestationPublisher,Cb:()=>getManifestationSource,zi:()=>getManifestationsOrderByTypeAndYear,w2:()=>getNumberedSeries,Rr:()=>getTotalHoldings,_i:()=>getTotalReservations,d8:()=>getUniqueMovies,XX:()=>isAnyManifestationAvailableOnBranch,E1:()=>isParallelReservation,bE:()=>reservationModalId,Uc:()=>totalAvailableMaterials,CL:()=>totalBranchesHaveMaterial,us:()=>useGetHoldings});var uniqBy=__webpack_require__("./node_modules/lodash/uniqBy.js"),uniqBy_default=__webpack_require__.n(uniqBy),uniq=__webpack_require__("./node_modules/lodash/uniq.js"),uniq_default=__webpack_require__.n(uniq),head=__webpack_require__("./node_modules/lodash/head.js"),head_default=__webpack_require__.n(head),groupBy=__webpack_require__("./node_modules/lodash/groupBy.js"),groupBy_default=__webpack_require__.n(groupBy),first=__webpack_require__("./node_modules/lodash/first.js"),first_default=__webpack_require__.n(first),compact=__webpack_require__("./node_modules/lodash/compact.js"),compact_default=__webpack_require__.n(compact),MaterialDetailsList=__webpack_require__("./src/components/material/MaterialDetailsList.tsx"),helper=__webpack_require__("./src/components/material/material-buttons/helper.ts"),graphql=__webpack_require__("./src/core/dbc-gateway/generated/graphql.tsx"),fbs=__webpack_require__("./src/core/fbs/fbs.ts"),general=__webpack_require__("./src/core/utils/helpers/general.ts"),modal_helpers=__webpack_require__("./src/core/utils/helpers/modal-helpers.ts"),material_type=__webpack_require__("./src/core/utils/types/material-type.ts");const getManifestationsOrderByTypeAndYear=manifestations=>{const orderedByYear=(0,general.Sy)(manifestations),materialsMappedBytype=groupBy_default()(orderedByYear,(m=>{var _m$materialTypes$;return(null==m||null===(_m$materialTypes$=m.materialTypes[0])||void 0===_m$materialTypes$?void 0:_m$materialTypes$.materialTypeSpecific.display)??"unknown"}));return Object.keys(materialsMappedBytype).sort().reduce(((acc,key)=>[...acc,...materialsMappedBytype[key]]),[])},filterManifestationsByType=(type,manifestations)=>manifestations.filter((item=>(0,general.VZ)([item])===type)),getManifestationPlayingTime=manifestation=>{var _manifestation$physic,_manifestation$physic2;return(null===(_manifestation$physic=manifestation.physicalDescriptions)||void 0===_manifestation$physic||null===(_manifestation$physic2=_manifestation$physic[0])||void 0===_manifestation$physic2?void 0:_manifestation$physic2.playingTime)??""},getManifestationEdition=manifestation=>{var _manifestation$editio;return(null===(_manifestation$editio=manifestation.edition)||void 0===_manifestation$editio?void 0:_manifestation$editio.summary)??""},getManifestationGenreAndForm=manifestation=>manifestation.genreAndForm.join(" / ")??"",getManifestationPublisher=manifestation=>manifestation.publisher.join(" / ")??"",getManifestationMaterialTypes=manifestation=>{var _manifestation$materi,_manifestation$materi2;return(null===(_manifestation$materi=manifestation.materialTypes)||void 0===_manifestation$materi||null===(_manifestation$materi2=_manifestation$materi[0].materialTypeSpecific)||void 0===_manifestation$materi2?void 0:_manifestation$materi2.display)??""},getManifestationNumberOfPages=manifestation=>{var _manifestation$physic3,_manifestation$physic4,_manifestation$physic5;return null!==(_manifestation$physic3=manifestation.physicalDescriptions)&&void 0!==_manifestation$physic3&&null!==(_manifestation$physic4=_manifestation$physic3[0])&&void 0!==_manifestation$physic4&&_manifestation$physic4.numberOfPages?String(null===(_manifestation$physic5=manifestation.physicalDescriptions)||void 0===_manifestation$physic5?void 0:_manifestation$physic5[0].numberOfPages):""},getManifestationAudience=(manifestation,t)=>{var _manifestation$audien,_manifestation$audien2,_manifestation$audien3;const generalAudience=(null===(_manifestation$audien=manifestation.audience)||void 0===_manifestation$audien?void 0:_manifestation$audien.generalAudience[0])??"",agesDisplay=(null===(_manifestation$audien2=manifestation.audience)||void 0===_manifestation$audien2||null===(_manifestation$audien3=_manifestation$audien2.ages[0])||void 0===_manifestation$audien3?void 0:_manifestation$audien3.display)??"",formattedAges=agesDisplay?t("detailsListAgeRangeText",{placeholders:{"@ageRange":agesDisplay}}):"";return generalAudience&&formattedAges?`${generalAudience}, ${formattedAges}`:generalAudience||formattedAges},getManifestationIsbn=manifestation=>{var _manifestation$identi,_manifestation$identi2;return(null===(_manifestation$identi=manifestation.identifiers)||void 0===_manifestation$identi||null===(_manifestation$identi2=_manifestation$identi[0])||void 0===_manifestation$identi2?void 0:_manifestation$identi2.value)??""},getManifestationSource=manifestation=>manifestation.source??"",getManifestationLanguages=manifestation=>{var _languages$notes,_languages$main;const{languages}=manifestation;if(null!=languages&&null!==(_languages$notes=languages.notes)&&void 0!==_languages$notes&&_languages$notes.length)return languages.notes.join(", ");return(null==languages||null===(_languages$main=languages.main)||void 0===_languages$main?void 0:_languages$main.map((language=>language.display)).join(", "))??""},getManifestationLanguageIsoCode=manifestations=>{var _head2;const mainLanguages=manifestations.map((({languages})=>languages)).flatMap((language=>null==language?void 0:language.main)),uniqueLanguagesWithIsoCode=uniqBy_default()(mainLanguages,"isoCode"),uniqIsoCode=1===uniqueLanguagesWithIsoCode.length&&(null===(_head2=head_default()(uniqueLanguagesWithIsoCode))||void 0===_head2?void 0:_head2.isoCode);if(uniqIsoCode)return uniqIsoCode},getManifestationOriginalTitle=manifestation=>{var _manifestation$titles,_manifestation$titles2;return(null===(_manifestation$titles=manifestation.titles)||void 0===_manifestation$titles||null===(_manifestation$titles2=_manifestation$titles.original)||void 0===_manifestation$titles2?void 0:_manifestation$titles2[0])??""},getManifestationContributors=manifestation=>manifestation.contributors.map((contributor=>{if(contributor.roles.length>0){const roleNames=contributor.roles.map((role=>role.function.singular)).join(", ");return`${contributor.display} (${roleNames})`}return contributor.display})).join(" / ")??"",getManifestationAuthors=manifestation=>(0,general.UV)(manifestation.creators).join(", ")??"",getManifestationNotes=manifestation=>{var _manifestation$notes,_manifestation$notes$,_manifestation$notes$2;return(null===(_manifestation$notes=manifestation.notes)||void 0===_manifestation$notes||null===(_manifestation$notes$=_manifestation$notes[0])||void 0===_manifestation$notes$||null===(_manifestation$notes$2=_manifestation$notes$.display)||void 0===_manifestation$notes$2?void 0:_manifestation$notes$2.join(", "))??""},getManifestationPhysicalDescription=manifestation=>{var _manifestation$physic6,_manifestation$physic7;return(null===(_manifestation$physic6=manifestation.physicalDescriptions)||void 0===_manifestation$physic6||null===(_manifestation$physic7=_manifestation$physic6[0])||void 0===_manifestation$physic7?void 0:_manifestation$physic7.summary)??""},getManifestationHostPublication=manifestation=>{var _manifestation$hostPu;return(null===(_manifestation$hostPu=manifestation.hostPublication)||void 0===_manifestation$hostPu?void 0:_manifestation$hostPu.summary)??""},getManifestationParts=manifestation=>{var _manifestation$manife,_manifestation$manife2;return(null===(_manifestation$manife=manifestation.manifestationParts)||void 0===_manifestation$manife||null===(_manifestation$manife2=_manifestation$manife.parts)||void 0===_manifestation$manife2?void 0:_manifestation$manife2.map((item=>item.title)))||""},getDetailsListData=({manifestation,work,t})=>{const workFirstEditionYear=(work=>{var _work$workYear;return null!==(_work$workYear=work.workYear)&&void 0!==_work$workYear&&_work$workYear.year?String(work.workYear.year):""})(work),fallBackManifestation=((work,type)=>work.manifestations[type])(work,"bestRepresentation");return[{label:t("detailsListLanguageText"),value:getManifestationLanguages(manifestation??fallBackManifestation)},{label:t("detailsListPlayTimeText"),value:getManifestationPlayingTime(manifestation??fallBackManifestation)},{label:t("detailsListEditionText"),value:getManifestationEdition(manifestation??fallBackManifestation)},{label:t("detailsListGenreAndFormText"),value:getManifestationGenreAndForm(manifestation??fallBackManifestation)},{label:t("detailsListOriginalTitleText"),value:getManifestationOriginalTitle(manifestation??fallBackManifestation)},{label:t("detailsListPublisherText"),value:getManifestationPublisher(manifestation??fallBackManifestation)},{label:t("detailsListFirstEditionYearText"),value:workFirstEditionYear},{label:t("detailsListTypeText"),value:getManifestationMaterialTypes(manifestation??fallBackManifestation)},{label:t("detailsListContributorsText"),value:getManifestationContributors(manifestation??fallBackManifestation)},{label:t("detailsListScopeText"),value:getManifestationNumberOfPages(manifestation??fallBackManifestation)},{label:t("detailsListAudienceText"),value:getManifestationAudience(manifestation??fallBackManifestation,t)},{label:t("detailsListPhysicalDescriptionText"),value:getManifestationPhysicalDescription(manifestation??fallBackManifestation)},{label:t("detailsListHostPublicationText"),value:getManifestationHostPublication(manifestation??fallBackManifestation)},{label:t("detailsListPartsText"),value:getManifestationParts(manifestation??fallBackManifestation),type:MaterialDetailsList.w.List}]},getTotalHoldings=holdings=>holdings.reduce(((acc,curr)=>acc+curr.holdings.reduce(((accumulator,current)=>accumulator+current.materials.length),0)),0),getTotalReservations=holdings=>holdings.reduce(((acc,curr)=>acc+curr.reservations),0),totalAvailableMaterials=materials=>materials.reduce(((acc,curr)=>curr.available?acc+1:acc),0),isAnyManifestationAvailableOnBranch=libraryBranches=>libraryBranches.some((libraryBranch=>libraryBranch.holding.materials.some((material=>material.available)))),totalBranchesHaveMaterial=manifestationHoldings=>manifestationHoldings.filter((branchManifestationHoldings=>isAnyManifestationAvailableOnBranch(branchManifestationHoldings))).length,getInfomediaIds=manifestations=>{const infomediaIds=manifestations.map((manifestation=>manifestation.access.map((currentAccess=>"InfomediaService"===currentAccess.__typename?currentAccess.id:null)))).flat();return compact_default()(infomediaIds)},divideManifestationsByMaterialType=manifestations=>manifestations.reduce(((result,manifestation)=>{var _manifestation$materi3;if(!manifestation.materialTypes.length||null===(_manifestation$materi3=manifestation.materialTypes[0].materialTypeSpecific)||void 0===_manifestation$materi3||!_manifestation$materi3.display)return result;const type=manifestation.materialTypes[0].materialTypeSpecific.display;return{...result,[type]:[...result[type]??[],manifestation]}}),{}),getAllIdentifiers=manifestations=>manifestations.map((manifestation=>manifestation.identifiers.map((identifier=>identifier.value)))).flat(),getFirstBookManifestation=manifestations=>{const dividedManifestations=divideManifestationsByMaterialType(manifestations);return first_default()(dividedManifestations[material_type.sN.book])??null},isABook=manifestations=>manifestations.some((manifestation=>manifestation.materialTypes.some((materialType=>materialType.materialTypeSpecific.display.toLowerCase()===material_type.sN.book)))),getBestMaterialTypeForManifestation=manifestation=>isABook([manifestation])?material_type.sN.book:manifestation.materialTypes[0].materialTypeSpecific.display,getBestMaterialTypeForWork=work=>{return work.manifestations.bestRepresentation?getBestMaterialTypeForManifestation(work.manifestations.bestRepresentation):work.manifestations.latest?getBestMaterialTypeForManifestation(work.manifestations.latest):work.manifestations.first?getBestMaterialTypeForManifestation(work.manifestations.first):isABook(work.manifestations.all)?material_type.sN.book:(manifestations=work.manifestations.all,manifestations.filter((manifestation=>manifestation.materialTypes.length>0)))[0].materialTypes[0].materialTypeSpecific.display;var manifestations},reservationModalId=faustIds=>(0,modal_helpers.Q0)("reservation-modal",faustIds.sort()),getNumberedSeries=series=>series.filter((seriesEntry=>{var _seriesEntry$numberIn;return null===(_seriesEntry$numberIn=seriesEntry.numberInSeries)||void 0===_seriesEntry$numberIn?void 0:_seriesEntry$numberIn.number})),getUniqueMovies=relations=>{const movies=relations.hasAdaptation.filter((item=>item.ownerWork.workTypes.includes(graphql.CY.Movie)));return uniqBy_default()(movies,(item=>item.ownerWork.workId))},getDbcVerifiedSubjectsFirst=subjects=>uniq_default()([...subjects.dbcVerified.map((item=>item.display)),...subjects.all.map((item=>item.display))]),isParallelReservation=manifestations=>manifestations.length>1&&(0,helper.D7)(graphql.cs.Physical,manifestations)&&!(0,helper.BG)(manifestations),formatBranches=branches=>branches.flat().length?{exclude:branches.flat()}:{},branchesFromConfig=(blacklist,config)=>{const configMap={availability:"blacklistedAvailabilityBranchesConfig",pickup:"blacklistedPickupBranchesConfig"};return configMap[blacklist]?config(configMap[blacklist],{transformer:"stringToArray"}).filter((branch=>branch)):[]},getBlacklistedQueryArgs=(faustIds,config,blacklistType)=>{const args={recordid:faustIds};return"both"!==blacklistType?{...args,...formatBranches([branchesFromConfig(blacklistType,config)])}:{...args,...formatBranches([branchesFromConfig("availability",config),branchesFromConfig("pickup",config)])}},getAvailability=async({faustIds,config})=>(0,fbs.PC)(getBlacklistedQueryArgs(faustIds,config,"availability")),useGetHoldings=({faustIds,config,useAvailabilityBlacklist=!1,options})=>{const blacklistedBranches=useAvailabilityBlacklist?"both":"pickup",{data,isLoading,isError}=(0,fbs.pF)(getBlacklistedQueryArgs(faustIds,config,blacklistedBranches),options);return{data,isLoading,isError}},getManifestationBasedOnType=(work,materialType)=>{const{bestRepresentation,all}=work.manifestations;if(materialType===getManifestationMaterialTypes(bestRepresentation))return bestRepresentation;const sortedManifestations=getManifestationsOrderByTypeAndYear(all),filteredAndSortedManifestations=filterManifestationsByType(materialType,sortedManifestations),newestFilteredAndSortedManifestation=first_default()(filteredAndSortedManifestations);return newestFilteredAndSortedManifestation||bestRepresentation}},"./src/components/material/MaterialDetailsList.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>ListItemType,A:()=>material_MaterialDetailsList});var react=__webpack_require__("./node_modules/react/index.js");const description_list=({data,classNames,id})=>react.createElement("dl",{id,className:`list-description ${classNames??""}`,"data-cy":"list-description"},data.map((item=>{const{label,value}=item;return react.createElement("div",{className:"list-description__item"},react.createElement("dt",{className:"list-description__key"},label),react.createElement("dd",{className:"list-description__value"},value))})));try{descriptionlist.displayName="descriptionlist",descriptionlist.__docgenInfo={description:"",displayName:"descriptionlist",props:{classNames:{defaultValue:null,description:"",name:"classNames",required:!1,type:{name:"string | undefined"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"{ label: string; value: ReactNode; }[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/description-list/description-list.tsx#descriptionlist"]={docgenInfo:descriptionlist.__docgenInfo,name:"descriptionlist",path:"src/components/description-list/description-list.tsx#descriptionlist"})}catch(__react_docgen_typescript_loader_error){}let ListItemType=function(ListItemType){return ListItemType.Standard="standard",ListItemType.Link="link",ListItemType.List="list",ListItemType}({});const ListItem=({value})=>0===value.length?null:react.createElement("ul",{className:"list-description__value--list"},value.map((item=>react.createElement("li",{key:item},item)))),MaterialDetailsListRow=({type,value})=>{switch(type){case ListItemType.Link:return react.createElement("span",{className:"link-tag pr-4"},value);case ListItemType.List:return Array.isArray(value)?react.createElement(ListItem,{value}):null;default:return react.createElement("span",null,value)}},MaterialDetailsList=({data,className,id})=>{const listData=data.filter((item=>item.value)).map((item=>{const{label,value,type}=item;return{label,value:react.createElement(MaterialDetailsListRow,{type,value})}}));return react.createElement(description_list,{id,data:listData,classNames:className})},material_MaterialDetailsList=MaterialDetailsList;try{MaterialDetailsList.displayName="MaterialDetailsList",MaterialDetailsList.__docgenInfo={description:"",displayName:"MaterialDetailsList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ListData"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/material/MaterialDetailsList.tsx#MaterialDetailsList"]={docgenInfo:MaterialDetailsList.__docgenInfo,name:"MaterialDetailsList",path:"src/components/material/MaterialDetailsList.tsx#MaterialDetailsList"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/material/material-buttons/helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BG:()=>isArticle,D7:()=>hasCorrectAccessType,S5:()=>hasCorrectMaterialType,ft:()=>hasCorrectAccess});var _core_utils_types_article_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/utils/types/article-types.ts");const hasCorrectAccess=(desiredAccess,manifestations)=>manifestations.some((manifestation=>manifestation.access.some((({__typename})=>__typename.toLowerCase()===desiredAccess.toLowerCase())))),hasCorrectAccessType=(desiredAccessType,manifestations)=>manifestations.some((manifestation=>manifestation.accessTypes.some((type=>type.code===desiredAccessType)))),hasCorrectMaterialType=(desiredMaterialType,manifestations)=>manifestations.some((manifestation=>manifestation.materialTypes.some((type=>type.materialTypeSpecific.display.toLowerCase()===desiredMaterialType.toLowerCase())))),isArticle=manifestations=>_core_utils_types_article_types__WEBPACK_IMPORTED_MODULE_0__.A.some((type=>hasCorrectMaterialType(type,manifestations)))},"./src/core/utils/types/article-types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _material_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/utils/types/material-type.ts");const __WEBPACK_DEFAULT_EXPORT__=[_material_type__WEBPACK_IMPORTED_MODULE_0__.sN.article,_material_type__WEBPACK_IMPORTED_MODULE_0__.sN.paperArticle,_material_type__WEBPACK_IMPORTED_MODULE_0__.sN.onlineArticle,_material_type__WEBPACK_IMPORTED_MODULE_0__.sN.earticle]},"./src/core/utils/types/material-type.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{sN:()=>ManifestationMaterialType,wP:()=>AutosuggestCategory});let ManifestationMaterialType=function(ManifestationMaterialType){return ManifestationMaterialType.book="bog",ManifestationMaterialType.ebook="e-bog",ManifestationMaterialType.movie="film",ManifestationMaterialType.audioBook="lydbog (online)",ManifestationMaterialType.audioBookGeneric="lydbog",ManifestationMaterialType.music="node",ManifestationMaterialType.game="playstation 5",ManifestationMaterialType.animatedSeries="tegneserie",ManifestationMaterialType.article="artikel",ManifestationMaterialType.paperArticle="avisartikel",ManifestationMaterialType.onlineArticle="artikel (online)",ManifestationMaterialType.earticle="artikel",ManifestationMaterialType.boardGame="spil",ManifestationMaterialType.cdRom="cd",ManifestationMaterialType.magazine="tidsskrift",ManifestationMaterialType}({}),AutosuggestCategory=function(AutosuggestCategory){return AutosuggestCategory.book="bog",AutosuggestCategory.ebook="e-bog",AutosuggestCategory.movie="Film",AutosuggestCategory.audioBook="lydbog (online)",AutosuggestCategory.music="Musik",AutosuggestCategory.game="Spil",AutosuggestCategory.animatedSeries="tegneserie",AutosuggestCategory}({})}}]);