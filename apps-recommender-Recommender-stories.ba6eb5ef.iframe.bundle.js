(globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react=globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react||[]).push([[523],{"./src/apps/recommender/Recommender.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,default:()=>Recommender_stories});var serviceUrlArgs=__webpack_require__("./src/core/storybook/serviceUrlArgs.ts"),react=__webpack_require__("./node_modules/react/index.js"),general=__webpack_require__("./src/core/utils/helpers/general.ts"),graphql=__webpack_require__("./src/core/dbc-gateway/generated/graphql.tsx"),utils_config=__webpack_require__("./src/core/utils/config.tsx"),utils_text=__webpack_require__("./src/core/utils/text.tsx"),SimpleMaterial=__webpack_require__("./src/components/simple-material/SimpleMaterial.tsx");const InspirationRecommender=()=>{const t=(0,utils_text.F)(),defaultSearchFromConfig=(0,utils_config.UK)()("emptyRecommenderSearchConfig"),{inspiration:inspirationLimit}=(0,general.fL)(),[recommendedMaterials,setRecommendedMaterials]=(0,react.useState)(null),{data}=(0,graphql.KG)({limit:inspirationLimit,q:{all:defaultSearchFromConfig},offset:0});return(0,react.useEffect)((()=>{data&&setRecommendedMaterials(data)}),[data]),null===recommendedMaterials?null:react.createElement(react.Fragment,null,react.createElement("h2",{className:"recommender__title text-header-h1"},t("recommenderTitleInspirationText")),react.createElement("ul",{className:"recommender__grid"},recommendedMaterials&&recommendedMaterials.search.works.map((work=>react.createElement(SimpleMaterial.A,{app:"inspiration-recommender",work})))))},recommender_InspirationRecommender=InspirationRecommender;try{InspirationRecommender.displayName="InspirationRecommender",InspirationRecommender.__docgenInfo={description:"",displayName:"InspirationRecommender",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/recommender/InspirationRecommender.tsx#InspirationRecommender"]={docgenInfo:InspirationRecommender.__docgenInfo,name:"InspirationRecommender",path:"src/apps/recommender/InspirationRecommender.tsx#InspirationRecommender"})}catch(__react_docgen_typescript_loader_error){}var material_fetch_hoc=__webpack_require__("./src/apps/loan-list/materials/utils/material-fetch-hoc.tsx");const RecommendList=({material,loanOrReservationFaust,titleKey})=>{const t=(0,utils_text.F)(),{recommender:recommenderLimit}=(0,general.fL)(),{data}=(0,graphql.Nr)({faust:loanOrReservationFaust,limit:recommenderLimit}),[recommendedMaterials,setRecommendedMaterials]=(0,react.useState)(null);return(0,react.useEffect)((()=>{data&&setRecommendedMaterials(data)}),[data]),react.createElement(react.Fragment,null,material&&material.title&&react.createElement("h2",{className:"recommender__title text-header-h1"},t(titleKey,{placeholders:{"@title":material.title}})),react.createElement("ul",{className:"recommender__triple-grid"},recommendedMaterials&&recommendedMaterials.recommend.result.map((({work})=>react.createElement(SimpleMaterial.A,{work,app:"recommender"})))))},recommender_RecommendList=(0,__webpack_require__("./src/apps/loan-list/materials/utils/digital-material-fetch-hoc.tsx").A)((0,material_fetch_hoc.A)(RecommendList));try{RecommendList.displayName="RecommendList",RecommendList.__docgenInfo={description:"",displayName:"RecommendList",props:{loanOrReservationFaust:{defaultValue:null,description:"",name:"loanOrReservationFaust",required:!0,type:{name:"string"}},titleKey:{defaultValue:null,description:"",name:"titleKey",required:!0,type:{name:"enum",value:[{value:'"recommenderTitleLoansText"'},{value:'"recommenderTitleReservationsText"'}]}},digitalMaterial:{defaultValue:null,description:"",name:"digitalMaterial",required:!1,type:{name:"Product | null | undefined"}},item:{defaultValue:null,description:"",name:"item",required:!1,type:{name:"Nullable<Partial<ListIdsType & { details: Nullable<Partial<BasicDetails>>; }>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/recommender/RecommendList.tsx#RecommendList"]={docgenInfo:RecommendList.__docgenInfo,name:"RecommendList",path:"src/apps/recommender/RecommendList.tsx#RecommendList"})}catch(__react_docgen_typescript_loader_error){}var useReservations=__webpack_require__("./src/core/utils/useReservations.tsx"),useLoans=__webpack_require__("./src/core/utils/useLoans.tsx");const Recommender=()=>{const[loanForRecommender,setLoanForRecommender]=(0,react.useState)(null),[reservationForRecommender,setReservationForRecommender]=(0,react.useState)(null),{fbs:{loans:physicalLoans,isLoading:fbsLoansLoading}}=(0,useLoans.A)(),{fbs:{reservations:physicalReservations,isLoading:fbsReservationsLoading}}=(0,useReservations.A)();(0,react.useEffect)((()=>{if(null!==physicalLoans){const newestLoan=(0,general.EA)(physicalLoans).reverse();newestLoan.length>0&&setLoanForRecommender(newestLoan[0])}if(null!==physicalReservations){const newestReservation=(0,general.Y2)(physicalReservations).reverse();newestReservation.length>0&&setReservationForRecommender(newestReservation[0])}}),[physicalLoans,physicalReservations,setLoanForRecommender]);const stillLoading=fbsReservationsLoading||fbsLoansLoading;return react.createElement("div",{className:"recommender recommender--padding-desktop recommender--triple-desktop"},loanForRecommender&&loanForRecommender.faust&&react.createElement(recommender_RecommendList,{titleKey:"recommenderTitleLoansText",item:loanForRecommender,loanOrReservationFaust:loanForRecommender.faust}),!loanForRecommender&&reservationForRecommender&&reservationForRecommender.faust&&react.createElement(recommender_RecommendList,{titleKey:"recommenderTitleReservationsText",item:reservationForRecommender,loanOrReservationFaust:reservationForRecommender.faust}),!loanForRecommender&&!reservationForRecommender&&!stillLoading&&react.createElement(recommender_InspirationRecommender,null))},recommender_Recommender=Recommender;try{Recommender.displayName="Recommender",Recommender.__docgenInfo={description:"",displayName:"Recommender",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/recommender/Recommender.tsx#Recommender"]={docgenInfo:Recommender.__docgenInfo,name:"Recommender",path:"src/apps/recommender/Recommender.tsx#Recommender"})}catch(__react_docgen_typescript_loader_error){}var url=__webpack_require__("./src/core/utils/url.tsx"),guarded_app=__webpack_require__("./src/components/guarded-app.tsx");const Recommender_entry=(0,url.nU)((0,utils_config.NV)((0,utils_text.i)((()=>react.createElement(guarded_app.A,{app:"recommender"},react.createElement(recommender_Recommender,null))))));try{Recommenderentry.displayName="Recommenderentry",Recommenderentry.__docgenInfo={description:"",displayName:"Recommenderentry",props:{q:{defaultValue:null,description:"",name:"q",required:!1,type:{name:"string | undefined"}},pageSizeDesktop:{defaultValue:null,description:"",name:"pageSizeDesktop",required:!1,type:{name:"number | undefined"}},pageSizeMobile:{defaultValue:null,description:"",name:"pageSizeMobile",required:!1,type:{name:"number | undefined"}},materialUrl:{defaultValue:null,description:"",name:"materialUrl",required:!0,type:{name:"string"}},searchUrl:{defaultValue:null,description:"",name:"searchUrl",required:!0,type:{name:"string"}},advancedSearchUrl:{defaultValue:null,description:"",name:"advancedSearchUrl",required:!0,type:{name:"string"}},fbsBaseUrl:{defaultValue:null,description:"",name:"fbsBaseUrl",required:!0,type:{name:"string"}},loanListEreolenUrl:{defaultValue:null,description:"",name:"loanListEreolenUrl",required:!0,type:{name:"string"}},feesPageUrl:{defaultValue:null,description:"",name:"feesPageUrl",required:!0,type:{name:"string"}},publizonBaseUrl:{defaultValue:null,description:"",name:"publizonBaseUrl",required:!0,type:{name:"string"}},dplCmsBaseUrl:{defaultValue:null,description:"",name:"dplCmsBaseUrl",required:!0,type:{name:"string"}},coverBaseUrl:{defaultValue:null,description:"",name:"coverBaseUrl",required:!0,type:{name:"string"}},materialBaseUrl:{defaultValue:null,description:"",name:"materialBaseUrl",required:!0,type:{name:"string"}},fbiBaseUrl:{defaultValue:null,description:"",name:"fbiBaseUrl",required:!0,type:{name:"string"}},fbiLocalBaseUrl:{defaultValue:null,description:"",name:"fbiLocalBaseUrl",required:!0,type:{name:"string"}},fbiGlobalBaseUrl:{defaultValue:null,description:"",name:"fbiGlobalBaseUrl",required:!0,type:{name:"string"}},authUrl:{defaultValue:null,description:"",name:"authUrl",required:!0,type:{name:"string"}},ereolenHomepageUrl:{defaultValue:null,description:"",name:"ereolenHomepageUrl",required:!0,type:{name:"string"}},materialListBaseUrl:{defaultValue:null,description:"",name:"materialListBaseUrl",required:!0,type:{name:"string"}},alertErrorCloseText:{defaultValue:null,description:"",name:"alertErrorCloseText",required:!0,type:{name:"string"}},alertErrorMessageText:{defaultValue:null,description:"",name:"alertErrorMessageText",required:!0,type:{name:"string"}},multiselectAllOptionText:{defaultValue:null,description:"",name:"multiselectAllOptionText",required:!0,type:{name:"string"}},groupModalGoToMaterialAriaLabelText:{defaultValue:null,description:"",name:"groupModalGoToMaterialAriaLabelText",required:!0,type:{name:"string"}},availabilityAvailableText:{defaultValue:null,description:"",name:"availabilityAvailableText",required:!0,type:{name:"string"}},availabilityUnavailableText:{defaultValue:null,description:"",name:"availabilityUnavailableText",required:!0,type:{name:"string"}},loansNotOverdueText:{defaultValue:null,description:"",name:"loansNotOverdueText",required:!0,type:{name:"string"}},patronContactInfoBodyText:{defaultValue:null,description:"",name:"patronContactInfoBodyText",required:!0,type:{name:"string"}},pauseReservationModalBelowInputsText:{defaultValue:null,description:"",name:"pauseReservationModalBelowInputsText",required:!0,type:{name:"string"}},materialDetailsCloseModalAriaLabelText:{defaultValue:null,description:"",name:"materialDetailsCloseModalAriaLabelText",required:!0,type:{name:"string"}},findOnShelfExpandButtonExplanationText:{defaultValue:null,description:"",name:"findOnShelfExpandButtonExplanationText",required:!0,type:{name:"string"}},reservationsStillInQueueForText:{defaultValue:null,description:"",name:"reservationsStillInQueueForText",required:!0,type:{name:"string"}},materialDetailsModalAriaDescriptionText:{defaultValue:null,description:"",name:"materialDetailsModalAriaDescriptionText",required:!0,type:{name:"string"}},changePickupLocationText:{defaultValue:null,description:"",name:"changePickupLocationText",required:!0,type:{name:"string"}},changeInterestPeriodText:{defaultValue:null,description:"",name:"changeInterestPeriodText",required:!0,type:{name:"string"}},modalReservationFormPickupLabelText:{defaultValue:null,description:"",name:"modalReservationFormPickupLabelText",required:!0,type:{name:"string"}},screenReaderModalDescriptionPickupText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionPickupText",required:!0,type:{name:"string"}},closeModalAriaLabelPickupText:{defaultValue:null,description:"",name:"closeModalAriaLabelPickupText",required:!0,type:{name:"string"}},modalReservationFormNoInterestAfterHeaderTitleText:{defaultValue:null,description:"",name:"modalReservationFormNoInterestAfterHeaderTitleText",required:!0,type:{name:"string"}},modalReservationFormNoInterestAfterHeaderDescriptionText:{defaultValue:null,description:"",name:"modalReservationFormNoInterestAfterHeaderDescriptionText",required:!0,type:{name:"string"}},modalReservationFormNoInterestAfterLabelText:{defaultValue:null,description:"",name:"modalReservationFormNoInterestAfterLabelText",required:!0,type:{name:"string"}},screenReaderModalDescriptionEmailText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionEmailText",required:!0,type:{name:"string"}},screenReaderModalDescriptionInterestPeriodText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionInterestPeriodText",required:!0,type:{name:"string"}},screenReaderModalDescriptionSmsText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionSmsText",required:!0,type:{name:"string"}},closeModalAriaLabelEmailText:{defaultValue:null,description:"",name:"closeModalAriaLabelEmailText",required:!0,type:{name:"string"}},closeModalAriaLabelInterestPeriodText:{defaultValue:null,description:"",name:"closeModalAriaLabelInterestPeriodText",required:!0,type:{name:"string"}},closeModalAriaLabelSmsText:{defaultValue:null,description:"",name:"closeModalAriaLabelSmsText",required:!0,type:{name:"string"}},deleteReservationModalButtonText:{defaultValue:null,description:"",name:"deleteReservationModalButtonText",required:!0,type:{name:"string"}},pauseReservationModalAriaDescriptionText:{defaultValue:null,description:"",name:"pauseReservationModalAriaDescriptionText",required:!0,type:{name:"string"}},acceptModalAriaDescriptionText:{defaultValue:null,description:"",name:"acceptModalAriaDescriptionText",required:!0,type:{name:"string"}},addToFavoritesAriaLabelText:{defaultValue:null,description:"",name:"addToFavoritesAriaLabelText",required:!0,type:{name:"string"}},removeFromFavoritesAriaLabelText:{defaultValue:null,description:"",name:"removeFromFavoritesAriaLabelText",required:!0,type:{name:"string"}},acceptModalAriaLabelText:{defaultValue:null,description:"",name:"acceptModalAriaLabelText",required:!0,type:{name:"string"}},acceptModalHeaderText:{defaultValue:null,description:"",name:"acceptModalHeaderText",required:!0,type:{name:"string"}},acceptModalAreYouSureText:{defaultValue:null,description:"",name:"acceptModalAreYouSureText",required:!0,type:{name:"string"}},acceptModalBodyText:{defaultValue:null,description:"",name:"acceptModalBodyText",required:!0,type:{name:"string"}},acceptModalCancelButtonText:{defaultValue:null,description:"",name:"acceptModalCancelButtonText",required:!0,type:{name:"string"}},acceptModalAcceptButtonText:{defaultValue:null,description:"",name:"acceptModalAcceptButtonText",required:!0,type:{name:"string"}},isLoadingHeartText:{defaultValue:null,description:"",name:"isLoadingHeartText",required:!0,type:{name:"string"}},reservationPickUpLatestText:{defaultValue:null,description:"",name:"reservationPickUpLatestText",required:!0,type:{name:"string"}},reservationListReadyText:{defaultValue:null,description:"",name:"reservationListReadyText",required:!0,type:{name:"string"}},reservationListDigitalPickupText:{defaultValue:null,description:"",name:"reservationListDigitalPickupText",required:!0,type:{name:"string"}},pincodeSectionDescriptionText:{defaultValue:null,description:"",name:"pincodeSectionDescriptionText",required:!0,type:{name:"string"}},errorBoundaryAlertBodyButtonAriaText:{defaultValue:null,description:"",name:"errorBoundaryAlertBodyButtonAriaText",required:!0,type:{name:"string"}},buttonText:{defaultValue:null,description:"",name:"buttonText",required:!0,type:{name:"string"}},etAlText:{defaultValue:null,description:"",name:"etAlText",required:!0,type:{name:"string"}},emptyRecommenderSearchConfig:{defaultValue:null,description:"",name:"emptyRecommenderSearchConfig",required:!0,type:{name:"string"}},recommenderTitleLoansText:{defaultValue:null,description:"",name:"recommenderTitleLoansText",required:!0,type:{name:"string"}},recommenderTitleReservationsText:{defaultValue:null,description:"",name:"recommenderTitleReservationsText",required:!0,type:{name:"string"}},materialByAuthorText:{defaultValue:null,description:"",name:"materialByAuthorText",required:!0,type:{name:"string"}},materialAndAuthorText:{defaultValue:null,description:"",name:"materialAndAuthorText",required:!0,type:{name:"string"}},recommenderTitleInspirationText:{defaultValue:null,description:"",name:"recommenderTitleInspirationText",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/recommender/Recommender.entry.tsx#Recommenderentry"]={docgenInfo:Recommenderentry.__docgenInfo,name:"Recommenderentry",path:"src/apps/recommender/Recommender.entry.tsx#Recommenderentry"})}catch(__react_docgen_typescript_loader_error){}var globalTextArgs=__webpack_require__("./src/core/storybook/globalTextArgs.ts"),globalConfigArgs=__webpack_require__("./src/core/storybook/globalConfigArgs.ts");const Recommender_stories={title:"Apps / Recommender",component:Recommender_entry,argTypes:{...serviceUrlArgs.U,...globalTextArgs.U,...globalConfigArgs.U,emptyRecommenderSearchConfig:{control:{type:"text"}},recommenderTitleLoansText:{control:{type:"text"}},recommenderTitleReservationsText:{control:{type:"text"}},materialByAuthorText:{control:{type:"text"}},materialAndAuthorText:{control:{type:"text"}},etAlText:{control:{type:"text"}},recommenderTitleInspirationText:{control:{type:"text"}},materialUrl:{control:{type:"text"}}}},Primary={args:{...serviceUrlArgs.A,...globalTextArgs.A,...globalConfigArgs.A,emptyRecommenderSearchConfig:"Mimbo jimbo",recommenderTitleLoansText:"Because you have borrowed @title you may also like",recommenderTitleReservationsText:"Because you have reserved @title you may also like",materialByAuthorText:"By",materialAndAuthorText:"and",etAlText:"et al.",recommenderTitleInspirationText:"For your inspiration",materialUrl:"/work/:workid"}};Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:'{\n  args: {\n    ...serviceUrlArgs,\n    ...globalTextArgs,\n    ...globalConfigArgs,\n    emptyRecommenderSearchConfig: "Mimbo jimbo",\n    recommenderTitleLoansText: "Because you have borrowed @title you may also like",\n    recommenderTitleReservationsText: "Because you have reserved @title you may also like",\n    materialByAuthorText: "By",\n    materialAndAuthorText: "and",\n    etAlText: "et al.",\n    recommenderTitleInspirationText: "For your inspiration",\n    materialUrl: "/work/:workid"\n  }\n}',...Primary.parameters?.docs?.source}}}},"./src/apps/loan-list/materials/utils/digital-material-fetch-hoc.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_publizon_publizon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/publizon/publizon.ts"),_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/helpers/list-mapper.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=(Component,LoadingComponent)=>({item,...props})=>{if(item.faust)return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item}));if(item.identifier){const[digitalMaterial,setDigitalMaterial]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),{data:productsData,isSuccess:isSuccessDigital,isLoading}=(0,_core_publizon_publizon__WEBPACK_IMPORTED_MODULE_1__.wK)(item.identifier);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{productsData&&isSuccessDigital&&productsData.product&&setDigitalMaterial((0,_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__.z7)(productsData.product))}),[productsData,isSuccessDigital]),isLoading?LoadingComponent?react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingComponent,null):null:digitalMaterial?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item,material:digitalMaterial})):null}return null}},"./src/apps/loan-list/materials/utils/material-fetch-hoc.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/dbc-gateway/generated/graphql.tsx"),_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/helpers/list-mapper.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=(Component,FallbackComponent)=>({item,...props})=>{if(null!=item&&item.identifier)return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item}));if(null!=item&&item.faust){const[material,setMaterial]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();let isLoadingAnything=!1,manifestation=null;if(item.reservationIds&&item.reservationIds.length>1){const{isSuccess,data,isLoading}=(0,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.NM)({faust:item.faust});isLoadingAnything=isLoading,isSuccess&&null!=data&&data.manifestation&&(manifestation=data.manifestation.ownerWork.manifestations.bestRepresentation)}else{const{isSuccess,data,isLoading}=(0,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.V3)({faust:item.faust});isLoadingAnything=isLoading,isSuccess&&null!=data&&data.manifestation&&(manifestation=data.manifestation)}return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{manifestation?setMaterial((0,_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__.Ml)(manifestation)):item.details&&setMaterial(item.details)}),[manifestation,item.details]),isLoadingAnything?FallbackComponent?react__WEBPACK_IMPORTED_MODULE_0__.createElement(FallbackComponent,null):null:material?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item,material})):null}return null}},"./src/apps/reservation-list/utils/helpers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Fk:()=>getReservationStatusInfoLabel,Iw:()=>getStatusText,JU:()=>getReadyForPickup,LQ:()=>sortByOldestPickupDeadline,hm:()=>sortByNumberInQueue});var _core_utils_helpers_date__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/utils/helpers/date.ts"),_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/utils/helpers/general.ts");const sortByOldestPickupDeadline=list=>list.sort(((objA,objB)=>new Date(objA.pickupDeadline||new Date).getTime()-new Date(objB.pickupDeadline||new Date).getTime())),sortByNumberInQueue=reservations=>[...reservations].sort(((a,b)=>(a.numberInQueue||0)-(b.numberInQueue||0))),getReadyForPickup=list=>list.filter((({state})=>"readyForPickup"===state)),infoLabelTextType_pickUpLatest="reservationPickUpLatestText",infoLabelTextType_loanBefore="reservationListLoanBeforeText",getReservationStatusInfoLabel=({pickupBranch,date,isDigital,t})=>t(pickupBranch?infoLabelTextType_pickUpLatest:infoLabelTextType_loanBefore,{placeholders:{"@date":(0,_core_utils_helpers_date__WEBPACK_IMPORTED_MODULE_0__.SL)({date,isDigital})}}),getStatusText=({identifier,state,pickupDeadline,faust,numberInQueue},t)=>identifier&&"reserved"===state?pickupDeadline?t("reservationListAvailableInText",{placeholders:{"@count":(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__.m2)(pickupDeadline)}}):t("reservationListYouAreInQueueText"):faust&&numberInQueue?t("dashboardNumberInLineText",{count:numberInQueue,placeholders:{"@count":numberInQueue}}):""},"./src/components/simple-material/SimpleMaterial.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),react_query__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-query/es/index.js"),_button_favourite_button_favourite__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/button-favourite/button-favourite.tsx"),_cover_cover__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/cover/cover.tsx"),_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/core/utils/helpers/general.ts"),_core_guardedRequests_slice__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/core/guardedRequests.slice.ts"),_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/core/utils/helpers/url.ts"),_atoms_links_Link__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/atoms/links/Link.tsx"),_core_utils_url__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/core/utils/url.tsx");const SimpleMaterial=({bright,work:{titles:{full:fullTitle},creators,workId},work,app})=>{const materialUrl=(0,_core_utils_url__WEBPACK_IMPORTED_MODULE_8__.Ik)()("materialUrl"),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.wA)(),queryClient=(0,react_query__WEBPACK_IMPORTED_MODULE_2__.useQueryClient)(),materialFullUrl=(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_9__.Qj)(materialUrl,workId);let authors=null;const inputContributorsArray=null==creators?void 0:creators.map((({display})=>display));inputContributorsArray&&(authors=(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_5__.Zc)(!0,inputContributorsArray));const manifestationPid=(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_5__.hh)(work),title=fullTitle[0];return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"simple-material "+(bright?" simple-material--bright":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"simple-material__cover-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_cover_cover__WEBPACK_IMPORTED_MODULE_4__.Y,{animate:!0,size:"medium",ids:[manifestationPid]})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"simple-material__favourite"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_button_favourite_button_favourite__WEBPACK_IMPORTED_MODULE_3__.A,{title,darkBackground:!bright,id:workId,addToListRequest:id=>{dispatch((0,_core_guardedRequests_slice__WEBPACK_IMPORTED_MODULE_6__.A5)({type:"addFavorite",args:{id,queryClient},app}))}})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"simple-material__meta"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms_links_Link__WEBPACK_IMPORTED_MODULE_7__.A,{href:materialFullUrl,className:"simple-material__title"},title),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"simple-material__author"},authors)))},__WEBPACK_DEFAULT_EXPORT__=SimpleMaterial;try{SimpleMaterial.displayName="SimpleMaterial",SimpleMaterial.__docgenInfo={description:"",displayName:"SimpleMaterial",props:{work:{defaultValue:null,description:"",name:"work",required:!0,type:{name:"Work"}},bright:{defaultValue:null,description:"",name:"bright",required:!1,type:{name:"boolean | undefined"}},app:{defaultValue:null,description:"",name:"app",required:!0,type:{name:"enum",value:[{value:'"material"'},{value:'"search-result"'},{value:'"advanced-search"'},{value:'"recommender"'},{value:'"something-similar"'},{value:'"favorites-list-mc"'},{value:'"inspiration-recommender"'},{value:'"recommended-material"'},{value:'"recommendation"'},{value:'"material-grid-automatic"'},{value:'"material-grid-manual"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/simple-material/SimpleMaterial.tsx#SimpleMaterial"]={docgenInfo:SimpleMaterial.__docgenInfo,name:"SimpleMaterial",path:"src/components/simple-material/SimpleMaterial.tsx#SimpleMaterial"})}catch(__react_docgen_typescript_loader_error){}},"./src/core/publizon/publizon.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{tt:()=>getGetV1UserReservationsQueryKey,de:()=>useDeleteV1UserReservationsIdentifier,PF:()=>useGetV1LibraryProfile,Qo:()=>useGetV1LoanstatusIdentifier,wK:()=>useGetV1ProductsIdentifier,VM:()=>useGetV1UserLoans,pA:()=>useGetV1UserReservations});var es=__webpack_require__("./node_modules/react-query/es/index.js"),FetchFailedCriticalError=__webpack_require__("./src/core/fetchers/FetchFailedCriticalError.ts"),helpers=__webpack_require__("./src/core/fetchers/helpers.ts"),core_token=__webpack_require__("./src/core/token.js"),extractServiceBaseUrls=__webpack_require__("./src/core/utils/reduxMiddleware/extractServiceBaseUrls.ts"),FetcherHttpError=__webpack_require__("./src/core/fetchers/FetcherHttpError.ts");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class PublizonServiceHttpError extends FetcherHttpError.A{constructor(...args){super(...args),_defineProperty(this,"name","PublizonServiceHttpError")}}const fetcher_fetcher=async({url,method,headers,params,data})=>{const token=(0,core_token.gf)(core_token.CI)??(0,core_token.gf)(core_token._L),authHeaders=token?{Authorization:`Bearer ${token}`}:{},body=data?JSON.stringify(data):null,serviceUrl=(0,helpers.Z4)({baseUrl:(0,extractServiceBaseUrls.aW)(extractServiceBaseUrls.TJ.publizon),url,params});try{const response=await fetch(serviceUrl,{method,headers:{...headers,...authHeaders},body});if(!response.ok)throw new PublizonServiceHttpError(response.status,response.statusText,serviceUrl);try{return await response.json()}catch(e){if(!(e instanceof SyntaxError))throw e}}catch(error){if(error instanceof PublizonServiceHttpError)throw error;const message=error instanceof Error?error.message:"Unknown error";throw new FetchFailedCriticalError.A(message,serviceUrl)}return null},getGetV1LibraryProfileQueryOptions=options=>{const{query:queryOptions}=options??{};return{queryKey:(null==queryOptions?void 0:queryOptions.queryKey)??["/v1/library/profile"],queryFn:({signal})=>(signal=>fetcher_fetcher({url:"/v1/library/profile",method:"GET",signal}))(signal),...queryOptions}},useGetV1LibraryProfile=options=>{const queryOptions=getGetV1LibraryProfileQueryOptions(options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query},getGetV1UserLoansQueryOptions=(params,options)=>{const{query:queryOptions}=options??{},queryKey=(null==queryOptions?void 0:queryOptions.queryKey)??(params=>["/v1/user/loans",...params?[params]:[]])(params);return{queryKey,queryFn:({signal})=>((params,signal)=>fetcher_fetcher({url:"/v1/user/loans",method:"GET",params,signal}))(params,signal),...queryOptions}},useGetV1UserLoans=(params,options)=>{const queryOptions=getGetV1UserLoansQueryOptions(params,options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query},getGetV1LoanstatusIdentifierQueryOptions=(identifier,queryOptions)=>{const queryKey=(null==queryOptions?void 0:queryOptions.queryKey)??(identifier=>[`/v1/loanstatus/${identifier}`])(identifier);return{queryKey,queryFn:({signal})=>((identifier,signal)=>fetcher_fetcher({url:`/v1/loanstatus/${identifier}`,method:"GET",signal}))(identifier,signal),enabled:!!identifier,...queryOptions}},useGetV1LoanstatusIdentifier=(identifier,queryOptions)=>{const options=getGetV1LoanstatusIdentifierQueryOptions(identifier,queryOptions),query=(0,es.useQuery)(options);return query.queryKey=options.queryKey,query},getGetV1ProductsIdentifierQueryOptions=(identifier,options)=>{const{query:queryOptions}=options??{},queryKey=(null==queryOptions?void 0:queryOptions.queryKey)??(identifier=>[`/v1/products/${identifier}`])(identifier);return{queryKey,queryFn:({signal})=>((identifier,signal)=>fetcher_fetcher({url:`/v1/products/${identifier}`,method:"GET",signal}))(identifier,signal),enabled:!!identifier,...queryOptions}},useGetV1ProductsIdentifier=(identifier,options)=>{const queryOptions=getGetV1ProductsIdentifierQueryOptions(identifier,options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query},getGetV1UserReservationsQueryKey=()=>["/v1/user/reservations"],getGetV1UserReservationsQueryOptions=options=>{const{query:queryOptions}=options??{};return{queryKey:(null==queryOptions?void 0:queryOptions.queryKey)??getGetV1UserReservationsQueryKey(),queryFn:({signal})=>(signal=>fetcher_fetcher({url:"/v1/user/reservations",method:"GET",signal}))(signal),...queryOptions}},useGetV1UserReservations=options=>{const queryOptions=getGetV1UserReservationsQueryOptions(options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query},getDeleteV1UserReservationsIdentifierMutationOptions=options=>{const{mutation:mutationOptions}=options??{};return{mutationFn:props=>{const{identifier}=props??{};return(identifier=>fetcher_fetcher({url:`/v1/user/reservations/${identifier}`,method:"DELETE"}))(identifier)},...mutationOptions}},useDeleteV1UserReservationsIdentifier=options=>{const mutationOptions=getDeleteV1UserReservationsIdentifierMutationOptions(options);return(0,es.useMutation)(mutationOptions)}},"./src/core/storybook/globalConfigArgs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,U:()=>argTypes});const argTypes={errorMessagesConfig:{description:"Configuration for error messages behaviour",control:{type:"text"},table:{type:{summary:"text"},defaultValue:{summary:'{"containerId":"dpl-react-apps-error-messages","shouldOnlyShowOneError":true,"showCloseButton":true}'}}}},__WEBPACK_DEFAULT_EXPORT__={errorMessagesConfig:'{"containerId":"dpl-react-apps-error-messages","shouldOnlyShowOneError":true,"showCloseButton":true}'}},"./src/core/utils/helpers/list-mapper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$U:()=>mapFBSLoanToLoanType,Ml:()=>mapManifestationToBasicDetailsType,hg:()=>mapPublizonReservationToReservationType,ji:()=>mapPublizonLoanToLoanType,sl:()=>mapFBSReservationGroupToReservationType,z7:()=>mapProductToBasicDetailsType});var lodash_values__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/values.js"),lodash_values__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_values__WEBPACK_IMPORTED_MODULE_0__),lodash_keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/keys.js"),lodash_keys__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_keys__WEBPACK_IMPORTED_MODULE_1__),lodash_head__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/head.js"),lodash_head__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_head__WEBPACK_IMPORTED_MODULE_2__),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/store.ts"),_general__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/utils/helpers/general.ts");function getSeriesString(series){return series.map((({title,members})=>{if(members[0].numberInSeries){return`${title} ${members[0].numberInSeries}`}return title})).join(", ")}const mapPublizonLoanToLoanType=list=>list.map((({loanExpireDateUtc,orderDateUtc,libraryBook})=>({dueDate:loanExpireDateUtc,loanDate:orderDateUtc,isRenewable:!1,materialItemNumber:(null==libraryBook?void 0:libraryBook.identifier)||"",renewalStatusList:[],loanType:null,identifier:(null==libraryBook?void 0:libraryBook.identifier)||null,faust:null,loanId:null}))),mapFBSLoanToLoanType=list=>list.map((({loanDetails,isRenewable,renewalStatusList})=>{var _loanDetails$periodic;return{dueDate:loanDetails.dueDate,loanDate:loanDetails.loanDate,periodical:(null===(_loanDetails$periodic=loanDetails.periodical)||void 0===_loanDetails$periodic?void 0:_loanDetails$periodic.displayText)||"",renewalStatusList,isRenewable,materialItemNumber:loanDetails.materialItemNumber,loanType:loanDetails.loanType,identifier:null,faust:loanDetails.recordId||null,loanId:loanDetails.loanId,details:loanDetails.ilBibliographicRecord?{title:loanDetails.ilBibliographicRecord.title,authors:loanDetails.ilBibliographicRecord.author,authorsShort:loanDetails.ilBibliographicRecord.author,firstAuthor:loanDetails.ilBibliographicRecord.author,year:loanDetails.ilBibliographicRecord.publicationDate,lang:loanDetails.ilBibliographicRecord.language}:null}})),mapProductToBasicDetailsType=material=>{const{publicationDate,title,description,productType,contributors,externalProductId,languageCode}=material,{text:{data:texts}}=_store__WEBPACK_IMPORTED_MODULE_3__.M_.getState(),digitalProductType={1:texts.publizonEbookText,2:texts.publizonAudioBookText,4:texts.publizonPodcastText},authors=(null==contributors?void 0:contributors.map((({firstName,lastName})=>`${firstName} ${lastName}`)))||[];return{title,lang:languageCode,periodical:null,year:publicationDate?(date=publicationDate,new Date(date).getFullYear()):"",description,materialType:productType?digitalProductType[productType]:"",externalProductId:null==externalProductId?void 0:externalProductId.id,authors:contributors?(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!1,authors):"",authorsShort:contributors?(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!0,authors):""};var date},mapManifestationToBasicDetailsType=material=>{var _languages$main,_languages$main$;const{edition,abstract,titles,pid,materialTypes,creators,series,languages}=material,isoCode=(null==languages||null===(_languages$main=languages.main)||void 0===_languages$main||null===(_languages$main$=_languages$main[0])||void 0===_languages$main$?void 0:_languages$main$.isoCode)??"",description=abstract?abstract[0]:"",{full:[fullText]}=titles||{full:[]},{publicationYear}=edition||{},{display:year}=publicationYear||{},inputContributorsArray=(null==creators?void 0:creators.map((({display})=>display)))||[],firstAuthor=creators&&creators.length?creators[0].display:"";return{lang:isoCode,authors:(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!1,inputContributorsArray),authorsShort:(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!0,inputContributorsArray),firstAuthor,pid,title:fullText,year,description,series:series&&series.length>0&&series[0].members&&series[0].members.length>0?getSeriesString(series):"",materialType:materialTypes?materialTypes[0].materialTypeSpecific.display:void 0}},mapPublizonReservationToReservationType=list=>list.map((({identifier,createdDateUtc,status,expectedRedeemDateUtc,productTitle,expireDateUtc})=>({identifier,faust:null,dateOfReservation:createdDateUtc,expiryDate:expireDateUtc,state:status?{1:"reserved",2:"readyForPickup",3:"redeemed",4:"cancelled",5:"expired"}[status]:null,title:productTitle,pickupDeadline:expectedRedeemDateUtc}))),mapFBSReservationGroupToReservationType=list=>list.map((({dateOfReservation,expiryDate,numberInQueue,state,pickupBranch,pickupDeadline,pickupNumber,periodical,records,ilBibliographicRecord})=>({periodical:(null==periodical?void 0:periodical.displayText)||"",faust:lodash_head__WEBPACK_IMPORTED_MODULE_2___default()(lodash_keys__WEBPACK_IMPORTED_MODULE_1___default()(records)),dateOfReservation,expiryDate,numberInQueue,state:"readyForPickup"===state?"readyForPickup":"reserved",pickupBranch,pickupDeadline,pickupNumber,reservationIds:lodash_values__WEBPACK_IMPORTED_MODULE_0___default()(records),details:ilBibliographicRecord?{title:ilBibliographicRecord.title,authors:ilBibliographicRecord.author,authorsShort:ilBibliographicRecord.author,firstAuthor:ilBibliographicRecord.author,year:ilBibliographicRecord.publicationDate,lang:ilBibliographicRecord.language}:null})))},"./src/core/utils/useLoanThresholds.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/utils/config.tsx");const __WEBPACK_DEFAULT_EXPORT__=()=>{const config=(0,_config__WEBPACK_IMPORTED_MODULE_0__.UK)();return{warning:Number(config("expirationWarningDaysBeforeConfig")),danger:0}}},"./src/core/utils/useLoans.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _fbs_fbs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/fbs/fbs.ts"),_publizon_publizon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/publizon/publizon.ts"),_helpers_general__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/helpers/general.ts"),_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/utils/helpers/list-mapper.ts"),_useLoanThresholds__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/utils/useLoanThresholds.tsx");const filterLoansNotOverdue=(loans,warning)=>loans.filter((({dueDate})=>{const due=dueDate||"";return(0,_helpers_general__WEBPACK_IMPORTED_MODULE_2__.m2)(due)-warning>0})),filterLoansOverdue=loans=>loans.filter((({dueDate})=>(0,_helpers_general__WEBPACK_IMPORTED_MODULE_2__.El)(dueDate))),filterLoansSoonOverdue=(loans,warning)=>loans.filter((({dueDate})=>{const due=dueDate||"",daysUntilExpiration=(0,_helpers_general__WEBPACK_IMPORTED_MODULE_2__.m2)(due);return daysUntilExpiration-warning<=0&&daysUntilExpiration-warning>=-warning})),__WEBPACK_DEFAULT_EXPORT__=()=>{const{data:loansFbs,isLoading:isLoadingFbs,isError:isErrorFbs}=(0,_fbs_fbs__WEBPACK_IMPORTED_MODULE_0__.zw)(),{data:loansPublizon,isLoading:isLoadingPublizon,isError:isErrorPublizon}=(0,_publizon_publizon__WEBPACK_IMPORTED_MODULE_1__.VM)(),threshold=(0,_useLoanThresholds__WEBPACK_IMPORTED_MODULE_4__.A)(),loansIsLoading=isLoadingFbs||isLoadingPublizon,loansIsError=isErrorFbs||isErrorPublizon,mappedLoansFbs=loansFbs&&Array.isArray(loansFbs)?(0,_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_3__.$U)(loansFbs):[],mappedLoansPublizon=null!=loansPublizon&&loansPublizon.loans?(0,_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_3__.ji)(loansPublizon.loans).filter((item=>item.dueDate)):[],loans=[...mappedLoansFbs,...mappedLoansPublizon],loansOverdueFBS=filterLoansOverdue(mappedLoansFbs),LoansOverduePublizon=filterLoansOverdue(mappedLoansPublizon),loansOverdue=[...loansOverdueFBS,...LoansOverduePublizon],loansSoonOverdueFBS=filterLoansSoonOverdue(mappedLoansFbs,threshold.warning),loansSoonOverduePublizon=filterLoansSoonOverdue(mappedLoansPublizon,threshold.warning),loansSoonOverdue=[...loansSoonOverdueFBS,...loansSoonOverduePublizon],loansFarFromOverdueFBS=filterLoansNotOverdue(mappedLoansFbs,threshold.warning),loansFarFromOverduePublizon=filterLoansNotOverdue(mappedLoansPublizon,threshold.warning);return{all:{loans,overdue:loansOverdue,soonOverdue:loansSoonOverdue,farFromOverdue:[...loansFarFromOverdueFBS,...loansFarFromOverduePublizon],isLoading:loansIsLoading,isError:loansIsError},fbs:{loans:mappedLoansFbs,overdue:loansOverdueFBS,soonOverdue:loansSoonOverdueFBS,farFromOverdue:loansFarFromOverdueFBS,isLoading:isLoadingFbs,isError:isErrorFbs},publizon:{loans:mappedLoansPublizon,overdue:LoansOverduePublizon,soonOverdue:loansSoonOverduePublizon,farFromOverdue:loansFarFromOverduePublizon,isLoading:isLoadingPublizon,isError:isErrorPublizon}}}},"./src/core/utils/useReservations.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>utils_useReservations});var publizon=__webpack_require__("./src/core/publizon/publizon.ts"),list_mapper=__webpack_require__("./src/core/utils/helpers/list-mapper.ts"),helpers=__webpack_require__("./src/apps/reservation-list/utils/helpers.ts");const api_strings_namespaceObject_h="reserved";var reduce=__webpack_require__("./node_modules/lodash/reduce.js"),reduce_default=__webpack_require__.n(reduce),min=__webpack_require__("./node_modules/lodash/min.js"),min_default=__webpack_require__.n(min),map=__webpack_require__("./node_modules/lodash/map.js"),map_default=__webpack_require__.n(map),groupBy=__webpack_require__("./node_modules/lodash/groupBy.js"),groupBy_default=__webpack_require__.n(groupBy),fbs=__webpack_require__("./src/core/fbs/fbs.ts");function groupReservations(data){const reservationGroups=groupBy_default()(data,(reservation=>"parallel"===reservation.reservationType?reservation.transactionId:reservation.reservationId));return map_default()(reservationGroups,(reservationGroup=>({...reservationGroup[0],numberInQueue:min_default()(map_default()(reservationGroup,"numberInQueue")),records:reduce_default()(reservationGroup,((result,reservation)=>({...result,[reservation.recordId]:reservation.reservationId})),{})})))}const utils_useGetReservationGroups=()=>{const result=(0,fbs.$6)();return{...result,data:result.data&&Array.isArray(result.data)?groupReservations(result.data):null}};const getQueuedReservations=list=>[...list].filter((({state})=>state===api_strings_namespaceObject_h)),utils_useReservations=()=>{const{data:reservationsFbs,isLoading:isLoadingFbs,isError:isErrorFbs}=utils_useGetReservationGroups(),{data:reservationsPublizon,isLoading:isLoadingPublizon,isError:isErrorPublizon}=(0,publizon.pA)(),reservationsIsLoading=isLoadingFbs||isLoadingPublizon,reservationsIsError=isErrorFbs||isErrorPublizon,mappedReservationsFbs=reservationsFbs?(0,list_mapper.sl)(reservationsFbs):[],mappedReservationsPublizon=null!=reservationsPublizon&&reservationsPublizon.reservations?(0,list_mapper.hg)(reservationsPublizon.reservations):[],reservations=[...mappedReservationsFbs,...mappedReservationsPublizon],reservationsReadyToLoanFBS=(0,helpers.JU)(mappedReservationsFbs),reservationsReadyToLoanPublizon=(0,helpers.JU)(mappedReservationsPublizon),reservationsReadyToLoan=[...reservationsReadyToLoanFBS,...reservationsReadyToLoanPublizon],reservationsQueuedFBS=getQueuedReservations(mappedReservationsFbs),reservationsQueuedPublizon=getQueuedReservations(mappedReservationsPublizon);return{all:{reservations,readyToLoan:reservationsReadyToLoan,queued:[...reservationsQueuedFBS,...reservationsQueuedPublizon],isLoading:reservationsIsLoading,isError:reservationsIsError},fbs:{reservations:mappedReservationsFbs,readyToLoan:reservationsReadyToLoanFBS,queued:reservationsQueuedFBS,isLoading:isLoadingFbs,isError:isErrorFbs},publizon:{reservations:mappedReservationsPublizon,readyToLoan:reservationsReadyToLoanPublizon,queued:reservationsQueuedPublizon,isLoading:isLoadingPublizon,isError:isErrorPublizon}}}},"./node_modules/lodash/_arrayAggregator.js":module=>{module.exports=function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}},"./node_modules/lodash/_arrayReduce.js":module=>{module.exports=function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}},"./node_modules/lodash/_baseAggregator.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseEach=__webpack_require__("./node_modules/lodash/_baseEach.js");module.exports=function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,(function(value,key,collection){setter(accumulator,value,iteratee(value),collection)})),accumulator}},"./node_modules/lodash/_baseAssignValue.js":(module,__unused_webpack_exports,__webpack_require__)=>{var defineProperty=__webpack_require__("./node_modules/lodash/_defineProperty.js");module.exports=function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value,writable:!0}):object[key]=value}},"./node_modules/lodash/_baseExtremum.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isSymbol=__webpack_require__("./node_modules/lodash/isSymbol.js");module.exports=function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee(value);if(null!=current&&(void 0===computed?current==current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value}return result}},"./node_modules/lodash/_baseLt.js":module=>{module.exports=function baseLt(value,other){return value<other}},"./node_modules/lodash/_baseReduce.js":module=>{module.exports=function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,(function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)})),accumulator}},"./node_modules/lodash/_baseValues.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayMap=__webpack_require__("./node_modules/lodash/_arrayMap.js");module.exports=function baseValues(object,props){return arrayMap(props,(function(key){return object[key]}))}},"./node_modules/lodash/_createAggregator.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayAggregator=__webpack_require__("./node_modules/lodash/_arrayAggregator.js"),baseAggregator=__webpack_require__("./node_modules/lodash/_baseAggregator.js"),baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js");module.exports=function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}},"./node_modules/lodash/_defineProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getNative=__webpack_require__("./node_modules/lodash/_getNative.js"),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},"./node_modules/lodash/groupBy.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseAssignValue=__webpack_require__("./node_modules/lodash/_baseAssignValue.js"),createAggregator=__webpack_require__("./node_modules/lodash/_createAggregator.js"),hasOwnProperty=Object.prototype.hasOwnProperty,groupBy=createAggregator((function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])}));module.exports=groupBy},"./node_modules/lodash/map.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayMap=__webpack_require__("./node_modules/lodash/_arrayMap.js"),baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js"),baseMap=__webpack_require__("./node_modules/lodash/_baseMap.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js");module.exports=function map(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,baseIteratee(iteratee,3))}},"./node_modules/lodash/min.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseExtremum=__webpack_require__("./node_modules/lodash/_baseExtremum.js"),baseLt=__webpack_require__("./node_modules/lodash/_baseLt.js"),identity=__webpack_require__("./node_modules/lodash/identity.js");module.exports=function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):void 0}},"./node_modules/lodash/reduce.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayReduce=__webpack_require__("./node_modules/lodash/_arrayReduce.js"),baseEach=__webpack_require__("./node_modules/lodash/_baseEach.js"),baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js"),baseReduce=__webpack_require__("./node_modules/lodash/_baseReduce.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js");module.exports=function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,baseIteratee(iteratee,4),accumulator,initAccum,baseEach)}},"./node_modules/lodash/values.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseValues=__webpack_require__("./node_modules/lodash/_baseValues.js"),keys=__webpack_require__("./node_modules/lodash/keys.js");module.exports=function values(object){return null==object?[]:baseValues(object,keys(object))}},"./node_modules/@danskernesdigitalebibliotek/dpl-design-system/build/icons/collection/Reload.svg":module=>{module.exports="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M3.54646 9.57412C3.84043 9.35038 4.26183 9.37276 4.53031 9.64124L6.65163 11.7626L6.71875 11.8394C6.94249 12.1333 6.92012 12.5547 6.65163 12.8232L6.57483 12.8903C6.28086 13.1141 5.85946 13.0917 5.59097 12.8232L4.74978 11.9826C4.74992 11.9884 4.74998 11.9942 4.74998 12C4.74998 16.0041 7.99592 19.25 12 19.25C14.2257 19.25 16.2843 18.2417 17.6529 16.54C17.9125 16.2172 18.3846 16.166 18.7074 16.4256C19.0301 16.6851 19.0814 17.1572 18.8218 17.48C17.1714 19.5321 14.6849 20.75 12 20.75C7.16749 20.75 3.24998 16.8325 3.24998 12L3.25066 11.98L2.40899 12.8232L2.33219 12.8903C2.03822 13.1141 1.61682 13.0917 1.34833 12.8232C1.05544 12.5303 1.05544 12.0555 1.34833 11.7626L3.46965 9.64124L3.54646 9.57412ZM12 3.25C16.8325 3.25 20.75 7.16751 20.75 12L20.7487 12.018L21.591 11.1768C21.8595 10.9083 22.2809 10.8859 22.5748 11.1097L22.6516 11.1768C22.9201 11.4453 22.9425 11.8667 22.7188 12.1606L22.6516 12.2374L20.5303 14.3588C20.2618 14.6272 19.8404 14.6496 19.5465 14.4259L19.4697 14.3588L17.3483 12.2374C17.0554 11.9445 17.0554 11.4697 17.3483 11.1768C17.6168 10.9083 18.0382 10.8859 18.3322 11.1097L18.409 11.1768L19.2502 12.0184C19.2501 12.0123 19.25 12.0062 19.25 12C19.25 7.99594 16.004 4.75 12 4.75C9.76641 4.75 7.70132 5.7655 6.33308 7.4775C6.07448 7.80107 5.60253 7.85374 5.27896 7.59514C4.95539 7.33653 4.90272 6.86459 5.16132 6.54102C6.81125 4.47657 9.30556 3.25 12 3.25Z' fill='black'/%3e %3c/svg%3e"}}]);