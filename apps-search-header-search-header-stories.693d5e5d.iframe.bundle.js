(globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react=globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react||[]).push([[3271],{"./node_modules/lodash/_arrayAggregator.js":module=>{module.exports=function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}},"./node_modules/lodash/_baseAggregator.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseEach=__webpack_require__("./node_modules/lodash/_baseEach.js");module.exports=function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,(function(value,key,collection){setter(accumulator,value,iteratee(value),collection)})),accumulator}},"./node_modules/lodash/_baseAssignValue.js":(module,__unused_webpack_exports,__webpack_require__)=>{var defineProperty=__webpack_require__("./node_modules/lodash/_defineProperty.js");module.exports=function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value,writable:!0}):object[key]=value}},"./node_modules/lodash/_createAggregator.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayAggregator=__webpack_require__("./node_modules/lodash/_arrayAggregator.js"),baseAggregator=__webpack_require__("./node_modules/lodash/_baseAggregator.js"),baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js");module.exports=function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}},"./node_modules/lodash/_defineProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getNative=__webpack_require__("./node_modules/lodash/_getNative.js"),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},"./node_modules/lodash/compact.js":module=>{module.exports=function compact(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result}},"./node_modules/lodash/groupBy.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseAssignValue=__webpack_require__("./node_modules/lodash/_baseAssignValue.js"),createAggregator=__webpack_require__("./node_modules/lodash/_createAggregator.js"),hasOwnProperty=Object.prototype.hasOwnProperty,groupBy=createAggregator((function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])}));module.exports=groupBy},"./node_modules/lodash/mapValues.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseAssignValue=__webpack_require__("./node_modules/lodash/_baseAssignValue.js"),baseForOwn=__webpack_require__("./node_modules/lodash/_baseForOwn.js"),baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js");module.exports=function mapValues(object,iteratee){var result={};return iteratee=baseIteratee(iteratee,3),baseForOwn(object,(function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))})),result}},"./node_modules/lodash/uniqBy.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js"),baseUniq=__webpack_require__("./node_modules/lodash/_baseUniq.js");module.exports=function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,baseIteratee(iteratee,2)):[]}},"./node_modules/react-use/esm/misc/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{AU:()=>off,Bd:()=>isBrowser,lQ:()=>noop,on:()=>on});var noop=function(){};function on(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.addEventListener&&obj.addEventListener.apply(obj,args)}function off(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.removeEventListener&&obj.removeEventListener.apply(obj,args)}var isBrowser="undefined"!=typeof window},"./node_modules/react-use/esm/useClickAway.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_misc_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-use/esm/misc/util.js"),defaultEvents=["mousedown","touchstart"];const __WEBPACK_DEFAULT_EXPORT__=function(ref,onClickAway,events){void 0===events&&(events=defaultEvents);var savedCallback=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(onClickAway);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){savedCallback.current=onClickAway}),[onClickAway]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){for(var handler=function(event){var el=ref.current;el&&!el.contains(event.target)&&savedCallback.current(event)},_i=0,events_1=events;_i<events_1.length;_i++){var eventName=events_1[_i];(0,_misc_util__WEBPACK_IMPORTED_MODULE_1__.on)(document,eventName,handler)}return function(){for(var _i=0,events_2=events;_i<events_2.length;_i++){var eventName=events_2[_i];(0,_misc_util__WEBPACK_IMPORTED_MODULE_1__.AU)(document,eventName,handler)}}}),[events,ref])}},"./src/apps/search-header/search-header.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Search:()=>Search,default:()=>search_header_stories});var react=__webpack_require__("./node_modules/react/index.js"),story_header_dev_inc=__webpack_require__("./src/components/search-bar/story-header.dev.inc.tsx"),serviceUrlArgs=__webpack_require__("./src/core/storybook/serviceUrlArgs.ts"),utils_text=__webpack_require__("./src/core/utils/text.tsx"),url=__webpack_require__("./src/core/utils/url.tsx"),downshift_esm=__webpack_require__("./node_modules/downshift/dist/downshift.esm.js"),useClickAway=__webpack_require__("./node_modules/react-use/esm/useClickAway.js"),graphql=__webpack_require__("./src/core/dbc-gateway/generated/graphql.ts"),search_bar=__webpack_require__("./src/components/search-bar/search-bar.tsx"),clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),material_type=__webpack_require__("./src/core/utils/types/material-type.ts");const getAutosuggestCategoryList=t=>[{render:t("autosuggestBookCategoryText"),term:material_type.wP.book,facet:"materialTypesSpecific"},{render:t("autosuggestEbookCategoryText"),term:material_type.wP.ebook,facet:"materialTypesSpecific"},{render:t("autosuggestFilmCategoryText"),term:material_type.wP.movie,facet:"workTypes"},{render:t("autosuggestAudioBookCategoryText"),term:material_type.wP.audioBook,facet:"materialTypesSpecific"},{render:t("autosuggestMusicCategoryText"),term:material_type.wP.music,facet:"workTypes"},{render:t("autosuggestGameCategoryText"),term:material_type.wP.game,facet:"workTypes"},{render:t("autosuggestAnimatedSeriesCategoryText"),term:material_type.wP.animatedSeries,facet:"materialTypesSpecific"}];function determineSuggestionTerm(suggestion){var _suggestion$work;return suggestion.type===graphql.Sg.Composit?(null===(_suggestion$work=suggestion.work)||void 0===_suggestion$work?void 0:_suggestion$work.titles.main[0])||"incomplete data":suggestion.term}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const autosuggest_category=({categoryData,getItemProps,highlightedIndex,textAndMaterialDataLength,dataCy="autosuggest-category-item"})=>{const t=(0,utils_text.F)();return react.createElement(react.Fragment,null,categoryData.map(((item,incorrectIndex)=>{const index=incorrectIndex+textAndMaterialDataLength;return react.createElement("li",_extends({className:(0,clsx.A)("autosuggest__text-item text-body-medium-regular px-24",{"autosuggest__text-item--highlight":highlightedIndex===index}),key:`${item.term}-${index}`},getItemProps({item,index}),{"data-cy":dataCy}),react.createElement("p",{className:"autosuggest__text text-body-medium-regular"},`${item.term} ${t("inText")}`),react.createElement("div",{className:"boxed-text text-tags noselect ml-8"},getAutosuggestCategoryList(t)[incorrectIndex].render))})))};try{autosuggestcategory.displayName="autosuggestcategory",autosuggestcategory.__docgenInfo={description:"",displayName:"autosuggestcategory",props:{categoryData:{defaultValue:null,description:"",name:"categoryData",required:!0,type:{name:'{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }[]'}},getItemProps:{defaultValue:null,description:"",name:"getItemProps",required:!0,type:{name:'<Options>(options: UseComboboxGetItemPropsOptions<{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; };...'}},highlightedIndex:{defaultValue:null,description:"",name:"highlightedIndex",required:!0,type:{name:"number"}},textAndMaterialDataLength:{defaultValue:null,description:"",name:"textAndMaterialDataLength",required:!0,type:{name:"number"}},dataCy:{defaultValue:{value:"autosuggest-category-item"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest-category/autosuggest-category.tsx#autosuggestcategory"]={docgenInfo:autosuggestcategory.__docgenInfo,name:"autosuggestcategory",path:"src/components/autosuggest-category/autosuggest-category.tsx#autosuggestcategory"})}catch(__react_docgen_typescript_loader_error){}var cover=__webpack_require__("./src/components/cover/cover.tsx"),general=__webpack_require__("./src/core/utils/helpers/general.ts"),helper=__webpack_require__("./src/apps/material/helper.ts");function autosuggest_material_extends(){return autosuggest_material_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},autosuggest_material_extends.apply(null,arguments)}const autosuggest_material=({materialData,getItemProps,highlightedIndex,textDataLength,dataCy="autosuggest-material-item"})=>{const t=(0,utils_text.F)();return react.createElement(react.Fragment,null,materialData.map(((item,incorrectIndex)=>{const index=incorrectIndex+textDataLength,{work}=item;if(!work)return null;const{workId,titles,creators,manifestations:{all:allManifestations,bestRepresentation}}=work,authors=(0,general.UV)(creators),manifestationLanguageIsoCode=bestRepresentation&&(0,helper.PG)([bestRepresentation]),coverPids=(0,general.e$)(allManifestations??[]);return react.createElement("li",autosuggest_material_extends({className:(0,clsx.A)("autosuggest__material-item",{"autosuggest__material-item--two":2===materialData.length,"autosuggest__material-item--one":1===materialData.length,"autosuggest__material-item--highlight":highlightedIndex===index}),key:workId},getItemProps({item,index}),{"data-cy":dataCy}),react.createElement("div",{className:"autosuggest__material-card"},react.createElement(cover.Y,{animate:!0,size:"xSmall",ids:coverPids,bestRepresentation,shadow:"small"}),react.createElement("div",{className:"autosuggest__info"},react.createElement("div",{lang:manifestationLanguageIsoCode,className:"text-body-medium-medium autosuggest__title"},titles.main[0]),react.createElement("div",{className:"text-body-small-regular autosuggest__author"},(0,general.sP)(authors,t)))))})))};try{autosuggestmaterial.displayName="autosuggestmaterial",autosuggestmaterial.__docgenInfo={description:"",displayName:"autosuggestmaterial",props:{materialData:{defaultValue:null,description:"",name:"materialData",required:!0,type:{name:'[] | { __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }[]'}},getItemProps:{defaultValue:null,description:"",name:"getItemProps",required:!0,type:{name:'<Options>(options: UseComboboxGetItemPropsOptions<{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; };...'}},highlightedIndex:{defaultValue:null,description:"",name:"highlightedIndex",required:!0,type:{name:"number"}},textDataLength:{defaultValue:null,description:"",name:"textDataLength",required:!0,type:{name:"number"}},dataCy:{defaultValue:{value:"autosuggest-material-item"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest-material/autosuggest-material.tsx#autosuggestmaterial"]={docgenInfo:autosuggestmaterial.__docgenInfo,name:"autosuggestmaterial",path:"src/components/autosuggest-material/autosuggest-material.tsx#autosuggestmaterial"})}catch(__react_docgen_typescript_loader_error){}function autosuggest_text_item_extends(){return autosuggest_text_item_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},autosuggest_text_item_extends.apply(null,arguments)}const autosuggest_text_item=({classes,item,index,generateItemId,getItemProps,dataCy="autosuggest-text-item"})=>{var _item$work,_item$work2;const isoLang=(null===(_item$work=item.work)||void 0===_item$work?void 0:_item$work.manifestations.bestRepresentation)&&(0,helper.PG)([item.work.manifestations.bestRepresentation]),t=(0,utils_text.F)();return react.createElement(react.Fragment,null,react.createElement("li",autosuggest_text_item_extends({className:classes.textSuggestion,key:generateItemId(item)},getItemProps({item,index}),{"data-cy":dataCy,lang:isoLang}),react.createElement("p",{className:"autosuggest__text text-body-medium-regular"},item.type===graphql.Sg.Creator?`${item.term} (${t("stringSuggestionAuthorText")})`:null,item.type===graphql.Sg.Subject?`${item.term} (${t("stringSuggestionTopicText")})`:null,item.type===graphql.Sg.Composit?`${null===(_item$work2=item.work)||void 0===_item$work2?void 0:_item$work2.titles.main} (${t("stringSuggestionWorkText")})`:null,item.type===graphql.Sg.Title?`${item.term} (${t("stringSuggestionWorkText")})`:null)))};try{autosuggesttextitem.displayName="autosuggesttextitem",autosuggesttextitem.__docgenInfo={description:"",displayName:"autosuggesttextitem",props:{classes:{defaultValue:null,description:"",name:"classes",required:!0,type:{name:"{ textSuggestion: string; }"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:'{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }'}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},generateItemId:{defaultValue:null,description:"",name:"generateItemId",required:!0,type:{name:'(objectItem: { __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }) => string'}},getItemProps:{defaultValue:null,description:"",name:"getItemProps",required:!0,type:{name:'<Options>(options: UseComboboxGetItemPropsOptions<{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; };...'}},dataCy:{defaultValue:{value:"autosuggest-text-item"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest-text/autosuggest-text-item.tsx#autosuggesttextitem"]={docgenInfo:autosuggesttextitem.__docgenInfo,name:"autosuggesttextitem",path:"src/components/autosuggest-text/autosuggest-text-item.tsx#autosuggesttextitem"})}catch(__react_docgen_typescript_loader_error){}function itemToString(objectItem){var _objectItem$work;return objectItem.type===graphql.Sg.Composit?(null===(_objectItem$work=objectItem.work)||void 0===_objectItem$work?void 0:_objectItem$work.titles.main[0])||"incomplete data":objectItem.term}function generateItemId(objectItem){return`${objectItem.__typename}-${itemToString(objectItem)}-${Math.random().toString(36)}`.replace(/\s+/g,"-")}const AutosuggestText=({textData,highlightedIndex,getItemProps})=>react.createElement(react.Fragment,null,textData.map(((item,index)=>{const classes={textSuggestion:(0,clsx.A)("autosuggest__text-item text-body-medium-regular px-24",{"autosuggest__text-item--highlight":highlightedIndex===index})};return react.createElement(autosuggest_text_item,{key:index,classes,item,index,generateItemId,getItemProps})})));try{itemToString.displayName="itemToString",itemToString.__docgenInfo={description:"",displayName:"itemToString",props:{__typename:{defaultValue:null,description:"",name:"__typename",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"Suggestion"'}]}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"COMPOSIT"'},{value:'"CREATOR"'},{value:'"SUBJECT"'},{value:'"TITLE"'}]}},term:{defaultValue:null,description:"",name:"term",required:!0,type:{name:"string"}},work:{defaultValue:null,description:"",name:"work",required:!1,type:{name:'{ __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ __typename?: "Corporation" | undefined; display: string; } | { ...; })[]; manifestations: { ...; }; } | null | undefined'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest-text/autosuggest-text.tsx#itemToString"]={docgenInfo:itemToString.__docgenInfo,name:"itemToString",path:"src/components/autosuggest-text/autosuggest-text.tsx#itemToString"})}catch(__react_docgen_typescript_loader_error){}try{generateItemId.displayName="generateItemId",generateItemId.__docgenInfo={description:"",displayName:"generateItemId",props:{__typename:{defaultValue:null,description:"",name:"__typename",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"Suggestion"'}]}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"COMPOSIT"'},{value:'"CREATOR"'},{value:'"SUBJECT"'},{value:'"TITLE"'}]}},term:{defaultValue:null,description:"",name:"term",required:!0,type:{name:"string"}},work:{defaultValue:null,description:"",name:"work",required:!1,type:{name:'{ __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ __typename?: "Corporation" | undefined; display: string; } | { ...; })[]; manifestations: { ...; }; } | null | undefined'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest-text/autosuggest-text.tsx#generateItemId"]={docgenInfo:generateItemId.__docgenInfo,name:"generateItemId",path:"src/components/autosuggest-text/autosuggest-text.tsx#generateItemId"})}catch(__react_docgen_typescript_loader_error){}try{AutosuggestText.displayName="AutosuggestText",AutosuggestText.__docgenInfo={description:"",displayName:"AutosuggestText",props:{textData:{defaultValue:null,description:"",name:"textData",required:!0,type:{name:'{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }[]'}},highlightedIndex:{defaultValue:null,description:"",name:"highlightedIndex",required:!0,type:{name:"number"}},getItemProps:{defaultValue:null,description:"",name:"getItemProps",required:!0,type:{name:'<Options>(options: UseComboboxGetItemPropsOptions<{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; };...'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest-text/autosuggest-text.tsx#AutosuggestText"]={docgenInfo:AutosuggestText.__docgenInfo,name:"AutosuggestText",path:"src/components/autosuggest-text/autosuggest-text.tsx#AutosuggestText"})}catch(__react_docgen_typescript_loader_error){}try{autosuggesttext.displayName="autosuggesttext",autosuggesttext.__docgenInfo={description:"",displayName:"autosuggesttext",props:{textData:{defaultValue:null,description:"",name:"textData",required:!0,type:{name:'{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }[]'}},highlightedIndex:{defaultValue:null,description:"",name:"highlightedIndex",required:!0,type:{name:"number"}},getItemProps:{defaultValue:null,description:"",name:"getItemProps",required:!0,type:{name:'<Options>(options: UseComboboxGetItemPropsOptions<{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; };...'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest-text/autosuggest-text.tsx#autosuggesttext"]={docgenInfo:autosuggesttext.__docgenInfo,name:"autosuggesttext",path:"src/components/autosuggest-text/autosuggest-text.tsx#autosuggesttext"})}catch(__react_docgen_typescript_loader_error){}function autosuggest_extends(){return autosuggest_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},autosuggest_extends.apply(null,arguments)}const Autosuggest=({textData,materialData,getMenuProps,highlightedIndex,getItemProps,isOpen,categoryData,isLoading,dataCy="autosuggest"})=>{const t=(0,utils_text.F)();return isLoading&&!textData?react.createElement("ul",{className:"autosuggest pb-16","data-cy":dataCy},react.createElement("li",{className:"ml-24"},t("loadingText"))):react.createElement(react.Fragment,null,react.createElement("ul",autosuggest_extends({className:"autosuggest pb-16"},getMenuProps(),{style:isOpen?{}:{display:"none"},"data-cy":dataCy}),react.createElement(AutosuggestText,{textData,highlightedIndex,getItemProps}),materialData.length>0&&react.createElement(autosuggest_material,{materialData,getItemProps,highlightedIndex,textDataLength:textData.length}),categoryData&&categoryData.length>0&&react.createElement(autosuggest_category,{categoryData,getItemProps,highlightedIndex,textAndMaterialDataLength:textData.length+materialData.length})))};try{Autosuggest.displayName="Autosuggest",Autosuggest.__docgenInfo={description:"",displayName:"Autosuggest",props:{textData:{defaultValue:null,description:"",name:"textData",required:!0,type:{name:'{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }[]'}},materialData:{defaultValue:null,description:"",name:"materialData",required:!0,type:{name:'{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }[]'}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"string"}},getMenuProps:{defaultValue:null,description:"",name:"getMenuProps",required:!0,type:{name:"<Options>(options?: (UseComboboxGetMenuPropsOptions & Options) | undefined, otherOptions?: GetPropsCommonOptions | undefined) => Overwrite<...>"}},highlightedIndex:{defaultValue:null,description:"",name:"highlightedIndex",required:!0,type:{name:"number"}},getItemProps:{defaultValue:null,description:"",name:"getItemProps",required:!0,type:{name:'<Options>(options: UseComboboxGetItemPropsOptions<{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; };...'}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},categoryData:{defaultValue:null,description:"",name:"categoryData",required:!1,type:{name:'{ __typename?: "Suggestion" | undefined; type: SuggestionTypeEnum; term: string; work?: { __typename?: "Work" | undefined; workId: string; titles: { __typename?: "WorkTitles" | undefined; main: string[]; }; creators: ({ ...; } | { ...; })[]; manifestations: { ...; }; } | null | undefined; }[] | undefined'}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},dataCy:{defaultValue:{value:"autosuggest"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/autosuggest/autosuggest.tsx#Autosuggest"]={docgenInfo:Autosuggest.__docgenInfo,name:"Autosuggest",path:"src/components/autosuggest/autosuggest.tsx#Autosuggest"})}catch(__react_docgen_typescript_loader_error){}var helpers_url=__webpack_require__("./src/core/utils/helpers/url.ts"),useStatistics=__webpack_require__("./src/core/statistics/useStatistics.ts"),statistics=__webpack_require__("./src/core/statistics/statistics.ts");const HeaderDropdown=({redirectTo,setIsHeaderDropdownOpen,headerDropdownRef,advancedSearchUrl})=>{const t=(0,utils_text.F)();return react.createElement("div",{className:"header__menu-dropdown","data-cy":"search-header-dropdown"},react.createElement("ul",{role:"menu"},react.createElement("li",{role:"presentation"},react.createElement("a",{ref:headerDropdownRef,role:"menuitem",className:"header__menu-dropdown-item hide-linkstyle",href:String(advancedSearchUrl),onClick:e=>{e.preventDefault(),redirectTo(advancedSearchUrl)},onKeyUp:e=>"Enter"===e.key?(e.preventDefault(),redirectTo(advancedSearchUrl)):"ArrowDown"===e.key||"ArrowUp"===e.key||"Escape"===e.key?setIsHeaderDropdownOpen(!1):null,onBlur:()=>setIsHeaderDropdownOpen(!1)},t("headerDropdownItemAdvancedSearchText")))))},header_dropdown_HeaderDropdown=HeaderDropdown;try{HeaderDropdown.displayName="HeaderDropdown",HeaderDropdown.__docgenInfo={description:"",displayName:"HeaderDropdown",props:{redirectTo:{defaultValue:null,description:"",name:"redirectTo",required:!0,type:{name:"(url: URL) => void"}},setIsHeaderDropdownOpen:{defaultValue:null,description:"",name:"setIsHeaderDropdownOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},headerDropdownRef:{defaultValue:null,description:"",name:"headerDropdownRef",required:!0,type:{name:"RefObject<HTMLAnchorElement | null>"}},advancedSearchUrl:{defaultValue:null,description:"",name:"advancedSearchUrl",required:!0,type:{name:"URL"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/header-dropdown/HeaderDropdown.tsx#HeaderDropdown"]={docgenInfo:HeaderDropdown.__docgenInfo,name:"HeaderDropdown",path:"src/components/header-dropdown/HeaderDropdown.tsx#HeaderDropdown"})}catch(__react_docgen_typescript_loader_error){}var useFilterHandler=__webpack_require__("./src/apps/search-result/useFilterHandler.tsx");const search_header=()=>{const t=(0,utils_text.F)(),u=(0,url.Ik)(),searchUrl=u("searchUrl"),materialUrl=u("materialUrl"),advancedSearchUrl=u("advancedSearchUrl"),[q,setQ]=(0,react.useState)(""),[qWithoutQuery,setQWithoutQuery]=(0,react.useState)(q),[suggestItems,setSuggestItems]=(0,react.useState)([]),[currentlySelectedItem,setCurrentlySelectedItem]=(0,react.useState)(""),[isAutosuggestOpen,setIsAutosuggestOpen]=(0,react.useState)(!1),{clearFilter}=(0,useFilterHandler.A)(),{data,isLoading,status}=(0,graphql.Yu)({q},{enabled:q.length>=3}),[isHeaderDropdownOpen,setIsHeaderDropdownOpen]=(0,react.useState)(!1),[highlightedIndexAfterClick,setHighlightedIndexAfterClick]=(0,react.useState)(null),{track}=(0,useStatistics.Jx)();(0,react.useEffect)((()=>{if(data){const arrayOfResults=data.suggest.result;setSuggestItems(arrayOfResults)}}),[data]);const originalData=suggestItems,textData=[],materialData=[],categoryData=[];let nonWorkSuggestion,orderedData=[];originalData&&(nonWorkSuggestion=function findNonWorkSuggestion(originalData){return originalData.find((item=>item.type!==graphql.Sg.Title&&item.type!==graphql.Sg.Composit))}(originalData),originalData.forEach((item=>{(item.type===graphql.Sg.Composit||item.type===graphql.Sg.Title)&&item.work&&materialData.length<3?materialData.push(item):textData.push(item)})),orderedData=textData.concat(materialData),nonWorkSuggestion&&(getAutosuggestCategoryList(t).forEach((()=>{categoryData.push(nonWorkSuggestion)})),orderedData=orderedData.concat(categoryData))),(0,react.useEffect)((()=>{data&&data.suggest.result.length>0?setIsAutosuggestOpen(!0):setIsAutosuggestOpen(!1)}),[data]),(0,react.useEffect)((()=>{qWithoutQuery.length>2?setIsAutosuggestOpen(!0):setIsAutosuggestOpen(!1)}),[qWithoutQuery]);const{getMenuProps,highlightedIndex,getItemProps,getInputProps,getLabelProps}=(0,downshift_esm.Bp)({isOpen:isAutosuggestOpen,items:orderedData,inputValue:qWithoutQuery,defaultIsOpen:!1,onInputValueChange:function handleInputValueChange(changes){var _selectedItem$work;const{inputValue,selectedItem,type}=changes;if(void 0!==inputValue){if(type===downshift_esm.Bp.stateChangeTypes.InputChange)return setQ(inputValue),void setQWithoutQuery(inputValue);if(setQWithoutQuery(inputValue),selectedItem&&(type===downshift_esm.Bp.stateChangeTypes.ItemClick||type===downshift_esm.Bp.stateChangeTypes.InputKeyDownEnter))if(null!==(_selectedItem$work=selectedItem.work)&&void 0!==_selectedItem$work&&_selectedItem$work.workId&&function isDisplayedAsWorkSuggestion(selectedItem,currentMaterialData){const dataWithWorkId=currentMaterialData.filter((item=>{var _item$work;return(null===(_item$work=item.work)||void 0===_item$work?void 0:_item$work.workId)===(null==selectedItem?void 0:selectedItem.workId)}));return Boolean(dataWithWorkId.length)}(selectedItem.work,materialData))track("click",{id:statistics.o.autosuggestClick.id,name:statistics.o.autosuggestClick.name,trackedData:selectedItem.work.titles.main.join(", ")}).then((()=>{var _selectedItem$work2;clearFilter(),(0,helpers_url.SE)((0,helpers_url.Qj)(materialUrl,null===(_selectedItem$work2=selectedItem.work)||void 0===_selectedItem$work2?void 0:_selectedItem$work2.workId))}));else if(nonWorkSuggestion&&changes.selectedItem&&nonWorkSuggestion.term===changes.selectedItem.term&&highlightedIndexAfterClick&&highlightedIndexAfterClick>=textData.concat(materialData).length){const highlightedCategoryIndex=highlightedIndexAfterClick-(textData.length+materialData.length),selectedItemString=determineSuggestionTerm(changes.selectedItem);track("click",{id:statistics.o.autosuggestClick.id,name:statistics.o.autosuggestClick.name,trackedData:selectedItemString}).then((()=>{const{term,facet}=getAutosuggestCategoryList(t)[highlightedCategoryIndex];clearFilter(),(0,helpers_url.SE)((0,helpers_url.fN)({searchUrl,selectedItemString,filter:{[facet]:term}}))}))}else track("click",{id:statistics.o.autosuggestClick.id,name:statistics.o.autosuggestClick.name,trackedData:determineSuggestionTerm(selectedItem)}).then((()=>{clearFilter(),(0,helpers_url.SE)((0,helpers_url.zy)(searchUrl,determineSuggestionTerm(selectedItem)))}))}},onSelectedItemChange:function handleSelectedItemChange(changes){const{selectedItem}=changes;selectedItem&&setCurrentlySelectedItem(determineSuggestionTerm(selectedItem))},selectedItem:currentlySelectedItem,onHighlightedIndexChange:function handleHighlightedIndexChange(changes){const{type}=changes;let{highlightedIndex}=changes;if(type===downshift_esm.Bp.stateChangeTypes.MenuMouseLeave)return;if(type===downshift_esm.Bp.stateChangeTypes.ItemMouseMove)return void(void 0!==highlightedIndex&&highlightedIndex>-1&&setHighlightedIndexAfterClick(highlightedIndex));if(type!==downshift_esm.Bp.stateChangeTypes.InputKeyDownArrowDown&&type!==downshift_esm.Bp.stateChangeTypes.InputKeyDownArrowUp&&type!==downshift_esm.Bp.stateChangeTypes.InputKeyDownEnter||void 0!==highlightedIndex&&highlightedIndex>-1&&setHighlightedIndexAfterClick(highlightedIndex),highlightedIndex&&highlightedIndex<0)return void setIsAutosuggestOpen(!1);highlightedIndex||(highlightedIndex=0);const currentItemValue=determineSuggestionTerm(orderedData[highlightedIndex]);type!==downshift_esm.Bp.stateChangeTypes.InputKeyDownArrowDown&&type!==downshift_esm.Bp.stateChangeTypes.InputKeyDownArrowUp?setQ(currentItemValue):setQWithoutQuery(currentItemValue)}}),headerDropdownRef=react.useRef(null);(0,useClickAway.A)(headerDropdownRef,(()=>{setTimeout((()=>{setIsHeaderDropdownOpen(!1)}),100)}));const[redirectUrl,setRedirectUrl]=(0,react.useState)((0,helpers_url.zy)(searchUrl,q));return(0,react.useEffect)((()=>{'"'===q.trim().charAt(0)&&'"'===q.trim().charAt(q.length-1)&&'""'!==q.trim()&&'"'!==q.trim()?setRedirectUrl((0,helpers_url.x4)(advancedSearchUrl,q)):setRedirectUrl((0,helpers_url.zy)(searchUrl,q))}),[q,advancedSearchUrl,searchUrl]),react.createElement("div",{className:"header__menu-second"},react.createElement("div",{className:"header__menu-search"},react.createElement(search_bar.A,{q,getInputProps,getLabelProps,qWithoutQuery,setQWithoutQuery,isHeaderDropdownOpen,setIsHeaderDropdownOpen,redirectUrl}),react.createElement(Autosuggest,{textData,materialData,categoryData,status,getMenuProps,highlightedIndex,getItemProps,isOpen:isAutosuggestOpen,isLoading}),isHeaderDropdownOpen&&react.createElement(header_dropdown_HeaderDropdown,{redirectTo:helpers_url.SE,setIsHeaderDropdownOpen,headerDropdownRef,advancedSearchUrl})))};try{searchheader.displayName="searchheader",searchheader.__docgenInfo={description:"",displayName:"searchheader",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/search-header/search-header.tsx#searchheader"]={docgenInfo:searchheader.__docgenInfo,name:"searchheader",path:"src/apps/search-header/search-header.tsx#searchheader"})}catch(__react_docgen_typescript_loader_error){}const search_header_entry=(0,url.nU)((0,utils_text.i)((()=>react.createElement(search_header,null))));try{searchheaderentry.displayName="searchheaderentry",searchheaderentry.__docgenInfo={description:"",displayName:"searchheaderentry",props:{searchHeaderIconAltText:{defaultValue:null,description:"",name:"searchHeaderIconAltText",required:!1,type:{name:"string | undefined"}},searchHeaderInputLabelText:{defaultValue:null,description:"",name:"searchHeaderInputLabelText",required:!1,type:{name:"string | undefined"}},inputPlaceholderText:{defaultValue:null,description:"",name:"inputPlaceholderText",required:!1,type:{name:"string | undefined"}},stringSuggestionAuthorText:{defaultValue:null,description:"",name:"stringSuggestionAuthorText",required:!1,type:{name:"string | undefined"}},stringSuggestionWorkText:{defaultValue:null,description:"",name:"stringSuggestionWorkText",required:!1,type:{name:"string | undefined"}},stringSuggestionTopicText:{defaultValue:null,description:"",name:"stringSuggestionTopicText",required:!1,type:{name:"string | undefined"}},searchHeaderDropdownText:{defaultValue:null,description:"",name:"searchHeaderDropdownText",required:!0,type:{name:"string"}},etAlText:{defaultValue:null,description:"",name:"etAlText",required:!0,type:{name:"string"}},autosuggestBookCategoryText:{defaultValue:null,description:"",name:"autosuggestBookCategoryText",required:!0,type:{name:"string"}},autosuggestEbookCategoryText:{defaultValue:null,description:"",name:"autosuggestEbookCategoryText",required:!0,type:{name:"string"}},autosuggestFilmCategoryText:{defaultValue:null,description:"",name:"autosuggestFilmCategoryText",required:!0,type:{name:"string"}},autosuggestAudioBookCategoryText:{defaultValue:null,description:"",name:"autosuggestAudioBookCategoryText",required:!0,type:{name:"string"}},autosuggestMusicCategoryText:{defaultValue:null,description:"",name:"autosuggestMusicCategoryText",required:!0,type:{name:"string"}},autosuggestGameCategoryText:{defaultValue:null,description:"",name:"autosuggestGameCategoryText",required:!0,type:{name:"string"}},autosuggestAnimatedSeriesCategoryText:{defaultValue:null,description:"",name:"autosuggestAnimatedSeriesCategoryText",required:!0,type:{name:"string"}},inText:{defaultValue:null,description:"",name:"inText",required:!0,type:{name:"string"}},loadingText:{defaultValue:null,description:"",name:"loadingText",required:!0,type:{name:"string"}},searchNoValidCharactersErrorText:{defaultValue:null,description:"",name:"searchNoValidCharactersErrorText",required:!0,type:{name:"string"}},headerDropdownItemAdvancedSearchText:{defaultValue:null,description:"",name:"headerDropdownItemAdvancedSearchText",required:!0,type:{name:"string"}},alertErrorCloseText:{defaultValue:null,description:"",name:"alertErrorCloseText",required:!0,type:{name:"string"}},alertErrorMessageText:{defaultValue:null,description:"",name:"alertErrorMessageText",required:!0,type:{name:"string"}},multiselectAllOptionText:{defaultValue:null,description:"",name:"multiselectAllOptionText",required:!0,type:{name:"string"}},groupModalGoToMaterialAriaLabelText:{defaultValue:null,description:"",name:"groupModalGoToMaterialAriaLabelText",required:!0,type:{name:"string"}},availabilityAvailableText:{defaultValue:null,description:"",name:"availabilityAvailableText",required:!0,type:{name:"string"}},availabilityUnavailableText:{defaultValue:null,description:"",name:"availabilityUnavailableText",required:!0,type:{name:"string"}},loansNotOverdueText:{defaultValue:null,description:"",name:"loansNotOverdueText",required:!0,type:{name:"string"}},patronContactInfoBodyText:{defaultValue:null,description:"",name:"patronContactInfoBodyText",required:!0,type:{name:"string"}},pauseReservationModalBelowInputsText:{defaultValue:null,description:"",name:"pauseReservationModalBelowInputsText",required:!0,type:{name:"string"}},materialDetailsCloseModalAriaLabelText:{defaultValue:null,description:"",name:"materialDetailsCloseModalAriaLabelText",required:!0,type:{name:"string"}},findOnShelfExpandButtonExplanationText:{defaultValue:null,description:"",name:"findOnShelfExpandButtonExplanationText",required:!0,type:{name:"string"}},reservationsStillInQueueForText:{defaultValue:null,description:"",name:"reservationsStillInQueueForText",required:!0,type:{name:"string"}},materialDetailsModalAriaDescriptionText:{defaultValue:null,description:"",name:"materialDetailsModalAriaDescriptionText",required:!0,type:{name:"string"}},changePickupLocationText:{defaultValue:null,description:"",name:"changePickupLocationText",required:!0,type:{name:"string"}},changeInterestPeriodText:{defaultValue:null,description:"",name:"changeInterestPeriodText",required:!0,type:{name:"string"}},modalReservationFormPickupLabelText:{defaultValue:null,description:"",name:"modalReservationFormPickupLabelText",required:!0,type:{name:"string"}},screenReaderModalDescriptionPickupText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionPickupText",required:!0,type:{name:"string"}},closeModalAriaLabelPickupText:{defaultValue:null,description:"",name:"closeModalAriaLabelPickupText",required:!0,type:{name:"string"}},modalReservationFormNoInterestAfterHeaderTitleText:{defaultValue:null,description:"",name:"modalReservationFormNoInterestAfterHeaderTitleText",required:!0,type:{name:"string"}},modalReservationFormNoInterestAfterHeaderDescriptionText:{defaultValue:null,description:"",name:"modalReservationFormNoInterestAfterHeaderDescriptionText",required:!0,type:{name:"string"}},modalReservationFormNoInterestAfterLabelText:{defaultValue:null,description:"",name:"modalReservationFormNoInterestAfterLabelText",required:!0,type:{name:"string"}},screenReaderModalDescriptionEmailText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionEmailText",required:!0,type:{name:"string"}},screenReaderModalDescriptionInterestPeriodText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionInterestPeriodText",required:!0,type:{name:"string"}},screenReaderModalDescriptionSmsText:{defaultValue:null,description:"",name:"screenReaderModalDescriptionSmsText",required:!0,type:{name:"string"}},closeModalAriaLabelEmailText:{defaultValue:null,description:"",name:"closeModalAriaLabelEmailText",required:!0,type:{name:"string"}},closeModalAriaLabelInterestPeriodText:{defaultValue:null,description:"",name:"closeModalAriaLabelInterestPeriodText",required:!0,type:{name:"string"}},closeModalAriaLabelSmsText:{defaultValue:null,description:"",name:"closeModalAriaLabelSmsText",required:!0,type:{name:"string"}},deleteReservationModalButtonText:{defaultValue:null,description:"",name:"deleteReservationModalButtonText",required:!0,type:{name:"string"}},pauseReservationModalAriaDescriptionText:{defaultValue:null,description:"",name:"pauseReservationModalAriaDescriptionText",required:!0,type:{name:"string"}},acceptModalAriaDescriptionText:{defaultValue:null,description:"",name:"acceptModalAriaDescriptionText",required:!0,type:{name:"string"}},addToFavoritesAriaLabelText:{defaultValue:null,description:"",name:"addToFavoritesAriaLabelText",required:!0,type:{name:"string"}},removeFromFavoritesAriaLabelText:{defaultValue:null,description:"",name:"removeFromFavoritesAriaLabelText",required:!0,type:{name:"string"}},acceptModalAriaLabelText:{defaultValue:null,description:"",name:"acceptModalAriaLabelText",required:!0,type:{name:"string"}},acceptModalHeaderText:{defaultValue:null,description:"",name:"acceptModalHeaderText",required:!0,type:{name:"string"}},acceptModalAreYouSureText:{defaultValue:null,description:"",name:"acceptModalAreYouSureText",required:!0,type:{name:"string"}},acceptModalBodyText:{defaultValue:null,description:"",name:"acceptModalBodyText",required:!0,type:{name:"string"}},acceptModalCancelButtonText:{defaultValue:null,description:"",name:"acceptModalCancelButtonText",required:!0,type:{name:"string"}},acceptModalAcceptButtonText:{defaultValue:null,description:"",name:"acceptModalAcceptButtonText",required:!0,type:{name:"string"}},isLoadingHeartText:{defaultValue:null,description:"",name:"isLoadingHeartText",required:!0,type:{name:"string"}},reservationPickUpLatestText:{defaultValue:null,description:"",name:"reservationPickUpLatestText",required:!0,type:{name:"string"}},reservationListReadyText:{defaultValue:null,description:"",name:"reservationListReadyText",required:!0,type:{name:"string"}},reservationListDigitalPickupText:{defaultValue:null,description:"",name:"reservationListDigitalPickupText",required:!0,type:{name:"string"}},pincodeSectionDescriptionText:{defaultValue:null,description:"",name:"pincodeSectionDescriptionText",required:!0,type:{name:"string"}},errorBoundaryAlertBodyButtonAriaText:{defaultValue:null,description:"",name:"errorBoundaryAlertBodyButtonAriaText",required:!0,type:{name:"string"}},buttonText:{defaultValue:null,description:"",name:"buttonText",required:!0,type:{name:"string"}},errorMessagesConfig:{defaultValue:null,description:"",name:"errorMessagesConfig",required:!0,type:{name:"string"}},materialUrl:{defaultValue:null,description:"",name:"materialUrl",required:!0,type:{name:"string"}},searchUrl:{defaultValue:null,description:"",name:"searchUrl",required:!0,type:{name:"string"}},advancedSearchUrl:{defaultValue:null,description:"",name:"advancedSearchUrl",required:!0,type:{name:"string"}},fbsBaseUrl:{defaultValue:null,description:"",name:"fbsBaseUrl",required:!0,type:{name:"string"}},feesPageUrl:{defaultValue:null,description:"",name:"feesPageUrl",required:!0,type:{name:"string"}},publizonBaseUrl:{defaultValue:null,description:"",name:"publizonBaseUrl",required:!0,type:{name:"string"}},dplCmsBaseUrl:{defaultValue:null,description:"",name:"dplCmsBaseUrl",required:!0,type:{name:"string"}},coverBaseUrl:{defaultValue:null,description:"",name:"coverBaseUrl",required:!0,type:{name:"string"}},materialBaseUrl:{defaultValue:null,description:"",name:"materialBaseUrl",required:!0,type:{name:"string"}},fbiBaseUrl:{defaultValue:null,description:"",name:"fbiBaseUrl",required:!0,type:{name:"string"}},fbiLocalBaseUrl:{defaultValue:null,description:"",name:"fbiLocalBaseUrl",required:!0,type:{name:"string"}},fbiGlobalBaseUrl:{defaultValue:null,description:"",name:"fbiGlobalBaseUrl",required:!0,type:{name:"string"}},authUrl:{defaultValue:null,description:"",name:"authUrl",required:!0,type:{name:"string"}},materialListBaseUrl:{defaultValue:null,description:"",name:"materialListBaseUrl",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/search-header/search-header.entry.tsx#searchheaderentry"]={docgenInfo:searchheaderentry.__docgenInfo,name:"searchheaderentry",path:"src/apps/search-header/search-header.entry.tsx#searchheaderentry"})}catch(__react_docgen_typescript_loader_error){}var globalTextArgs=__webpack_require__("./src/core/storybook/globalTextArgs.ts"),globalConfigArgs=__webpack_require__("./src/core/storybook/globalConfigArgs.ts");const search_header_stories={title:"Apps / Header",component:search_header_entry,argTypes:{...serviceUrlArgs.U,...globalTextArgs.U,...globalConfigArgs.U,etAlText:{description:"Et al. Text",control:{type:"text"}},searchHeaderIconAltText:{description:"Alt text for search button image",control:{type:"text"}},searchHeaderInputLabelText:{description:"Search header input label",control:{type:"text"}},inputPlaceholderText:{description:"Input field placeholder",control:{type:"text"}},stringSuggestionAuthorText:{description:"String suggestion spec - author",control:{type:"text"}},stringSuggestionWorkText:{description:"String suggestion spec - work",control:{type:"text"}},stringSuggestionTopicText:{description:"String suggestion spec - topic",control:{type:"text"}},searchUrl:{description:"Base search url",control:{type:"text"}},advancedSearchUrl:{description:"Advanced search url",control:{type:"text"}},searchHeaderDropdownText:{description:"Search header advanced search icon label",control:{type:"text"}},materialUrl:{description:"Base material page url",control:{type:"text"}},autosuggestBookCategoryText:{description:"Book category",control:{type:"text"}},autosuggestEbookCategoryText:{description:"Ebook category",control:{type:"text"}},autosuggestFilmCategoryText:{description:"Movie category",control:{type:"text"}},autosuggestAudioBookCategoryText:{description:"Audio book category",control:{type:"text"}},autosuggestMusicCategoryText:{description:"Music category",control:{type:"text"}},autosuggestGameCategoryText:{description:"Game category",control:{type:"text"}},autosuggestAnimatedSeriesCategoryText:{description:"Animated series category",control:{type:"text"}},inText:{description:"x 'in' y",control:{type:"text"}},loadingText:{description:"Loading",control:{type:"text"}},searchNoValidCharactersErrorText:{description:"Search non-whitespace character error",control:{type:"text"}},headerDropdownItemAdvancedSearchText:{description:"Advanced search menu text",control:{type:"text"}}}},Search={args:{...serviceUrlArgs.A,...globalTextArgs.A,...globalConfigArgs.A,etAlText:"et al.",searchHeaderIconAltText:"search icon",searchHeaderInputLabelText:"The main search field.",inputPlaceholderText:"Search among the library's materials",stringSuggestionAuthorText:"author",stringSuggestionWorkText:"material",stringSuggestionTopicText:"topic",searchUrl:"/search",advancedSearchUrl:"/advanced-search",searchHeaderDropdownText:"Dropdown with additional search functions",materialUrl:"/work/:workid",autosuggestBookCategoryText:"Books",autosuggestEbookCategoryText:"E-books",autosuggestFilmCategoryText:"Movies",autosuggestAudioBookCategoryText:"Audio books",autosuggestMusicCategoryText:"Music",autosuggestGameCategoryText:"Games",autosuggestAnimatedSeriesCategoryText:"Animated series",inText:"in",loadingText:"Loading",searchNoValidCharactersErrorText:"Input must contain at least one non-whitespace character.",headerDropdownItemAdvancedSearchText:"Advanced search"},render:args=>react.createElement(story_header_dev_inc.A,{search:react.createElement(search_header_entry,args)})};Search.parameters={...Search.parameters,docs:{...Search.parameters?.docs,source:{originalSource:'{\n  args: {\n    ...serviceUrlArgs,\n    ...globalTextArgs,\n    ...globalConfigArgs,\n    etAlText: "et al.",\n    searchHeaderIconAltText: "search icon",\n    searchHeaderInputLabelText: "The main search field.",\n    inputPlaceholderText: "Search among the library\'s materials",\n    stringSuggestionAuthorText: "author",\n    stringSuggestionWorkText: "material",\n    stringSuggestionTopicText: "topic",\n    searchUrl: "/search",\n    advancedSearchUrl: "/advanced-search",\n    searchHeaderDropdownText: "Dropdown with additional search functions",\n    materialUrl: "/work/:workid",\n    autosuggestBookCategoryText: "Books",\n    autosuggestEbookCategoryText: "E-books",\n    autosuggestFilmCategoryText: "Movies",\n    autosuggestAudioBookCategoryText: "Audio books",\n    autosuggestMusicCategoryText: "Music",\n    autosuggestGameCategoryText: "Games",\n    autosuggestAnimatedSeriesCategoryText: "Animated series",\n    inText: "in",\n    loadingText: "Loading",\n    searchNoValidCharactersErrorText: "Input must contain at least one non-whitespace character.",\n    headerDropdownItemAdvancedSearchText: "Advanced search"\n  },\n  // We use the Header component as context to the search bar.\n  // It is the Header that creates the Search bar\'s design -\n  // - without it, the Search bar loses its shape.\n  render: (args: SearchHeaderEntryProps) => <StoryHeader search={<SearchHeaderEntry {...args} />} />\n}',...Search.parameters?.docs?.source}}}},"./src/apps/search-result/helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z4:()=>getFirstMaterialTypeFromFilters,z2:()=>mapFacetToFilter});var lodash_head__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/head.js"),lodash_head__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_head__WEBPACK_IMPORTED_MODULE_0__),_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/utils/helpers/general.ts"),_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/dbc-gateway/generated/graphql.ts");const mapFacetToFilter=facet=>{switch(facet){case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_2__.DX.Materialtypesspecific:return"materialTypesSpecific";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_2__.DX.Worktypes:return"workTypes";default:return"invalid"}},getFirstMaterialTypeFromFilters=(filters,manifestations)=>{const materialTypeFilter=lodash_head__WEBPACK_IMPORTED_MODULE_0___default()(Object.keys(filters[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_2__.DX.Materialtypesspecific]||{}).sort()),allMaterialTypes=(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__.JB)(manifestations);return materialTypeFilter&&allMaterialTypes.includes(materialTypeFilter)?materialTypeFilter:void 0}},"./src/apps/search-result/useFilterHandler.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-redux/dist/react-redux.mjs"),_core_filter_slice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/filter.slice.ts"),_core_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/store.ts"),_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/core/utils/helpers/url.ts"),_helper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/apps/search-result/helper.ts"),_core_statistics_useStatistics__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/statistics/useStatistics.ts"),_core_statistics_statistics__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/core/statistics/statistics.ts"),_components_facet_browser_helper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/facet-browser/helper.ts");const __WEBPACK_DEFAULT_EXPORT__=()=>{const{track}=(0,_core_statistics_useStatistics__WEBPACK_IMPORTED_MODULE_4__.Jx)(),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_7__.wA)(),filters=(0,react_redux__WEBPACK_IMPORTED_MODULE_7__.d4)((state=>state.filter)),clearFilter=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_8__.MR)("filters"),dispatch((0,_core_filter_slice__WEBPACK_IMPORTED_MODULE_1__.IU)())}),[dispatch]),addToFilter=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((payload=>{"usePersistedFilters"!==(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_8__.d6)("filters")&&(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_8__.$u)({filters:"usePersistedFilters"}),dispatch((0,_core_filter_slice__WEBPACK_IMPORTED_MODULE_1__.WQ)(payload));const updatedFilters=_core_store__WEBPACK_IMPORTED_MODULE_2__.M_.getState().filter;"facetLine"===payload.origin&&track("click",{id:_core_statistics_statistics__WEBPACK_IMPORTED_MODULE_5__.o.facetsByFacetLineClick.id,name:_core_statistics_statistics__WEBPACK_IMPORTED_MODULE_5__.o.facetsByFacetLineClick.name,trackedData:(0,_components_facet_browser_helper__WEBPACK_IMPORTED_MODULE_6__.zN)(updatedFilters,payload.origin)}),"facetBrowser"===payload.origin&&track("click",{id:_core_statistics_statistics__WEBPACK_IMPORTED_MODULE_5__.o.searchFacets.id,name:_core_statistics_statistics__WEBPACK_IMPORTED_MODULE_5__.o.searchFacets.name,trackedData:(0,_components_facet_browser_helper__WEBPACK_IMPORTED_MODULE_6__.zN)(updatedFilters,payload.origin)})}),[dispatch,track]),removeFromFilter=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((payload=>dispatch((0,_core_filter_slice__WEBPACK_IMPORTED_MODULE_1__.TF)(payload))),[dispatch]);return{filters,addToFilter,removeFromFilter,clearFilter,addFilterFromUrlParamListener:facet=>{const urlFilter=(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_8__.d6)((0,_helper__WEBPACK_IMPORTED_MODULE_3__.z2)(facet));urlFilter&&addToFilter({facet:(0,_helper__WEBPACK_IMPORTED_MODULE_3__.z2)(facet),term:{key:"key",term:urlFilter,traceId:"traceId"},origin:"facetUrl"})}}}},"./src/components/cover/cover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>Cover});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),graphql=__webpack_require__("./src/core/dbc-gateway/generated/graphql.ts"),LinkNoStyle=__webpack_require__("./src/components/atoms/links/LinkNoStyle.tsx");const cover_image=({src,altText,animate,setImageLoaded,shadow})=>react.createElement("img",{onLoad:setImageLoaded,className:(0,clsx.A)("cover__img",{"cover__img--animate":animate},{"cover__img--shadow-small":"small"===shadow,"cover__img--shadow-medium":"medium"===shadow}),src,alt:altText||""});try{coverimage.displayName="coverimage",coverimage.__docgenInfo={description:"",displayName:"coverimage",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string | undefined"}},animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"boolean"}},setImageLoaded:{defaultValue:null,description:"",name:"setImageLoaded",required:!0,type:{name:"() => void"}},shadow:{defaultValue:null,description:"",name:"shadow",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"medium"'},{value:'"small"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/cover/cover-image.tsx#coverimage"]={docgenInfo:coverimage.__docgenInfo,name:"coverimage",path:"src/components/cover/cover-image.tsx#coverimage"})}catch(__react_docgen_typescript_loader_error){}var first=__webpack_require__("./node_modules/lodash/first.js"),first_default=__webpack_require__.n(first);const graphQLKeyToCssSize={xSmall:"xsmall",small:"small",medium:"medium",large:"large"};const getUrl=(cover,size)=>{var _cover$size;return(null==cover||null===(_cover$size=cover[size])||void 0===_cover$size?void 0:_cover$size.url)??null},getCoverUrl=({coverData,bestRepresentation,size})=>{if(!coverData)return null;const covers=(({coverData,size})=>coverData?coverData.filter((item=>!!getUrl(item.cover,size))):[])({coverData,size}),firstCover=first_default()(covers);if(!bestRepresentation&&firstCover&&getUrl(firstCover.cover,size))return getUrl(firstCover.cover,size);const bestRepresentationCover=first_default()(covers.filter((item=>(null==bestRepresentation?void 0:bestRepresentation.pid)===item.pid)));return bestRepresentationCover&&getUrl(bestRepresentationCover.cover,size)?getUrl(bestRepresentationCover.cover,size):firstCover&&getUrl(firstCover.cover,size)?getUrl(firstCover.cover,size):null};const createIsbnCql=(ids=[])=>ids.length?ids.map((id=>`term.isbn=${id}`)).join(" OR "):"";const Cover=({url,alt,size,displaySize,animate,tint,ids,bestRepresentation,idType="pid",shadow,linkAriaLabelledBy,trackClick})=>{var _isbnData$complexSear,_isbnData$complexSear2,_isbnData$complexSear3,_isbnData$complexSear4,_isbnData$complexSear5;const[imageLoaded,setImageLoaded]=(0,react.useState)(!1),handleSetImageLoaded=(0,react.useCallback)((()=>{setImageLoaded(!0)}),[]),isIsbn="isbn"===idType,hasIds=ids&&ids.length>0,{data:isbnData}=(0,graphql.Vt)({cql:createIsbnCql(ids),offset:0,limit:1,filters:{}},{enabled:isIsbn&&hasIds}),pidsToQuery=function resolveCoverPidValues({idType,ids,resolvedIsbnPid}){return"isbn"===idType?resolvedIsbnPid?[resolvedIsbnPid]:[]:Array.isArray(ids)?ids:[]}({idType,ids,resolvedIsbnPid:null==isbnData||null===(_isbnData$complexSear=isbnData.complexSearch)||void 0===_isbnData$complexSear||null===(_isbnData$complexSear2=_isbnData$complexSear.works)||void 0===_isbnData$complexSear2||null===(_isbnData$complexSear3=_isbnData$complexSear2[0])||void 0===_isbnData$complexSear3||null===(_isbnData$complexSear4=_isbnData$complexSear3.manifestations)||void 0===_isbnData$complexSear4||null===(_isbnData$complexSear5=_isbnData$complexSear4.bestRepresentation)||void 0===_isbnData$complexSear5?void 0:_isbnData$complexSear5.pid}),{data:coverResult}=(0,graphql.TH)({pids:pidsToQuery},{enabled:pidsToQuery.length>0}),coverData=function filterNonNullManifestations(manifestations){return(null==manifestations?void 0:manifestations.filter((m=>null!=m)))??[]}(null==coverResult?void 0:coverResult.manifestations),coverDisplaySize=function getCoverDisplaySize({displaySize,size}){return displaySize??graphQLKeyToCssSize[size]}({displaySize,size}),coverSrc=getCoverUrl({coverData,bestRepresentation,size}),classes={wrapper:(0,clsx.A)("cover",`cover--size-${coverDisplaySize}`,`cover--aspect-${coverDisplaySize}`,imageLoaded||{default:"bg-identity-tint-120",120:"bg-identity-tint-120",100:"bg-identity-tint-100",80:"bg-identity-tint-80",40:"bg-identity-tint-40",20:"bg-identity-tint-20"}[tint||"default"])};return url?react.createElement(LinkNoStyle.A,{className:classes.wrapper,url,ariaLabelledBy:linkAriaLabelledBy,isHiddenFromScreenReaders:!alt,trackClick},coverSrc&&react.createElement(cover_image,{setImageLoaded:handleSetImageLoaded,src:coverSrc,altText:alt,animate,shadow})):react.createElement("div",{className:classes.wrapper},coverSrc&&react.createElement(cover_image,{setImageLoaded:handleSetImageLoaded,src:coverSrc,altText:alt,animate,shadow}))};try{Cover.displayName="Cover",Cover.__docgenInfo={description:"",displayName:"Cover",props:{animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"large"'},{value:'"medium"'},{value:'"small"'},{value:'"xSmall"'}]}},displaySize:{defaultValue:null,description:"",name:"displaySize",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"large"'},{value:'"medium"'},{value:'"small"'},{value:'"2xsmall"'},{value:'"xsmall"'},{value:'"xlarge"'}]}},tint:{defaultValue:null,description:"",name:"tint",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"20"'},{value:'"40"'},{value:'"80"'},{value:'"100"'},{value:'"120"'}]}},ids:{defaultValue:null,description:"",name:"ids",required:!0,type:{name:"string[]"}},bestRepresentation:{defaultValue:null,description:"",name:"bestRepresentation",required:!1,type:{name:"Manifestation | undefined"}},alt:{defaultValue:null,description:"",name:"alt",required:!1,type:{name:"string | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"URL | undefined"}},idType:{defaultValue:{value:"pid"},description:"",name:"idType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"pid"'},{value:'"isbn"'}]}},shadow:{defaultValue:null,description:"",name:"shadow",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"medium"'},{value:'"small"'}]}},linkAriaLabelledBy:{defaultValue:null,description:"",name:"linkAriaLabelledBy",required:!1,type:{name:"string | undefined"}},trackClick:{defaultValue:null,description:"",name:"trackClick",required:!1,type:{name:"(() => Promise<unknown>) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/cover/cover.tsx#Cover"]={docgenInfo:Cover.__docgenInfo,name:"Cover",path:"src/components/cover/cover.tsx#Cover"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/facet-browser/helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A5:()=>findTermInFacetMap,EL:()=>createFilters,OI:()=>FacetBrowserModalId,Tt:()=>getFacetFieldTranslation,vx:()=>createFacetsMap,wP:()=>useGetFacets,zN:()=>getAllFilterPathsAsString});var lodash_mapValues__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/mapValues.js"),lodash_mapValues__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_0__),_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/dbc-gateway/generated/graphql.ts"),_core_utils_branches__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/branches.tsx"),_core_utils_helpers_invalid_switch_case__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/utils/helpers/invalid-switch-case.ts");const allFacetFields=[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Materialtypesgeneral,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Creators,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Subjects,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Fictionnonfiction,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Childrenoradults,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Accesstypes,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Mainlanguages,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Genreandform,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Materialtypesspecific,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Fictionalcharacters,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Year,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Canalwaysbeloaned,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Dk5,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Gameplatform],getPlaceHolderFacets=facets=>facets.map((facet=>({name:facet,type:facet,values:[{key:"",term:"",traceId:""}]}))),createFilters=(facets,branchIdList)=>{return{...(filters=facets,Object.keys(filters).reduce(((acc,key)=>({...acc,[key]:Object.keys(filters[key])})),{})),...branchIdList?{branchId:branchIdList}:{}};var filters};function useGetFacets(query,filters){const cleanBranches=(0,_core_utils_branches__WEBPACK_IMPORTED_MODULE_2__.Ay)(),{data,isLoading}=(0,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.V0)({q:{all:query},facets:allFacetFields,facetLimit:10,filters:createFilters(filters,cleanBranches)},{keepPreviousData:!0,placeholderData:{search:{facets:getPlaceHolderFacets(allFacetFields)}}});return{facets:(null==data?void 0:data.search.facets)||null,isLoading}}const FacetBrowserModalId="facet-browser-modal";function getAllFilterPathsAsString(filterObject,origin){const mappedFilterValues=lodash_mapValues__WEBPACK_IMPORTED_MODULE_0___default()(filterObject,(filter=>Object.keys(filter).filter((term=>filter[term].origin===origin)))),filterNames=Object.keys(mappedFilterValues);let allFilterPathsAsString="";return filterNames.forEach((filterName=>{mappedFilterValues[filterName].forEach((filterValue=>{""!==allFilterPathsAsString&&(allFilterPathsAsString=allFilterPathsAsString.concat(";")),allFilterPathsAsString=allFilterPathsAsString.concat(`facet.${filterName}:${filterValue}`)}))})),allFilterPathsAsString}const getFacetFieldTranslation=name=>{switch(name.toLowerCase()){case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Accesstypes.toLowerCase():return"facetAccessTypesText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Canalwaysbeloaned.toLowerCase():return"facetCanAlwaysBeLoanedText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Childrenoradults.toLowerCase():return"facetChildrenOrAdultsText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Creators.toLowerCase():return"facetCreatorsText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Dk5.toLowerCase():return"facetDk5Text";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Fictionnonfiction.toLowerCase():return"facetFictionNonfictionText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Fictionalcharacters.toLowerCase():return"facetFictionalCharactersText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Genreandform.toLowerCase():return"facetGenreAndFormText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Mainlanguages.toLowerCase():return"facetMainLanguagesText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Materialtypesspecific.toLowerCase():return"facetMaterialTypesGeneralText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Materialtypesgeneral.toLowerCase():return"facetMaterialTypesSpecificText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Subjects.toLowerCase():return"facetSubjectsText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Worktypes.toLowerCase():return"facetWorkTypesText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Year.toLowerCase():return"facetYearText";case _core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.DX.Gameplatform.toLowerCase():return"facetGamePlatformText";default:return(0,_core_utils_helpers_invalid_switch_case__WEBPACK_IMPORTED_MODULE_3__.A)(name)}},createFacetsMap=facets=>facets.reduce(((acc,facet)=>{const newAcc={...acc};return facet.values.forEach((value=>{const combinedKey=`${facet.name}:${value.key}`;newAcc[combinedKey]=value})),newAcc}),{}),findTermInFacetMap=(facetName,termName,facetMap)=>facetMap[`${facetName}:${termName}`]},"./src/components/search-bar/search-bar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_danskernesdigitalebibliotek_dpl_design_system_build_icons_basic_icon_search_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@danskernesdigitalebibliotek/dpl-design-system/build/icons/basic/icon-search.svg"),_danskernesdigitalebibliotek_dpl_design_system_build_icons_basic_icon_search_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_danskernesdigitalebibliotek_dpl_design_system_build_icons_basic_icon_search_svg__WEBPACK_IMPORTED_MODULE_1__),_danskernesdigitalebibliotek_dpl_design_system_build_icons_collection_ExpandMore_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@danskernesdigitalebibliotek/dpl-design-system/build/icons/collection/ExpandMore.svg"),_danskernesdigitalebibliotek_dpl_design_system_build_icons_collection_ExpandMore_svg__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_danskernesdigitalebibliotek_dpl_design_system_build_icons_collection_ExpandMore_svg__WEBPACK_IMPORTED_MODULE_2__),clsx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_core_utils_text__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/utils/text.tsx"),_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/utils/helpers/url.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=({q,getInputProps,getLabelProps,dataCy="search-header-input",qWithoutQuery,setQWithoutQuery,isHeaderDropdownOpen,setIsHeaderDropdownOpen,redirectUrl})=>{const t=(0,_core_utils_text__WEBPACK_IMPORTED_MODULE_3__.F)(),handleDropdownMenu=()=>{setIsHeaderDropdownOpen((prev=>!prev))};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",_extends({className:"hide-visually"},getLabelProps()),t("searchHeaderInputLabelText")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",_extends({required:!0,pattern:".*\\S+.*",title:t("searchNoValidCharactersErrorText"),name:"q",className:"header__menu-search-input text-body-medium-regular","data-cy":dataCy,type:"text",placeholder:t("inputPlaceholderText"),"aria-label":t("inputPlaceholderText"),onKeyUp:e=>{"Enter"===e.key&&qWithoutQuery===q&&q.length&&(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_4__.SE)(redirectUrl)}},getInputProps({onChange:e=>{setQWithoutQuery(e.target.value)}}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"image",src:_danskernesdigitalebibliotek_dpl_design_system_build_icons_basic_icon_search_svg__WEBPACK_IMPORTED_MODULE_1___default(),alt:t("searchHeaderIconAltText"),className:"header__menu-search-icon",onClick:()=>{qWithoutQuery===q&&q.length&&(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_4__.SE)(redirectUrl)},onKeyUp:e=>{"Enter"===e.key&&qWithoutQuery===q&&q.length&&(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_4__.SE)(redirectUrl)}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"image",src:_danskernesdigitalebibliotek_dpl_design_system_build_icons_collection_ExpandMore_svg__WEBPACK_IMPORTED_MODULE_2___default(),alt:t("searchHeaderDropdownText"),className:(0,clsx__WEBPACK_IMPORTED_MODULE_5__.A)("header__menu-dropdown-icon",{"header__menu-dropdown-icon--expanded":isHeaderDropdownOpen}),onClick:e=>{e.preventDefault(),e.stopPropagation(),handleDropdownMenu()},onKeyUp:e=>{"Enter"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),e.stopPropagation(),handleDropdownMenu())},tabIndex:0,"aria-label":t("searchHeaderDropdownText"),"data-cy":"search-header-dropdown-icon","aria-expanded":isHeaderDropdownOpen}))};try{searchbar.displayName="searchbar",searchbar.__docgenInfo={description:"",displayName:"searchbar",props:{q:{defaultValue:null,description:"",name:"q",required:!0,type:{name:"string"}},getInputProps:{defaultValue:null,description:"",name:"getInputProps",required:!0,type:{name:"<Options>(options?: (UseComboboxGetInputPropsOptions & Options) | undefined, otherOptions?: GetPropsCommonOptions | undefined) => Overwrite<...>"}},getLabelProps:{defaultValue:null,description:"",name:"getLabelProps",required:!0,type:{name:"<Options>(options?: (UseComboboxGetLabelPropsOptions & Options) | undefined) => Overwrite<UseComboboxGetLabelPropsReturnValue, Options>"}},dataCy:{defaultValue:{value:"search-header-input"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}},qWithoutQuery:{defaultValue:null,description:"",name:"qWithoutQuery",required:!0,type:{name:"string"}},setQWithoutQuery:{defaultValue:null,description:"",name:"setQWithoutQuery",required:!0,type:{name:"(value: string) => void"}},isHeaderDropdownOpen:{defaultValue:null,description:"",name:"isHeaderDropdownOpen",required:!0,type:{name:"boolean"}},setIsHeaderDropdownOpen:{defaultValue:null,description:"",name:"setIsHeaderDropdownOpen",required:!0,type:{name:"(value: boolean | ((prevState: boolean) => boolean)) => void"}},redirectUrl:{defaultValue:null,description:"",name:"redirectUrl",required:!0,type:{name:"URL"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string | undefined"}},inputPlaceholderText:{defaultValue:null,description:"",name:"inputPlaceholderText",required:!1,type:{name:"string | undefined"}},searchHeaderIconAltText:{defaultValue:null,description:"",name:"searchHeaderIconAltText",required:!1,type:{name:"string | undefined"}},searchNoValidCharactersErrorText:{defaultValue:null,description:"",name:"searchNoValidCharactersErrorText",required:!1,type:{name:"string | undefined"}},searchHeaderDropdownText:{defaultValue:null,description:"",name:"searchHeaderDropdownText",required:!1,type:{name:"string | undefined"}},searchHeaderInputLabelText:{defaultValue:null,description:"",name:"searchHeaderInputLabelText",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/search-bar/search-bar.tsx#searchbar"]={docgenInfo:searchbar.__docgenInfo,name:"searchbar",path:"src/components/search-bar/search-bar.tsx#searchbar"})}catch(__react_docgen_typescript_loader_error){}},"./src/core/statistics/statistics.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>statistics});const statistics={advancedSearchTerm:{id:9,name:"Avanceret sgning sgeterm",parameterName:"p_oss_adv"},advancedSearchCql:{id:63,name:"Avanceret sgning CQL",parameterName:"p_oss_cql"},searchQuery:{id:10,name:"OSS",parameterName:"OSS"},searchResultCount:{id:11,name:"OSS Results",parameterName:"OSSr"},searchFacets:{id:20,name:"Filtrering vha facetbrowser",parameterName:""},materialType:{id:24,name:"Materialetype",parameterName:"p_mat_type"},materialGenre:{id:25,name:"Materiale Genre",parameterName:"p_mat_category"},materialLanguage:{id:29,name:"Materiale Sprog",parameterName:"p_mat_lang"},materialSource:{id:30,name:"Materiale Kilde",parameterName:"p_mat_source"},materialTargetAudience:{id:31,name:"Materiale Mlgruppe",parameterName:""},materialTopicNumber:{id:32,name:"Materiale - DK5-nummer (Emnetal)",parameterName:"p_mat_indexno"},materialFictionNonFiction:{id:33,name:"Materiale Fiktion/nonfiktion",parameterName:"p_mat_ficnonfic"},materialStatus:{id:38,name:"Materiale Status",parameterName:"p_mat_status"},searchResultNumberClick:{id:42,name:"Sgning - Resultatnummer klik",parameterName:""},reservation:{id:50,name:"Reserver",parameterName:""},onlineReservation:{id:51,name:"Se online",parameterName:""},autosuggestClick:{id:54,name:"Autosuggest - klik",parameterName:""},campaignShown:{id:69,name:"KampagnePlus Titel",parameterName:"p_campaign_show"},facetsByFacetLineClick:{id:91,name:"Filtrering vha facetbnd",parameterName:""},renewSelectedMaterials:{id:55,name:"Forny valgte materialer",parameterName:""},renewAllMaterials:{id:56,name:"Forny alle materialer",parameterName:""},addToFavorites:{id:61,name:"Tilfj til liste",parameterName:""},orderFromAnotherLibrary:{id:70,name:"Bestil fra andet bibliotek",parameterName:""},orderDigitalCopy:{id:35,name:"Bestil digital kopi",parameterName:""},findOnShelf:{id:92,name:"Klik p Find p hylden",parameterName:""},reserveSpecificManifestation:{id:109,name:"Klik p specifik manifestation",parameterName:""},materialAudience:{id:67,name:"Materiale mlgruppe",parameterName:"p_mat_audience"},publizonLoan:{id:72,name:"Klik p Ln (Publizon)",parameterName:""},publizonReserve:{id:50,name:"Klik p Reservr (Publizon)",parameterName:""},publizonReadListen:{id:73,name:"Klik p LS/LYT (Publizon)",parameterName:""},publizonTry:{id:84,name:"Klik p Prv (Publizon)",parameterName:""},recommendedMaterial:{id:74,name:"Klik p recommended material",parameterName:""}}},"./src/core/statistics/useStatistics.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Wz:()=>useCollectPageStatistics,Jx:()=>useEventStatistics,Ki:()=>usePageStatistics,OT:()=>useUrlStatistics});var utils_config=__webpack_require__("./src/core/utils/config.tsx"),helpers_url=__webpack_require__("./src/core/utils/helpers/url.ts");const injectMappScript=({domain,id})=>{window._tiConfig={tiDomain:domain,tiId:id,option:{}},function(a,d,c,f){a.wts=a.wts||[];if(-1===d.cookie.indexOf("wt_r=1")){var e=d.getElementsByTagName(c)[0];(c=d.createElement(c)).async=!0,c.id="tiLoader",c.onload=function(){if(void 0!==a.wt_r&&!isNaN(a.wt_r)){var b=new Date,c=b.getTime()+1e3*parseInt(a.wt_r);b.setTime(c),d.cookie="wt_r=1;path=/;expires="+b.toUTCString()}},c.onerror=function(){void 0!==a.wt_mcp_hide&&"function"==typeof a.wt_mcp_hide.show&&(a.wt_mcp_hide.show(),a.wt_mcp_hide.show=function(){})},c.src="//"+function(b){var a="";if(b.customDomain&&b.customPath?a=b.customDomain+"/"+b.customPath:b.tiDomain&&b.tiId&&(a=b.tiDomain+"/resp/api/get/"+b.tiId+"?url="+encodeURIComponent("https://"+d.location.host+"/")+"&v=5"),b.option)for(var c in b.option)a+="&"+c+"="+encodeURIComponent(b.option[c]);return a}(f),e.parentNode.insertBefore(c,e)}}(window,document,"script",_tiConfig)},removeMappScript=()=>{const script=document.getElementById("tiLoader");script&&script.parentNode.removeChild(script);const cookie=document.cookie.split(";").find((c=>c.trim().startsWith("wt_r=")));cookie&&(document.cookie=cookie+"; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")},useCollectPageStatistics=()=>{const collectPageStatistics=({parameterName,trackedData})=>{window._ti=window._ti||{},window._ti[parameterName]=trackedData};return{collectPageStatistics,resetAndCollectPageStatistics:({parameterName,trackedData})=>{window._ti={},collectPageStatistics({parameterName,trackedData})}}};function usePageStatistics(){const config=(0,utils_config.UK)(),domain=config("mappDomainConfig"),id=config("mappIdConfig"),sendPageStatistics=({waitTime})=>{setTimeout((()=>{if(window.location.href.includes("dapple-cms"))return console.warn(" Mapp tracking is not enabled for dapple-cms"),void console.log("Tracking: send, page",JSON.stringify(window._ti));if(!domain||!id)return console.warn(" Mapp Domain or ID is not defined"),void console.log("Tracking: send, page",JSON.stringify(window._ti));const hasCollectedData=!!window._ti&&Object.values(window._ti).some((val=>"string"==typeof val&&""!==val.trim()));!document.getElementById("tiLoader")&&hasCollectedData&&injectMappScript({domain,id})}),waitTime)};return{sendPageStatistics,updatePageStatistics:({waitTime})=>{removeMappScript(),sendPageStatistics({waitTime})}}}const useEventStatistics=()=>{window.wts||(window.wts={push([action,type,data]){console.log(`Tracking: ${action}, ${type}, ${JSON.stringify(data)}`)}});return{track:(eventType,trackParameters)=>{const eventData={linkId:trackParameters.name,customClickParameter:{}};return eventData.customClickParameter[trackParameters.id]=trackParameters.trackedData,window.wts.push(["send",eventType,eventData]),new Promise((resolve=>{setTimeout((()=>{resolve("resolved")}),500)}))}}},useUrlStatistics=()=>({redirectWithUrlTracking:({campaignUrl,parameterValue,openInNewTab=!0})=>{if(!(0,helpers_url.Ks)(campaignUrl))return;const url=new URL(campaignUrl),params=new URLSearchParams(url.search);params.set("u_navigatedby",parameterValue),url.search=params.toString(),(0,helpers_url.SE)(url,openInNewTab)}})},"./src/core/storybook/globalConfigArgs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,U:()=>argTypes});const argTypes={errorMessagesConfig:{description:"Configuration for error messages behaviour",control:{type:"text"},table:{type:{summary:"text"},defaultValue:{summary:'{"containerId":"dpl-react-apps-error-messages","shouldOnlyShowOneError":true,"showCloseButton":true}'}}}},__WEBPACK_DEFAULT_EXPORT__={errorMessagesConfig:'{"containerId":"dpl-react-apps-error-messages","shouldOnlyShowOneError":true,"showCloseButton":true}'}},"./src/core/utils/branches.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,ov:()=>useGetBranches,z5:()=>excludeBlacklistedBranches});var _config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/utils/config.tsx");const excludeBlacklistedBranches=(branches,blacklist)=>branches.filter((item=>!blacklist.includes(item.branchId))),cleanBranchesId=branches=>branches.map((branch=>{const matches=/-(\d*)/g.exec(branch.branchId);return matches?matches[1]:""})).filter((item=>item)),useGetBranches=key=>{const config=(0,_config__WEBPACK_IMPORTED_MODULE_0__.UK)(),branches=config("branchesConfig",{transformer:"jsonParse"}),blacklistBranches=config(key,{transformer:"stringToArray"});return excludeBlacklistedBranches(branches,blacklistBranches)},__WEBPACK_DEFAULT_EXPORT__=()=>{const branches=useGetBranches("blacklistedSearchBranchesConfig");return cleanBranchesId(branches)};try{cleanBranchesId.displayName="cleanBranchesId",cleanBranchesId.__docgenInfo={description:"",displayName:"cleanBranchesId",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/utils/branches.tsx#cleanBranchesId"]={docgenInfo:cleanBranchesId.__docgenInfo,name:"cleanBranchesId",path:"src/core/utils/branches.tsx#cleanBranchesId"})}catch(__react_docgen_typescript_loader_error){}try{useGetBranches.displayName="useGetBranches",useGetBranches.__docgenInfo={description:"",displayName:"useGetBranches",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/utils/branches.tsx#useGetBranches"]={docgenInfo:useGetBranches.__docgenInfo,name:"useGetBranches",path:"src/core/utils/branches.tsx#useGetBranches"})}catch(__react_docgen_typescript_loader_error){}},"./src/core/utils/helpers/invalid-switch-case.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function invalidSwitchCase(x){return console.error(`Invalid case for ${x}`),x}}}]);