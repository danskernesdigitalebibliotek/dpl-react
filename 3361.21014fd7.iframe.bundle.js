"use strict";(globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react=globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react||[]).push([[3361],{"./src/components/atoms/icons/arrow/arrow.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"61",height:"9",viewBox:"0 0 61 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"arrow__body",d:"M60 4.5H0",stroke:"black"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"arrow__head",d:"M60.3537 4.85355C60.5489 4.65829 60.5489 4.34171 60.3537 4.14645L57.1717 0.96447C56.9764 0.769208 56.6598 0.769208 56.4646 0.96447C56.2693 1.15973 56.2693 1.47631 56.4646 1.67157L59.293 4.5L56.4646 7.32843C56.2693 7.52369 56.2693 7.84027 56.4646 8.03553C56.6598 8.2308 56.9764 8.2308 57.1717 8.03553L60.3537 4.85355ZM60.0001 4H57.0001V5H60.0001V4Z",fill:"black"}))},"./src/components/result-pager/use-pager.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>use_pager});var react=__webpack_require__("./node_modules/react/index.js"),utils_text=__webpack_require__("./src/core/utils/text.tsx");function ResultPager({setPageHandler,itemsShown,hitcount,isLoading,classNames}){const t=(0,utils_text.F)();return react.createElement("div",{className:`result-pager ${classNames}`},react.createElement("p",{className:"text-small-caption result-pager__title"},t("resultPagerStatusText",{placeholders:{"@itemsShown":itemsShown,"@hitcount":hitcount}})),itemsShown!==hitcount&&react.createElement("button",{disabled:isLoading,type:"button",className:"btn-primary btn-outline btn-medium arrow__hover--right-small uppercase",onClick:setPageHandler},t(isLoading?"loadingText":"showMoreText")))}const result_pager=ResultPager;try{ResultPager.displayName="ResultPager",ResultPager.__docgenInfo={description:"",displayName:"ResultPager",props:{setPageHandler:{defaultValue:null,description:"",name:"setPageHandler",required:!0,type:{name:"() => void"}},itemsShown:{defaultValue:null,description:"",name:"itemsShown",required:!0,type:{name:"number"}},hitcount:{defaultValue:null,description:"",name:"hitcount",required:!0,type:{name:"number"}},classNames:{defaultValue:null,description:"",name:"classNames",required:!0,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/result-pager/result-pager.tsx#ResultPager"]={docgenInfo:ResultPager.__docgenInfo,name:"ResultPager",path:"src/components/result-pager/result-pager.tsx#ResultPager"})}catch(__react_docgen_typescript_loader_error){}const use_pager=({hitcount,pageSize,overrideItemsShown})=>{const[itemsShown,setItemsShown]=(0,react.useState)(pageSize>=hitcount?hitcount:pageSize),[page,setPage]=(0,react.useState)(0),[firstInNewPage,setFirstInNewPage]=(0,react.useState)(null);(0,react.useEffect)((()=>{setItemsShown(pageSize>hitcount?hitcount:pageSize)}),[hitcount,pageSize]);const pagehandler=()=>{const currentPage=page+1,itemsOnPage=(currentPage+1)*pageSize,onLastPage=itemsOnPage>hitcount;setFirstInNewPage(itemsOnPage-pageSize),setItemsShown(onLastPage?hitcount:itemsOnPage),setPage(currentPage)};return{itemsShown,PagerComponent:({isLoading,classNames=""})=>hitcount?react.createElement(result_pager,{itemsShown:overrideItemsShown?overrideItemsShown():itemsShown,hitcount,classNames,setPageHandler:pagehandler,isLoading}):null,page,firstInNewPage,resetPage:()=>{setPage(0),setFirstInNewPage(null);setItemsShown(pageSize>=hitcount?hitcount:pageSize)}}};try{usepager.displayName="usepager",usepager.__docgenInfo={description:"",displayName:"usepager",props:{hitcount:{defaultValue:null,description:"",name:"hitcount",required:!0,type:{name:"number"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},overrideItemsShown:{defaultValue:null,description:"",name:"overrideItemsShown",required:!1,type:{name:"(() => number) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/result-pager/use-pager.tsx#usepager"]={docgenInfo:usepager.__docgenInfo,name:"usepager",path:"src/components/result-pager/use-pager.tsx#usepager"})}catch(__react_docgen_typescript_loader_error){}},"./src/core/publizon/mutator/PublizonServiceError.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>PublizonServiceError});var _fetchers_FetcherHttpError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/fetchers/FetcherHttpError.ts");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class PublizonServiceError extends _fetchers_FetcherHttpError__WEBPACK_IMPORTED_MODULE_0__.A{constructor(status,message,responseBody,context){super(status,message,context),_defineProperty(this,"name","PublizonServiceError"),_defineProperty(this,"responseBody",void 0),this.responseBody=responseBody}}},"./src/core/publizon/publizon.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{qC:()=>getGetV1LoanstatusIdentifierQueryKey,BE:()=>getGetV1UserLoansQueryKey,tt:()=>getGetV1UserReservationsQueryKey,de:()=>useDeleteV1UserReservationsIdentifier,PF:()=>useGetV1LibraryProfile,Qo:()=>useGetV1LoanstatusIdentifier,wK:()=>useGetV1ProductsIdentifier,cC:()=>useGetV1UserCardnumberFriendly,VM:()=>useGetV1UserLoans,pA:()=>useGetV1UserReservations,I5:()=>usePostV1UserLoansIdentifier,st:()=>usePostV1UserReservationsIdentifier});var es=__webpack_require__("./node_modules/react-query/es/index.js"),FetchFailedCriticalError=__webpack_require__("./src/core/fetchers/FetchFailedCriticalError.ts"),helpers=__webpack_require__("./src/core/fetchers/helpers.ts"),core_token=__webpack_require__("./src/core/token.js"),extractServiceBaseUrls=__webpack_require__("./src/core/utils/reduxMiddleware/extractServiceBaseUrls.ts"),PublizonServiceError=__webpack_require__("./src/core/publizon/mutator/PublizonServiceError.ts");const fetcher_fetcher=async({url,method,headers,params,data})=>{const token=(0,core_token.gf)(core_token.CI)??(0,core_token.gf)(core_token._L),authHeaders=token?{Authorization:`Bearer ${token}`}:{},body=data?JSON.stringify(data):null,serviceUrl=(0,helpers.Z4)({baseUrl:(0,extractServiceBaseUrls.aW)(extractServiceBaseUrls.TJ.publizon),url,params});try{const response=await fetch(serviceUrl,{method,headers:{...headers,...authHeaders},body});try{const responseBody=await response.json();if(!response.ok)throw new PublizonServiceError.A(response.status,response.statusText,responseBody,serviceUrl);return responseBody??null}catch(e){if(!(e instanceof SyntaxError))throw e}}catch(error){if(error instanceof PublizonServiceError.A)throw error;const message=error instanceof Error?error.message:"Unknown error";throw new FetchFailedCriticalError.A(message,serviceUrl)}return null},getGetV1UserCardnumberFriendlyQueryOptions=options=>{const{query:queryOptions}=options??{};return{queryKey:(null==queryOptions?void 0:queryOptions.queryKey)??["/v1/user/cardnumber/friendly"],queryFn:({signal})=>(signal=>fetcher_fetcher({url:"/v1/user/cardnumber/friendly",method:"GET",signal}))(signal),...queryOptions}};function useGetV1UserCardnumberFriendly(options){const queryOptions=getGetV1UserCardnumberFriendlyQueryOptions(options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query}const getGetV1LibraryProfileQueryOptions=options=>{const{query:queryOptions}=options??{};return{queryKey:(null==queryOptions?void 0:queryOptions.queryKey)??["/v1/library/profile"],queryFn:({signal})=>(signal=>fetcher_fetcher({url:"/v1/library/profile",method:"GET",signal}))(signal),...queryOptions}};function useGetV1LibraryProfile(options){const queryOptions=getGetV1LibraryProfileQueryOptions(options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query}const getGetV1UserLoansQueryKey=params=>["/v1/user/loans",...params?[params]:[]],getGetV1UserLoansQueryOptions=(params,options)=>{const{query:queryOptions}=options??{};return{queryKey:(null==queryOptions?void 0:queryOptions.queryKey)??getGetV1UserLoansQueryKey(params),queryFn:({signal})=>((params,signal)=>fetcher_fetcher({url:"/v1/user/loans",method:"GET",params,signal}))(params,signal),...queryOptions}};function useGetV1UserLoans(params,options){const queryOptions=getGetV1UserLoansQueryOptions(params,options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query}const getPostV1UserLoansIdentifierMutationOptions=options=>{const{mutation:mutationOptions}=options??{};return{mutationFn:props=>{const{identifier,params}=props??{};return((identifier,params)=>fetcher_fetcher({url:`/v1/user/loans/${identifier}`,method:"POST",params}))(identifier,params)},...mutationOptions}},usePostV1UserLoansIdentifier=options=>{const mutationOptions=getPostV1UserLoansIdentifierMutationOptions(options);return(0,es.useMutation)(mutationOptions)},getGetV1LoanstatusIdentifierQueryKey=identifier=>[`/v1/loanstatus/${identifier}`],getGetV1LoanstatusIdentifierQueryOptions=(identifier,queryOptions)=>({queryKey:(null==queryOptions?void 0:queryOptions.queryKey)??getGetV1LoanstatusIdentifierQueryKey(identifier),queryFn:({signal})=>((identifier,signal)=>fetcher_fetcher({url:`/v1/loanstatus/${identifier}`,method:"GET",signal}))(identifier,signal),enabled:!!identifier,...queryOptions});function useGetV1LoanstatusIdentifier(identifier,queryOptions){const options=getGetV1LoanstatusIdentifierQueryOptions(identifier,queryOptions),query=(0,es.useQuery)(options);return query.queryKey=options.queryKey,query}const getGetV1ProductsIdentifierQueryOptions=(identifier,options)=>{const{query:queryOptions}=options??{},queryKey=(null==queryOptions?void 0:queryOptions.queryKey)??(identifier=>[`/v1/products/${identifier}`])(identifier);return{queryKey,queryFn:({signal})=>((identifier,signal)=>fetcher_fetcher({url:`/v1/products/${identifier}`,method:"GET",signal}))(identifier,signal),enabled:!!identifier,...queryOptions}};function useGetV1ProductsIdentifier(identifier,options){const queryOptions=getGetV1ProductsIdentifierQueryOptions(identifier,options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query}const getGetV1UserReservationsQueryKey=()=>["/v1/user/reservations"],getGetV1UserReservationsQueryOptions=options=>{const{query:queryOptions}=options??{};return{queryKey:(null==queryOptions?void 0:queryOptions.queryKey)??getGetV1UserReservationsQueryKey(),queryFn:({signal})=>(signal=>fetcher_fetcher({url:"/v1/user/reservations",method:"GET",signal}))(signal),...queryOptions}};function useGetV1UserReservations(options){const queryOptions=getGetV1UserReservationsQueryOptions(options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query}const getPostV1UserReservationsIdentifierMutationOptions=options=>{const{mutation:mutationOptions}=options??{};return{mutationFn:props=>{const{identifier,data}=props??{};return((identifier,reservationInput)=>fetcher_fetcher({url:`/v1/user/reservations/${identifier}`,method:"POST",headers:{"Content-Type":"application/json"},data:reservationInput}))(identifier,data)},...mutationOptions}},usePostV1UserReservationsIdentifier=options=>{const mutationOptions=getPostV1UserReservationsIdentifierMutationOptions(options);return(0,es.useMutation)(mutationOptions)},getDeleteV1UserReservationsIdentifierMutationOptions=options=>{const{mutation:mutationOptions}=options??{};return{mutationFn:props=>{const{identifier}=props??{};return(identifier=>fetcher_fetcher({url:`/v1/user/reservations/${identifier}`,method:"DELETE"}))(identifier)},...mutationOptions}},useDeleteV1UserReservationsIdentifier=options=>{const mutationOptions=getDeleteV1UserReservationsIdentifierMutationOptions(options);return(0,es.useMutation)(mutationOptions)}},"./src/core/utils/branches.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,ov:()=>useGetBranches,z5:()=>excludeBlacklistedBranches});var _config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/utils/config.tsx");const excludeBlacklistedBranches=(branches,blacklist)=>branches.filter((item=>!blacklist.includes(item.branchId))),cleanBranchesId=branches=>branches.map((branch=>{const matches=/-(\d*)/g.exec(branch.branchId);return matches?matches[1]:""})).filter((item=>item)),useGetBranches=(blacklistKey,preferEmptyResult=!1)=>{const config=(0,_config__WEBPACK_IMPORTED_MODULE_0__.UK)(),branches=config("branchesConfig",{transformer:"jsonParse"}),blacklistBranches=config(blacklistKey,{transformer:"stringToArray"});if(preferEmptyResult&&!blacklistBranches.length)return[];const whitelistBranches=excludeBlacklistedBranches(branches,blacklistBranches);return preferEmptyResult&&whitelistBranches.length==branches.length?[]:whitelistBranches},__WEBPACK_DEFAULT_EXPORT__=()=>{const branches=useGetBranches("blacklistedSearchBranchesConfig",!0);return cleanBranchesId(branches)};try{cleanBranchesId.displayName="cleanBranchesId",cleanBranchesId.__docgenInfo={description:"",displayName:"cleanBranchesId",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/utils/branches.tsx#cleanBranchesId"]={docgenInfo:cleanBranchesId.__docgenInfo,name:"cleanBranchesId",path:"src/core/utils/branches.tsx#cleanBranchesId"})}catch(__react_docgen_typescript_loader_error){}try{useGetBranches.displayName="useGetBranches",useGetBranches.__docgenInfo={description:"Getting branches that are not blacklisted.",displayName:"useGetBranches",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/utils/branches.tsx#useGetBranches"]={docgenInfo:useGetBranches.__docgenInfo,name:"useGetBranches",path:"src/core/utils/branches.tsx#useGetBranches"})}catch(__react_docgen_typescript_loader_error){}},"./src/core/utils/helpers/invalid-switch-case.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function invalidSwitchCase(x){return console.error(`Invalid case for ${x}`),x}}}]);