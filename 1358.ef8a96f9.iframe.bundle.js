"use strict";(globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react=globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react||[]).push([[1358],{"./src/apps/loan-list/materials/utils/digital-material-fetch-hoc.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_publizon_publizon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/publizon/publizon.ts"),_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/helpers/list-mapper.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=(Component,LoadingComponent)=>({item,...props})=>{if(item.faust)return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item}));if(item.identifier){const[digitalMaterial,setDigitalMaterial]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),{data:productsData,isSuccess:isSuccessDigital,isLoading}=(0,_core_publizon_publizon__WEBPACK_IMPORTED_MODULE_1__.wK)(item.identifier);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{productsData&&isSuccessDigital&&productsData.product&&setDigitalMaterial((0,_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__.z7)(productsData.product))}),[productsData,isSuccessDigital]),isLoading?LoadingComponent?react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingComponent,null):null:digitalMaterial?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item,material:digitalMaterial})):null}return null}},"./src/apps/loan-list/materials/utils/material-fetch-hoc.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/dbc-gateway/generated/graphql.tsx"),_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/helpers/list-mapper.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=(Component,FallbackComponent)=>({item,...props})=>{if(null!=item&&item.identifier)return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item}));if(null!=item&&item.faust){const[material,setMaterial]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();let isLoadingAnything=!1,manifestation=null;if(item.reservationIds&&item.reservationIds.length>1){const{isSuccess,data,isLoading}=(0,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.NM)({faust:item.faust});isLoadingAnything=isLoading,isSuccess&&null!=data&&data.manifestation&&(manifestation=data.manifestation.ownerWork.manifestations.bestRepresentation)}else{const{isSuccess,data,isLoading}=(0,_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_1__.V3)({faust:item.faust});isLoadingAnything=isLoading,isSuccess&&null!=data&&data.manifestation&&(manifestation=data.manifestation)}return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{manifestation?setMaterial((0,_core_utils_helpers_list_mapper__WEBPACK_IMPORTED_MODULE_2__.Ml)(manifestation)):item.details&&setMaterial(item.details)}),[manifestation,item.details]),isLoadingAnything?FallbackComponent?react__WEBPACK_IMPORTED_MODULE_0__.createElement(FallbackComponent,null):null:material?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,_extends({},props,{item,material})):null}return null}},"./src/apps/loan-list/materials/utils/status-circle-icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/utils/helpers/general.ts");const __WEBPACK_DEFAULT_EXPORT__=({color,percent,children})=>{const{default:defaultColor}=(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__.jM)(),usedColor=color||defaultColor;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"counter",style:{background:`radial-gradient( closest-side, var(--parent-bg-color) calc(100% - 3px), transparent calc(100% - 2px), transparent 0 100% ), conic-gradient(${usedColor} ${percent}%, #DBDBDB 0)`}},children)};try{statuscircleicon.displayName="statuscircleicon",statuscircleicon.__docgenInfo={description:"",displayName:"statuscircleicon",props:{color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}},percent:{defaultValue:null,description:"",name:"percent",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/loan-list/materials/utils/status-circle-icon.tsx#statuscircleicon"]={docgenInfo:statuscircleicon.__docgenInfo,name:"statuscircleicon",path:"src/apps/loan-list/materials/utils/status-circle-icon.tsx#statuscircleicon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/loan-list/modal/material-details-modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,B0:()=>loanDetailsModalId,bk:()=>reservationDetailsModalId});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_utils_modal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/utils/modal.tsx"),_core_utils_text__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/text.tsx"),_core_utils_types_loan_type__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/utils/types/loan-type.ts"),_core_utils_helpers_modal_helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/utils/helpers/modal-helpers.ts");function reservationDetailsModalId(reservation){return`${String((0,_core_utils_helpers_modal_helpers__WEBPACK_IMPORTED_MODULE_3__.c6)().reservationDetails)}${String(reservation.identifier||reservation.faust)}`}function loanDetailsModalId(loan){return`${String((0,_core_utils_helpers_modal_helpers__WEBPACK_IMPORTED_MODULE_3__.c6)().loanDetails)}${(0,_core_utils_types_loan_type__WEBPACK_IMPORTED_MODULE_4__.G)(loan)}`}const __WEBPACK_DEFAULT_EXPORT__=({modalId,children})=>{const t=(0,_core_utils_text__WEBPACK_IMPORTED_MODULE_2__.F)();return modalId?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_core_utils_modal__WEBPACK_IMPORTED_MODULE_1__.A,{modalId,classNames:"modal-details",closeModalAriaLabelText:t("materialDetailsCloseModalAriaLabelText"),screenReaderModalDescriptionText:t("materialDetailsModalAriaDescriptionText")},children):null};try{reservationDetailsModalId.displayName="reservationDetailsModalId",reservationDetailsModalId.__docgenInfo={description:"",displayName:"reservationDetailsModalId",props:{dateOfReservation:{defaultValue:null,description:"",name:"dateOfReservation",required:!1,type:{name:"string | null | undefined"}},expiryDate:{defaultValue:null,description:"",name:"expiryDate",required:!1,type:{name:"string | null | undefined"}},pickupDeadline:{defaultValue:null,description:"",name:"pickupDeadline",required:!1,type:{name:"string | null | undefined"}},numberInQueue:{defaultValue:null,description:"",name:"numberInQueue",required:!1,type:{name:"number | null | undefined"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"string | null | undefined"}},expectedRedeemDateUtc:{defaultValue:null,description:"",name:"expectedRedeemDateUtc",required:!1,type:{name:"string | null | undefined"}},pickupNumber:{defaultValue:null,description:'The reservation number. This is, contrary to the name, a string containing, as an example, "Reserveringshylde 111"',name:"pickupNumber",required:!1,type:{name:"string | null | undefined"}},pickupBranch:{defaultValue:null,description:"",name:"pickupBranch",required:!1,type:{name:"string | null | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | null | undefined"}},periodical:{defaultValue:null,description:"",name:"periodical",required:!1,type:{name:"string | null | undefined"}},reservationType:{defaultValue:null,description:"",name:"reservationType",required:!1,type:{name:"string | null | undefined"}},faust:{defaultValue:null,description:"",name:"faust",required:!1,type:{name:"string | null | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!1,type:{name:"string | null | undefined"}},reservationIds:{defaultValue:null,description:"",name:"reservationIds",required:!1,type:{name:"number[] | null | undefined"}},loanId:{defaultValue:null,description:"",name:"loanId",required:!1,type:{name:"number | null | undefined"}},details:{defaultValue:null,description:"",name:"details",required:!1,type:{name:"Nullable<Partial<BasicDetails>> | null | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/loan-list/modal/material-details-modal.tsx#reservationDetailsModalId"]={docgenInfo:reservationDetailsModalId.__docgenInfo,name:"reservationDetailsModalId",path:"src/apps/loan-list/modal/material-details-modal.tsx#reservationDetailsModalId"})}catch(__react_docgen_typescript_loader_error){}try{loanDetailsModalId.displayName="loanDetailsModalId",loanDetailsModalId.__docgenInfo={description:"",displayName:"loanDetailsModalId",props:{dueDate:{defaultValue:null,description:"",name:"dueDate",required:!1,type:{name:"string | null | undefined"}},loanDate:{defaultValue:null,description:"",name:"loanDate",required:!1,type:{name:"string | null | undefined"}},periodical:{defaultValue:null,description:"",name:"periodical",required:!1,type:{name:"string | null | undefined"}},isRenewable:{defaultValue:null,description:"",name:"isRenewable",required:!0,type:{name:"boolean"}},materialItemNumber:{defaultValue:null,description:"",name:"materialItemNumber",required:!1,type:{name:"string | null | undefined"}},renewalStatusList:{defaultValue:null,description:"",name:"renewalStatusList",required:!0,type:{name:"string[]"}},loanType:{defaultValue:null,description:"",name:"loanType",required:!0,type:{name:"string | null"}},faust:{defaultValue:null,description:"",name:"faust",required:!1,type:{name:"string | null | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!1,type:{name:"string | null | undefined"}},reservationIds:{defaultValue:null,description:"",name:"reservationIds",required:!1,type:{name:"number[] | null | undefined"}},loanId:{defaultValue:null,description:"",name:"loanId",required:!1,type:{name:"number | null | undefined"}},details:{defaultValue:null,description:"",name:"details",required:!1,type:{name:"Nullable<Partial<BasicDetails>> | null | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/loan-list/modal/material-details-modal.tsx#loanDetailsModalId"]={docgenInfo:loanDetailsModalId.__docgenInfo,name:"loanDetailsModalId",path:"src/apps/loan-list/modal/material-details-modal.tsx#loanDetailsModalId"})}catch(__react_docgen_typescript_loader_error){}try{materialdetailsmodal.displayName="materialdetailsmodal",materialdetailsmodal.__docgenInfo={description:"",displayName:"materialdetailsmodal",props:{modalId:{defaultValue:null,description:"",name:"modalId",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/loan-list/modal/material-details-modal.tsx#materialdetailsmodal"]={docgenInfo:materialdetailsmodal.__docgenInfo,name:"materialdetailsmodal",path:"src/apps/loan-list/modal/material-details-modal.tsx#materialdetailsmodal"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/reservation-list/reservation-material/reservation-info.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>reservation_info});var react=__webpack_require__("./node_modules/react/index.js"),icon_check=__webpack_require__("./node_modules/@danskernesdigitalebibliotek/dpl-design-system/build/icons/basic/icon-check.svg"),icon_check_default=__webpack_require__.n(icon_check),useDeepCompareEffect=__webpack_require__("./node_modules/react-use/esm/useDeepCompareEffect.js"),utils_text=__webpack_require__("./src/core/utils/text.tsx"),general=__webpack_require__("./src/core/utils/helpers/general.ts"),helper=__webpack_require__("./src/components/reservation/helper.ts"),ArrowButton=__webpack_require__("./src/components/Buttons/ArrowButton.tsx"),status_circle_icon=__webpack_require__("./src/apps/loan-list/materials/utils/status-circle-icon.tsx");const InfoLabel=({dataCy="info-label",children})=>react.createElement("div",{"data-cy":dataCy,className:"status-label status-label--info"},children),labels_InfoLabel=InfoLabel;try{InfoLabel.displayName="InfoLabel",InfoLabel.__docgenInfo={description:"",displayName:"InfoLabel",props:{dataCy:{defaultValue:{value:"info-label"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/labels/InfoLabel.tsx#InfoLabel"]={docgenInfo:InfoLabel.__docgenInfo,name:"InfoLabel",path:"src/components/atoms/labels/InfoLabel.tsx#InfoLabel"})}catch(__react_docgen_typescript_loader_error){}const reservation_status=({reservationInfo,openReservationDetailsModal,color,percent,empty=!1,info,label,children,showArrow=!0,className})=>{const shouldRenderReservationDeadline=info||(Array.isArray(label)?label.length>0:!!label);return react.createElement("div",{className:className??"list-reservation__status"},react.createElement("div",{className:"list-reservation__counter color-secondary-gray"},!empty&&react.createElement(status_circle_icon.A,{color,percent},children)),shouldRenderReservationDeadline&&react.createElement("div",null,react.createElement("div",{className:"list-reservation__deadline"},info&&react.createElement(labels_InfoLabel,null,info),"string"==typeof label&&react.createElement("p",{className:"text-small-caption"},label),Array.isArray(label)&&label.map((localLabel=>react.createElement("p",{className:"text-small-caption"},localLabel))))),showArrow&&react.createElement(ArrowButton.A,{arrowLabelledBy:`${(null==reservationInfo?void 0:reservationInfo.identifier)||(null==reservationInfo?void 0:reservationInfo.faust)}-title`,cursorPointer:!0,clickEventHandler:()=>{openReservationDetailsModal&&reservationInfo&&openReservationDetailsModal(reservationInfo)}}))};try{reservationstatus.displayName="reservationstatus",reservationstatus.__docgenInfo={description:"",displayName:"reservationstatus",props:{reservationInfo:{defaultValue:null,description:"",name:"reservationInfo",required:!1,type:{name:"Nullable<Partial<Reservation>> | undefined"}},openReservationDetailsModal:{defaultValue:null,description:"",name:"openReservationDetailsModal",required:!1,type:{name:"((reservation: Nullable<Partial<Reservation>>) => void) | undefined"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}},empty:{defaultValue:{value:"false"},description:"",name:"empty",required:!1,type:{name:"boolean | undefined"}},percent:{defaultValue:null,description:"",name:"percent",required:!0,type:{name:"number"}},info:{defaultValue:null,description:"",name:"info",required:!1,type:{name:"string | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | string[]"}},showArrow:{defaultValue:{value:"true"},description:"",name:"showArrow",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/reservation-list/reservation-material/reservation-status.tsx#reservationstatus"]={docgenInfo:reservationstatus.__docgenInfo,name:"reservationstatus",path:"src/apps/reservation-list/reservation-material/reservation-status.tsx#reservationstatus"})}catch(__react_docgen_typescript_loader_error){}var utils_branches=__webpack_require__("./src/core/utils/branches.tsx"),helpers=__webpack_require__("./src/apps/reservation-list/utils/helpers.ts");const reservation_info=({reservationInfo,openReservationDetailsModal,showStatusCircleIcon=!0,showArrow=!0,reservationStatusClassNameOverride,isDigital})=>{const t=(0,utils_text.F)(),{state,expiryDate,pickupBranch,numberInQueue,pickupDeadline,pickupNumber}=reservationInfo,[pickupLibrary,setPickupLibrary]=(0,react.useState)(""),{success}=(0,general.jM)(),branches=(0,utils_branches.ov)("blacklistedPickupBranchesConfig");(0,useDeepCompareEffect.A)((()=>{branches&&pickupBranch&&setPickupLibrary((0,helper.C4)(pickupBranch,branches))}),[branches,pickupBranch]);const getInfo=()=>{if(!(isDigital&&expiryDate||pickupDeadline))return"";const date=(isDigital?expiryDate:pickupDeadline)??null;return date?(0,helpers.Fk)({pickupBranch,date,t,isDigital}):""};if("readyForPickup"===state)return react.createElement(reservation_status,{color:success,percent:100,info:getInfo(),label:isDigital?[t("reservationListDigitalPickupText")]:[pickupLibrary,pickupNumber||""],reservationInfo,openReservationDetailsModal,empty:!showStatusCircleIcon,showArrow,className:reservationStatusClassNameOverride},react.createElement("div",{className:"counter__value color-secondary-gray"},react.createElement("img",{src:icon_check_default(),alt:""}),react.createElement("span",{className:"counter__label color-secondary-gray"},t("reservationListReadyText"))));if("reserved"===state&&pickupBranch&&numberInQueue&&expiryDate){const numberInLineLabel=1===numberInQueue?t("reservationListFirstInQueueText"):t("reservationListNumberInQueueText",{placeholders:{"@count":numberInQueue-1}});return react.createElement(reservation_status,{percent:1/numberInQueue*100,label:showStatusCircleIcon?numberInLineLabel:"",reservationInfo,openReservationDetailsModal,empty:!showStatusCircleIcon,showArrow,className:reservationStatusClassNameOverride},react.createElement("span",{className:"counter__value color-secondary-gray"},numberInQueue),react.createElement("span",{className:"counter__label color-secondary-gray"},t("reservationListInQueueText")))}if("reserved"===state&&!pickupBranch&&pickupDeadline){const daysBetweenTodayAndPickup=(0,general.m2)(pickupDeadline),reservationAvailableLabel=showStatusCircleIcon?t("reservationListAvailableInText",{placeholders:{"@count":(0,general.m2)(pickupDeadline)}}):"";return react.createElement(reservation_status,{percent:(0,general.m2)(pickupDeadline)/100,label:reservationAvailableLabel,reservationInfo,openReservationDetailsModal,empty:!showStatusCircleIcon,showArrow,className:reservationStatusClassNameOverride},react.createElement("span",{className:"counter__value color-secondary-gray"},(0,general.m2)(pickupDeadline)>0?daysBetweenTodayAndPickup:0," "),react.createElement("span",{className:"counter__label color-secondary-gray"},t(1===daysBetweenTodayAndPickup?"reservationListDayText":"reservationListDaysText")))}return react.createElement(reservation_status,{reservationInfo,openReservationDetailsModal,percent:0,label:"",empty:!0,showArrow,className:reservationStatusClassNameOverride})};try{reservationinfo.displayName="reservationinfo",reservationinfo.__docgenInfo={description:"",displayName:"reservationinfo",props:{reservationInfo:{defaultValue:null,description:"",name:"reservationInfo",required:!0,type:{name:"Nullable<Partial<Reservation>>"}},openReservationDetailsModal:{defaultValue:null,description:"",name:"openReservationDetailsModal",required:!1,type:{name:"((reservation: Nullable<Partial<Reservation>>) => void) | undefined"}},showStatusCircleIcon:{defaultValue:{value:"true"},description:"",name:"showStatusCircleIcon",required:!1,type:{name:"boolean | undefined"}},showArrow:{defaultValue:{value:"true"},description:"",name:"showArrow",required:!1,type:{name:"boolean | undefined"}},reservationStatusClassNameOverride:{defaultValue:null,description:"",name:"reservationStatusClassNameOverride",required:!1,type:{name:"string | undefined"}},isDigital:{defaultValue:null,description:"",name:"isDigital",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/reservation-list/reservation-material/reservation-info.tsx#reservationinfo"]={docgenInfo:reservationinfo.__docgenInfo,name:"reservationinfo",path:"src/apps/reservation-list/reservation-material/reservation-info.tsx#reservationinfo"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/reservation-list/utils/helpers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fk:()=>getReservationStatusInfoLabel,Iw:()=>getStatusText,JU:()=>getReadyForPickup,LQ:()=>sortByOldestPickupDeadline,hm:()=>sortByNumberInQueue});var _core_utils_helpers_date__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/utils/helpers/date.ts"),_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/utils/helpers/general.ts");const sortByOldestPickupDeadline=list=>list.sort(((objA,objB)=>new Date(objA.pickupDeadline||new Date).getTime()-new Date(objB.pickupDeadline||new Date).getTime())),sortByNumberInQueue=reservations=>[...reservations].sort(((a,b)=>(a.numberInQueue||0)-(b.numberInQueue||0))),getReadyForPickup=list=>list.filter((({state})=>"readyForPickup"===state)),infoLabelTextType_pickUpLatest="reservationPickUpLatestText",infoLabelTextType_loanBefore="reservationListLoanBeforeText",getReservationStatusInfoLabel=({pickupBranch,date,isDigital,t})=>t(pickupBranch?infoLabelTextType_pickUpLatest:infoLabelTextType_loanBefore,{placeholders:{"@date":(0,_core_utils_helpers_date__WEBPACK_IMPORTED_MODULE_0__.SL)({date,isDigital})}}),getStatusText=({identifier,state,pickupDeadline,faust,numberInQueue},t)=>identifier&&"reserved"===state?pickupDeadline?t("reservationListAvailableInText",{placeholders:{"@count":(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_1__.m2)(pickupDeadline)}}):t("reservationListYouAreInQueueText"):faust&&numberInQueue?t("dashboardNumberInLineText",{count:numberInQueue,placeholders:{"@count":numberInQueue}}):""},"./src/components/Buttons/ArrowButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_atoms_icons_arrow_arrow__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/atoms/icons/arrow/arrow.tsx");const ArrowButton=({cursorPointer=!1,clickEventHandler,keyUpEventHandler,arrowLabelledBy,classNames=""})=>{const pointer=cursorPointer&&{cursor:"pointer"}||{cursor:"inherit"};return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{"aria-labelledby":arrowLabelledBy,className:`${classNames} arrow-button`,style:pointer,type:"button",onClick:e=>{clickEventHandler&&(e.stopPropagation(),clickEventHandler())},onKeyUp:e=>{keyUpEventHandler&&(e.stopPropagation(),keyUpEventHandler(e))}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms_icons_arrow_arrow__WEBPACK_IMPORTED_MODULE_1__.A,null))},__WEBPACK_DEFAULT_EXPORT__=ArrowButton;try{ArrowButton.displayName="ArrowButton",ArrowButton.__docgenInfo={description:"",displayName:"ArrowButton",props:{cursorPointer:{defaultValue:{value:"false"},description:"",name:"cursorPointer",required:!1,type:{name:"boolean"}},clickEventHandler:{defaultValue:null,description:"",name:"clickEventHandler",required:!1,type:{name:"(() => void) | undefined"}},keyUpEventHandler:{defaultValue:null,description:"",name:"keyUpEventHandler",required:!1,type:{name:"((e: KeyboardEvent<HTMLButtonElement>) => void) | undefined"}},arrowLabelledBy:{defaultValue:null,description:"",name:"arrowLabelledBy",required:!0,type:{name:"string"}},classNames:{defaultValue:{value:""},description:"",name:"classNames",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Buttons/ArrowButton.tsx#ArrowButton"]={docgenInfo:ArrowButton.__docgenInfo,name:"ArrowButton",path:"src/components/Buttons/ArrowButton.tsx#ArrowButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Buttons/LinkButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_atoms_links_Link__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/atoms/links/Link.tsx"),_ButtonIcon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Buttons/ButtonIcon.tsx");const LinkButton=({buttonType,children,classNames,dataCy="link-button",iconClassNames,isNewTab=!1,size="medium",trackClick,url,variant="filled",ariaLabelledBy,id})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms_links_Link__WEBPACK_IMPORTED_MODULE_1__.A,{href:url,isNewTab,className:(0,clsx__WEBPACK_IMPORTED_MODULE_3__.A)("btn-primary",`btn-${variant}`,`btn-${size}`,"arrow__hover--right-small","hide-linkstyle",classNames),trackClick,dataCy,ariaLabelledBy,id},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ButtonIcon__WEBPACK_IMPORTED_MODULE_2__.a,{buttonType,iconClassNames})),__WEBPACK_DEFAULT_EXPORT__=LinkButton;try{LinkButton.displayName="LinkButton",LinkButton.__docgenInfo={description:"",displayName:"LinkButton",props:{buttonType:{defaultValue:null,description:"",name:"buttonType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"search"'},{value:'"none"'},{value:'"default"'},{value:'"external-link"'}]}},classNames:{defaultValue:null,description:"",name:"classNames",required:!1,type:{name:"string | undefined"}},dataCy:{defaultValue:{value:"link-button"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}},iconClassNames:{defaultValue:null,description:"",name:"iconClassNames",required:!1,type:{name:"string | undefined"}},isNewTab:{defaultValue:{value:"false"},description:"",name:"isNewTab",required:!1,type:{name:"boolean | undefined"}},size:{defaultValue:{value:"medium"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"xsmall"'},{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}},trackClick:{defaultValue:null,description:"",name:"trackClick",required:!1,type:{name:"(() => Promise<unknown>) | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"URL"}},variant:{defaultValue:{value:"filled"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"outline"'},{value:'"filled"'}]}},ariaLabelledBy:{defaultValue:null,description:"",name:"ariaLabelledBy",required:!1,type:{name:"string | undefined"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Buttons/LinkButton.tsx#LinkButton"]={docgenInfo:LinkButton.__docgenInfo,name:"LinkButton",path:"src/components/Buttons/LinkButton.tsx#LinkButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/atoms/icons/arrow/arrow.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"61",height:"9",viewBox:"0 0 61 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"arrow__body",d:"M60 4.5H0",stroke:"black"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"arrow__head",d:"M60.3537 4.85355C60.5489 4.65829 60.5489 4.34171 60.3537 4.14645L57.1717 0.96447C56.9764 0.769208 56.6598 0.769208 56.4646 0.96447C56.2693 1.15973 56.2693 1.47631 56.4646 1.67157L59.293 4.5L56.4646 7.32843C56.2693 7.52369 56.2693 7.84027 56.4646 8.03553C56.6598 8.2308 56.9764 8.2308 57.1717 8.03553L60.3537 4.85355ZM60.0001 4H57.0001V5H60.0001V4Z",fill:"black"}))},"./src/components/author-year/authorYear.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=({author,year})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,author&&author,year&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null," (",year,")"));try{authorYear.displayName="authorYear",authorYear.__docgenInfo={description:"",displayName:"authorYear",props:{author:{defaultValue:null,description:"",name:"author",required:!0,type:{name:"string | null"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/author-year/authorYear.tsx#authorYear"]={docgenInfo:authorYear.__docgenInfo,name:"authorYear",path:"src/components/author-year/authorYear.tsx#authorYear"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/cover/cover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>Cover});var react=__webpack_require__("./node_modules/react/index.js"),clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),es=__webpack_require__("./node_modules/react-query/es/index.js"),FetchFailedError=__webpack_require__("./src/core/fetchers/FetchFailedError.ts"),token=__webpack_require__("./src/core/token.js"),extractServiceBaseUrls=__webpack_require__("./src/core/utils/reduxMiddleware/extractServiceBaseUrls.ts"),FetcherHttpError=__webpack_require__("./src/core/fetchers/FetcherHttpError.ts");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class CoverServiceHttpError extends FetcherHttpError.A{constructor(...args){super(...args),_defineProperty(this,"name","CoverServiceHttpError")}}const fetcher=async({url,method,params,data})=>{const additionalHeaders="object"===(null==data?void 0:data.headers)?null==data?void 0:data.headers:{},libraryToken=(0,token.gf)(token._L),headers={...libraryToken?{Authorization:`Bearer ${libraryToken}`}:{},...additionalHeaders},body=data?JSON.stringify(data):null,serviceUrl=(({baseUrl,url,params})=>`${baseUrl}${url}?${new URLSearchParams(params)}`)({baseUrl:(0,extractServiceBaseUrls.aW)(extractServiceBaseUrls.TJ.cover),url,params});try{const response=await fetch(serviceUrl,{method,headers,body});if(!response.ok)throw new CoverServiceHttpError(response.status,response.statusText,serviceUrl);try{return await response.json()}catch(e){if(!(e instanceof SyntaxError))throw e}}catch(error){if(error instanceof CoverServiceHttpError)throw error;const message=error instanceof Error?error.message:"Unknown error";throw new FetchFailedError.A(message,serviceUrl)}return null},getGetCoverCollectionQueryOptions=(params,options)=>{const{query:queryOptions}=options??{},queryKey=(null==queryOptions?void 0:queryOptions.queryKey)??(params=>["/api/v2/covers",...params?[params]:[]])(params);return{queryKey,queryFn:({signal})=>((params,signal)=>fetcher({url:"/api/v2/covers",method:"GET",params,signal}))(params,signal),...queryOptions}};var LinkNoStyle=__webpack_require__("./src/components/atoms/links/LinkNoStyle.tsx");const cover_image=({src,altText,animate,setImageLoaded,shadow})=>react.createElement("img",{onLoad:setImageLoaded,className:(0,clsx.A)("cover__img",{"cover__img--animate":animate},{"cover__img--shadow-small":"small"===shadow,"cover__img--shadow-medium":"medium"===shadow}),src,alt:altText||""});try{coverimage.displayName="coverimage",coverimage.__docgenInfo={description:"",displayName:"coverimage",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string | undefined"}},animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"boolean"}},setImageLoaded:{defaultValue:null,description:"",name:"setImageLoaded",required:!0,type:{name:"() => void"}},shadow:{defaultValue:null,description:"",name:"shadow",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"small"'},{value:'"medium"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/cover/cover-image.tsx#coverimage"]={docgenInfo:coverimage.__docgenInfo,name:"coverimage",path:"src/components/cover/cover-image.tsx#coverimage"})}catch(__react_docgen_typescript_loader_error){}var first=__webpack_require__("./node_modules/lodash/first.js"),first_default=__webpack_require__.n(first);const getUrl=(cover,size)=>{var _cover$imageUrls,_cover$imageUrls$size;return null===(_cover$imageUrls=cover.imageUrls)||void 0===_cover$imageUrls||null===(_cover$imageUrls$size=_cover$imageUrls[size])||void 0===_cover$imageUrls$size?void 0:_cover$imageUrls$size.url},getCoverUrl=({coverData,bestRepresentation,size})=>{if(!coverData)return null;const covers=(({coverData,size})=>coverData?coverData.filter((cover=>getUrl(cover,size))):[])({coverData,size}),firstCover=first_default()(covers);if(!bestRepresentation&&firstCover&&getUrl(firstCover,size))return getUrl(firstCover,size);const bestRepresentationCover=first_default()(covers.filter((cover=>bestRepresentation&&cover.id===bestRepresentation.pid)));return bestRepresentationCover&&getUrl(bestRepresentationCover,size)?getUrl(bestRepresentationCover,size):firstCover&&getUrl(firstCover,size)?getUrl(firstCover,size):null};const Cover=({url,alt,size,displaySize,animate,tint,ids,bestRepresentation,idType="pid",shadow,linkAriaLabelledBy})=>{const[imageLoaded,setImageLoaded]=(0,react.useState)(null),handleSetImageLoaded=(0,react.useCallback)((()=>{setImageLoaded(!0)}),[]);let dataSize=size;"xsmall"===dataSize?dataSize="small":"xlarge"===dataSize&&(dataSize="large");const{data}=((params,options)=>{const queryOptions=getGetCoverCollectionQueryOptions(params,options),query=(0,es.useQuery)(queryOptions);return query.queryKey=queryOptions.queryKey,query})({type:idType,identifiers:ids,sizes:[dataSize]}),coverSrc=getCoverUrl({coverData:data,bestRepresentation,size:dataSize}),coverDisplaySize=displaySize||size,classes={wrapper:(0,clsx.A)("cover",`cover--size-${coverDisplaySize}`,`cover--aspect-${coverDisplaySize}`,imageLoaded||{default:"bg-identity-tint-120",120:"bg-identity-tint-120",100:"bg-identity-tint-100",80:"bg-identity-tint-80",40:"bg-identity-tint-40",20:"bg-identity-tint-20"}[tint||"default"])};return url?react.createElement(LinkNoStyle.A,{className:classes.wrapper,url,ariaLabelledBy:linkAriaLabelledBy,isHiddenFromScreenReaders:!alt},coverSrc&&react.createElement(cover_image,{setImageLoaded:handleSetImageLoaded,src:coverSrc,altText:alt,animate,shadow})):react.createElement("div",{className:classes.wrapper},coverSrc&&react.createElement(cover_image,{setImageLoaded:handleSetImageLoaded,src:coverSrc,altText:alt,animate,shadow}))};try{Cover.displayName="Cover",Cover.__docgenInfo={description:"",displayName:"Cover",props:{animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"xsmall"'},{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'},{value:'"original"'}]}},displaySize:{defaultValue:null,description:"",name:"displaySize",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"xsmall"'},{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'},{value:'"original"'},{value:'"2xsmall"'}]}},tint:{defaultValue:null,description:"",name:"tint",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"20"'},{value:'"40"'},{value:'"80"'},{value:'"100"'},{value:'"120"'}]}},ids:{defaultValue:null,description:"",name:"ids",required:!0,type:{name:"string[]"}},bestRepresentation:{defaultValue:null,description:"",name:"bestRepresentation",required:!1,type:{name:"Manifestation | undefined"}},alt:{defaultValue:null,description:"",name:"alt",required:!1,type:{name:"string | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"URL | undefined"}},idType:{defaultValue:{value:"pid"},description:"",name:"idType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"pid"'},{value:'"faust"'},{value:'"isbn"'},{value:'"issn"'}]}},shadow:{defaultValue:null,description:"",name:"shadow",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"small"'},{value:'"medium"'}]}},linkAriaLabelledBy:{defaultValue:null,description:"",name:"linkAriaLabelledBy",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/cover/cover.tsx#Cover"]={docgenInfo:Cover.__docgenInfo,name:"Cover",path:"src/components/cover/cover.tsx#Cover"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/empty-list/empty-list.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=({emptyListText,dataCy="empty-list",classNames=""})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{"data-cy":dataCy,className:`dpl-list-empty ${classNames}`},emptyListText);try{emptylist.displayName="emptylist",emptylist.__docgenInfo={description:"",displayName:"emptylist",props:{emptyListText:{defaultValue:null,description:"",name:"emptyListText",required:!0,type:{name:"string"}},dataCy:{defaultValue:{value:"empty-list"},description:"",name:"dataCy",required:!1,type:{name:"string | undefined"}},classNames:{defaultValue:{value:""},description:"",name:"classNames",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/empty-list/empty-list.tsx#emptylist"]={docgenInfo:emptylist.__docgenInfo,name:"emptylist",path:"src/components/empty-list/empty-list.tsx#emptylist"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/list-details/list-details.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_utils_text__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/utils/text.tsx");const __WEBPACK_DEFAULT_EXPORT__=({icon,title,labels,showSelect,setShowSelect,idForLabelledBy,children})=>{const t=(0,_core_utils_text__WEBPACK_IMPORTED_MODULE_1__.F)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"list-details","data-cy":"reservation-form-list-item"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"list-details__icon"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{src:icon,alt:""})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"list-details__container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("h3",{className:"text-header-h5",id:idForLabelledBy},title),"string"==typeof labels&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"text-small-caption"},labels),"string"!=typeof labels&&labels.map((label=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{key:label,className:"text-small-caption"},label)))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"list-details__dropdown"},children)),null!==showSelect&&!showSelect&&setShowSelect&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link-tag",onClick:()=>setShowSelect(!0)},t("reservationDetailsChangeText")))};try{listdetails.displayName="listdetails",listdetails.__docgenInfo={description:"",displayName:"listdetails",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"string | string[]"}},showSelect:{defaultValue:null,description:"",name:"showSelect",required:!1,type:{name:"boolean | undefined"}},setShowSelect:{defaultValue:null,description:"",name:"setShowSelect",required:!1,type:{name:"((show: boolean) => void) | undefined"}},idForLabelledBy:{defaultValue:null,description:"",name:"idForLabelledBy",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/list-details/list-details.tsx#listdetails"]={docgenInfo:listdetails.__docgenInfo,name:"listdetails",path:"src/components/list-details/list-details.tsx#listdetails"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/message/modal-message/ModalMessage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>modal_message_ModalMessage});var react=__webpack_require__("./node_modules/react/index.js"),focus_trap_react=__webpack_require__("./node_modules/focus-trap-react/dist/focus-trap-react.js"),focus_trap_react_default=__webpack_require__.n(focus_trap_react);try{withFocusTrap.displayName="withFocusTrap",withFocusTrap.__docgenInfo={description:"",displayName:"withFocusTrap",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/utils/withFocusTrap.tsx#withFocusTrap"]={docgenInfo:withFocusTrap.__docgenInfo,name:"withFocusTrap",path:"src/core/utils/withFocusTrap.tsx#withFocusTrap"})}catch(__react_docgen_typescript_loader_error){}const Message=({children,title,subTitle})=>react.createElement(react.Fragment,null,react.createElement("h2",{"data-cy":"message-title",className:"text-header-h2"},title),react.createElement("div",{className:"color-secondary-gray text-body-medium-regular mt-48"},react.createElement("p",{"data-cy":"message-subtitle"},subTitle)),children&&react.createElement("div",null,children)),modal_message_Message=Message;try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/modal-message/Message.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/message/modal-message/Message.tsx#Message"})}catch(__react_docgen_typescript_loader_error){}var Button=__webpack_require__("./src/components/Buttons/Button.tsx"),modal=__webpack_require__("./src/core/utils/modal.tsx");const ModalMessage=react.forwardRef((props=>{const{close,closeAll}=(0,modal.X)(),{ctaButton,...messageProps}=props;return react.createElement("div",{className:"modal-cta__container"},react.createElement(modal_message_Message,messageProps),react.createElement("div",{className:"modal-cta__buttons mt-48"},ctaButton&&react.createElement(Button.$,{dataCy:ctaButton.dataCy??"modal-cta-button",classNames:"modal-message__confirm-button",label:ctaButton.text,buttonType:"none",disabled:!1,collapsible:!1,size:"small",variant:"filled",onClick:()=>{ctaButton.callback&&ctaButton.callback(),ctaButton.modalId&&close(ctaButton.modalId),ctaButton.closeAllModals&&closeAll()}})))})),modal_message_ModalMessage=(Component=ModalMessage,({withFocusTrap,...props})=>react.createElement(focus_trap_react_default(),{focusTrapOptions:{allowOutsideClick:!0}},react.createElement(Component,props)));var Component;try{ModalMessage.displayName="ModalMessage",ModalMessage.__docgenInfo={description:"",displayName:"ModalMessage",props:{ctaButton:{defaultValue:null,description:"",name:"ctaButton",required:!1,type:{name:"({ text: string; callback?: (() => void) | undefined; dataCy?: string | undefined; } & (RequiredModalId | RequireCloseAllModals)) | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!0,type:{name:"string"}},withFocusTrap:{defaultValue:null,description:"",name:"withFocusTrap",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/modal-message/ModalMessage.tsx#ModalMessage"]={docgenInfo:ModalMessage.__docgenInfo,name:"ModalMessage",path:"src/components/message/modal-message/ModalMessage.tsx#ModalMessage"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/modal-details-header/modal-details-header.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_cover_cover__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/cover/cover.tsx");const __WEBPACK_DEFAULT_EXPORT__=({authors,year,title,pid,description,materialType,isbnForCover,periodical,series,children})=>{const coverIds=[pid||isbnForCover];return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"modal-details__header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"modal-details__cover"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"material-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"material material--large bg-identity-tint-120 material__animate"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_cover_cover__WEBPACK_IMPORTED_MODULE_1__.Y,{ids:coverIds,idType:pid?"pid":"isbn",size:"large",animate:!1,alt:description||""})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"modal-details__material"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"modal-details__tags"},materialType&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"status-label status-label--outline"},materialType),children),react__WEBPACK_IMPORTED_MODULE_0__.createElement("h2",{className:"modal-details__title text-header-h2"},title),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"text-body-medium-regular","data-cy":"modal-authors"},authors,year&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null," (",year,")")),periodical&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"text-body-medium-regular"},periodical),series&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-cy":"modal-series",className:"text-body-medium-regular"},series)))};try{modaldetailsheader.displayName="modaldetailsheader",modaldetailsheader.__docgenInfo={description:"",displayName:"modaldetailsheader",props:{authors:{defaultValue:null,description:"",name:"authors",required:!0,type:{name:"string | null | undefined"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"string | null | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string | null | undefined"}},pid:{defaultValue:null,description:"",name:"pid",required:!1,type:{name:"`${number}-${string}:${string}` | null | undefined"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string | null | undefined"}},materialType:{defaultValue:null,description:"",name:"materialType",required:!0,type:{name:"string | null | undefined"}},isbnForCover:{defaultValue:null,description:"",name:"isbnForCover",required:!0,type:{name:"string"}},periodical:{defaultValue:null,description:"",name:"periodical",required:!1,type:{name:"string | null | undefined"}},series:{defaultValue:null,description:"",name:"series",required:!1,type:{name:"string | null | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/modal-details-header/modal-details-header.tsx#modaldetailsheader"]={docgenInfo:modaldetailsheader.__docgenInfo,name:"modaldetailsheader",path:"src/components/modal-details-header/modal-details-header.tsx#modaldetailsheader"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/reservation/helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B6:()=>getInputType,C4:()=>getPreferredBranch,CF:()=>getAuthorLine,En:()=>getNoInterestAfter,He:()=>getReservationModalTypeTranslation,QW:()=>getInstantLoanBranchHoldings,Qr:()=>isConfigValueOne,ZI:()=>getFutureDateString,c8:()=>getFutureDateStringISO,hn:()=>getManifestationsToReserve,kd:()=>removePrefixFromBranchId,mR:()=>getInstantLoanBranchHoldingsAboveThreshold,pS:()=>translateOpenOrderStatus,wT:()=>constructReservationData});__webpack_require__("./node_modules/core-js/modules/esnext.map.delete-all.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.every.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.find-key.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.includes.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.key-of.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.map-keys.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.map-values.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.merge.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.reduce.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.some.js"),__webpack_require__("./node_modules/core-js/modules/esnext.map.update.js");var dayjs__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_13__),_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/core/utils/helpers/general.ts"),_core_utils_helpers_invalid_switch_case__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/core/utils/helpers/invalid-switch-case.ts"),_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/core/dbc-gateway/generated/graphql.tsx");const isConfigValueOne=configValue=>"1"===configValue,getPreferredBranch=(id,array)=>{const locationItem=array.find((item=>item.branchId===id));return locationItem?locationItem.title:id},getNoInterestAfter=(days,interestPeriod,t)=>{const interestPeriodFound=interestPeriod.interestPeriods.find((period=>period.value.toString()===days.toString()));return interestPeriodFound?interestPeriodFound.label:`${days} ${t("daysText")}`},getFutureDateString=num=>dayjs__WEBPACK_IMPORTED_MODULE_13___default()().add(num,"day").format("YYYY-MM-DD"),getFutureDateStringISO=num=>dayjs__WEBPACK_IMPORTED_MODULE_13___default()().add(num,"day").format("YYYY-MM-DDTHH:mm:ssZ"),constructReservations=({manifestations,pickupBranch,expiryDate,periodical})=>manifestations.map((manifestation=>(({manifestation:{pid},pickupBranch,expiryDate,periodical})=>({recordId:(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__.G_)(pid),...pickupBranch?{pickupBranch}:{},...expiryDate?{expiryDate}:{},...periodical?{periodical}:{}}))({manifestation,pickupBranch,expiryDate,periodical}))),constructReservationData=({manifestations,selectedBranch,expiryDate,periodical})=>({reservations:constructReservations({manifestations,...selectedBranch?{pickupBranch:selectedBranch}:{},...expiryDate?{expiryDate}:{},...periodical?{periodical:{volume:periodical.volume,volumeNumber:periodical.volumeNumber,volumeYear:periodical.volumeYear}}:{}}),...manifestations.length>1?{type:"parallel"}:{}}),getAuthorLine=(manifestation,t)=>{const{creators}=manifestation,publicationYear=(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__.Ey)(manifestation),author=(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__.sP)((0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__.UV)(creators),t)||null;let year="";return publicationYear&&(year=publicationYear),(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__.G)(manifestation)&&(year=`(${t("materialHeaderAllEditionsText")})`),author?[t("materialHeaderAuthorByText"),author,year].join(" "):null},getManifestationsToReserve=(reservableManifestations,isPeriodical)=>isPeriodical?reservableManifestations:!reservableManifestations||reservableManifestations.length<1?[]:(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__.G)(reservableManifestations[0])?reservableManifestations:[(0,_core_utils_helpers_general__WEBPACK_IMPORTED_MODULE_14__.yr)(reservableManifestations)],getReservationModalTypeTranslation=(name,type)=>{const isCloseModal="closeModalAriaLabelText"===type;switch(name){case"sms":return isCloseModal?"closeModalAriaLabelSmsText":"screenReaderModalDescriptionSmsText";case"email":return isCloseModal?"closeModalAriaLabelEmailText":"screenReaderModalDescriptionEmailText";case"interestPeriod":return isCloseModal?"closeModalAriaLabelInterestPeriodText":"screenReaderModalDescriptionInterestPeriodText";case"pickup":return isCloseModal?"closeModalAriaLabelPickupText":"screenReaderModalDescriptionPickupText";default:return(0,_core_utils_helpers_invalid_switch_case__WEBPACK_IMPORTED_MODULE_16__.A)(name)}},getInstantLoanBranchHoldings=(branchHoldings,whitelist,instantLoanStrings)=>{const whitelistBranchIds=whitelist.map((({branchId})=>branchId));return(branchHoldings=>{const processedBranches=new Map;return branchHoldings.forEach((({branch,materials})=>{const{branchId}=branch,storedBranch=processedBranches.get(branchId);storedBranch?processedBranches.set(branchId,{branch,materials:[...materials,...storedBranch.materials]}):processedBranches.set(branchId,{branch,materials})})),[...processedBranches.values()]})(branchHoldings.filter((({branch})=>whitelistBranchIds.includes(branch.branchId)))).map((({branch,materials})=>({branch,materials:materials.filter((({materialGroup,available})=>instantLoanStrings.some((instantLoanString=>instantLoanString===materialGroup.name))&&available))}))).filter((({materials})=>materials.length>0))},getInstantLoanBranchHoldingsAboveThreshold=(instantLoanBranchHoldings,instantLoanThresholdConfig)=>instantLoanBranchHoldings.filter((({materials})=>materials.length>=Number(instantLoanThresholdConfig??0))),removePrefixFromBranchId=branchId=>branchId.split("-")[1],translateOpenOrderStatus=(status,t)=>{const statusTextMap={[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.OwnedAccepted]:"openOrderStatusOwnedAcceptedText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.AuthenticationError]:"openOrderAuthenticationErrorText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.BorchkUserBlockedByAgency]:"openOrderUserBlockedByAgencyText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.BorchkUserNotVerified]:"openOrderUserNotVerifiedText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.BorchkUserNoLongerExistOnAgency]:"openOrderUserNoLongerExistOnAgencyText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.InvalidOrder]:"openOrderInvalidOrderText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.NotOwnedIllLoc]:"openOrderNotOwnedIllLocText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.NotOwnedNoIllLoc]:"openOrderNotOwnedNoIllLocText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.NotOwnedWrongIllMediumtype]:"openOrderNotOwnedWrongIllMediumtypeText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.NoServicerequester]:"openOrderNoServicerequesterText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.OrsError]:"openOrderOrsErrorText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.OwnedOwnCatalogue]:"openOrderOwnedOwnCatalogueText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.OwnedWrongMediumtype]:"openOrderOwnedWrongMediumtypeText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.ServiceUnavailable]:"openOrderServiceUnavailableText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.UnknownError]:"openOrderUnknownErrorText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.UnknownPickupagency]:"openOrderUnknownPickupagencyText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.UnknownUser]:"openOrderUnknownUserText",[_core_dbc_gateway_generated_graphql__WEBPACK_IMPORTED_MODULE_15__.jh.ErrorMissingPincode]:"openOrderErrorMissingPincodeText"};return statusTextMap[status]?t(statusTextMap[status]):""},getInputType=type=>{switch(type){case"email":return"email";case"sms":return"tel";default:return"text"}}},"./src/components/result-pager/use-pager.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>use_pager});var react=__webpack_require__("./node_modules/react/index.js"),utils_text=__webpack_require__("./src/core/utils/text.tsx");function ResultPager({setPageHandler,itemsShown,hitcount,isLoading,classNames}){const t=(0,utils_text.F)();return react.createElement("div",{className:`result-pager ${classNames}`},react.createElement("p",{className:"text-small-caption result-pager__title"},t("resultPagerStatusText",{placeholders:{"@itemsShown":itemsShown,"@hitcount":hitcount}})),itemsShown!==hitcount&&react.createElement("button",{disabled:isLoading,type:"button",className:"btn-primary btn-outline btn-medium arrow__hover--right-small uppercase",onClick:setPageHandler},t(isLoading?"loadingText":"showMoreText")))}const result_pager=ResultPager;try{ResultPager.displayName="ResultPager",ResultPager.__docgenInfo={description:"",displayName:"ResultPager",props:{setPageHandler:{defaultValue:null,description:"",name:"setPageHandler",required:!0,type:{name:"() => void"}},itemsShown:{defaultValue:null,description:"",name:"itemsShown",required:!0,type:{name:"number"}},hitcount:{defaultValue:null,description:"",name:"hitcount",required:!0,type:{name:"number"}},classNames:{defaultValue:null,description:"",name:"classNames",required:!0,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/result-pager/result-pager.tsx#ResultPager"]={docgenInfo:ResultPager.__docgenInfo,name:"ResultPager",path:"src/components/result-pager/result-pager.tsx#ResultPager"})}catch(__react_docgen_typescript_loader_error){}const use_pager=({hitcount,pageSize,overrideItemsShown})=>{const[itemsShown,setItemsShown]=(0,react.useState)(pageSize>=hitcount?hitcount:pageSize),[page,setPage]=(0,react.useState)(0),[firstInNewPage,setFirstInNewPage]=(0,react.useState)(null);(0,react.useEffect)((()=>{setItemsShown(pageSize>hitcount?hitcount:pageSize)}),[hitcount,pageSize]);const pagehandler=()=>{const currentPage=page+1,itemsOnPage=(currentPage+1)*pageSize,onLastPage=itemsOnPage>hitcount;setFirstInNewPage(itemsOnPage-pageSize),setItemsShown(onLastPage?hitcount:itemsOnPage),setPage(currentPage)};return{itemsShown,PagerComponent:({isLoading,classNames=""})=>hitcount?react.createElement(result_pager,{itemsShown:overrideItemsShown?overrideItemsShown():itemsShown,hitcount,classNames,setPageHandler:pagehandler,isLoading}):null,page,firstInNewPage}};try{usepager.displayName="usepager",usepager.__docgenInfo={description:"",displayName:"usepager",props:{hitcount:{defaultValue:null,description:"",name:"hitcount",required:!0,type:{name:"number"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},overrideItemsShown:{defaultValue:null,description:"",name:"overrideItemsShown",required:!1,type:{name:"(() => number) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/result-pager/use-pager.tsx#usepager"]={docgenInfo:usepager.__docgenInfo,name:"usepager",path:"src/components/result-pager/use-pager.tsx#usepager"})}catch(__react_docgen_typescript_loader_error){}},"./src/core/utils/helpers/list-mapper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$U:()=>mapFBSLoanToLoanType,Ml:()=>mapManifestationToBasicDetailsType,hg:()=>mapPublizonReservationToReservationType,ji:()=>mapPublizonLoanToLoanType,sl:()=>mapFBSReservationGroupToReservationType,z7:()=>mapProductToBasicDetailsType});var lodash_values__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/values.js"),lodash_values__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_values__WEBPACK_IMPORTED_MODULE_0__),lodash_keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/keys.js"),lodash_keys__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_keys__WEBPACK_IMPORTED_MODULE_1__),lodash_head__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/head.js"),lodash_head__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_head__WEBPACK_IMPORTED_MODULE_2__),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/store.ts"),_general__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/utils/helpers/general.ts");function getSeriesString(series){return series.map((({title,numberInSeries})=>{var _numberInSeries$numbe;return numberInSeries&&numberInSeries.number?`${title} ${null===(_numberInSeries$numbe=numberInSeries.number)||void 0===_numberInSeries$numbe?void 0:_numberInSeries$numbe[0]}`:title})).join(", ")}const mapPublizonLoanToLoanType=list=>list.map((({loanExpireDateUtc,orderDateUtc,libraryBook})=>({dueDate:loanExpireDateUtc,loanDate:orderDateUtc,isRenewable:!1,materialItemNumber:(null==libraryBook?void 0:libraryBook.identifier)||"",renewalStatusList:[],loanType:null,identifier:(null==libraryBook?void 0:libraryBook.identifier)||null,faust:null,loanId:null}))),mapFBSLoanToLoanType=list=>list.map((({loanDetails,isRenewable,renewalStatusList})=>{var _loanDetails$periodic;return{dueDate:loanDetails.dueDate,loanDate:loanDetails.loanDate,periodical:(null===(_loanDetails$periodic=loanDetails.periodical)||void 0===_loanDetails$periodic?void 0:_loanDetails$periodic.displayText)||"",renewalStatusList,isRenewable,materialItemNumber:loanDetails.materialItemNumber,loanType:loanDetails.loanType,identifier:null,faust:loanDetails.recordId||null,loanId:loanDetails.loanId,details:loanDetails.ilBibliographicRecord?{title:loanDetails.ilBibliographicRecord.title,authors:loanDetails.ilBibliographicRecord.author,authorsShort:loanDetails.ilBibliographicRecord.author,firstAuthor:loanDetails.ilBibliographicRecord.author,year:loanDetails.ilBibliographicRecord.publicationDate,lang:loanDetails.ilBibliographicRecord.language}:null}})),mapProductToBasicDetailsType=material=>{const{publicationDate,title,description,productType,contributors,externalProductId,languageCode}=material,{text:{data:texts}}=_store__WEBPACK_IMPORTED_MODULE_3__.M_.getState(),digitalProductType={1:texts.publizonEbookText,2:texts.publizonAudioBookText,4:texts.publizonPodcastText},authors=(null==contributors?void 0:contributors.map((({firstName,lastName})=>`${firstName} ${lastName}`)))||[];return{title,lang:languageCode,periodical:null,year:publicationDate?(date=publicationDate,new Date(date).getFullYear()):"",description,materialType:productType?digitalProductType[productType]:"",externalProductId:null==externalProductId?void 0:externalProductId.id,authors:contributors?(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!1,authors):"",authorsShort:contributors?(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!0,authors):""};var date},mapManifestationToBasicDetailsType=material=>{var _languages$main,_languages$main$;const{edition,abstract,titles,pid,materialTypes,creators,series,languages}=material,isoCode=(null==languages||null===(_languages$main=languages.main)||void 0===_languages$main||null===(_languages$main$=_languages$main[0])||void 0===_languages$main$?void 0:_languages$main$.isoCode)??"",description=abstract?abstract[0]:"",{full:[fullText]}=titles||{full:[]},{publicationYear}=edition||{},{display:year}=publicationYear||{},inputContributorsArray=(null==creators?void 0:creators.map((({display})=>display)))||[],firstAuthor=creators&&creators.length?creators[0].display:"";return{lang:isoCode,authors:(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!1,inputContributorsArray),authorsShort:(0,_general__WEBPACK_IMPORTED_MODULE_4__.Zc)(!0,inputContributorsArray),firstAuthor,pid,title:fullText,year,description,series:series&&series.length>0?getSeriesString(series):"",materialType:materialTypes?materialTypes[0].materialTypeSpecific.display:void 0}},mapPublizonReservationToReservationType=list=>list.map((({identifier,createdDateUtc,status,expectedRedeemDateUtc,productTitle,expireDateUtc})=>({identifier,faust:null,dateOfReservation:createdDateUtc,expiryDate:expireDateUtc,state:status?{1:"reserved",2:"readyForPickup",3:"redeemed",4:"cancelled",5:"expired"}[status]:null,title:productTitle,pickupDeadline:expectedRedeemDateUtc}))),mapFBSReservationGroupToReservationType=list=>list.map((({dateOfReservation,expiryDate,numberInQueue,state,pickupBranch,pickupDeadline,pickupNumber,periodical,records,ilBibliographicRecord})=>({periodical:(null==periodical?void 0:periodical.displayText)||"",faust:lodash_head__WEBPACK_IMPORTED_MODULE_2___default()(lodash_keys__WEBPACK_IMPORTED_MODULE_1___default()(records)),dateOfReservation,expiryDate,numberInQueue,state:"readyForPickup"===state?"readyForPickup":"reserved",pickupBranch,pickupDeadline,pickupNumber,reservationIds:lodash_values__WEBPACK_IMPORTED_MODULE_0___default()(records),details:ilBibliographicRecord?{title:ilBibliographicRecord.title,authors:ilBibliographicRecord.author,authorsShort:ilBibliographicRecord.author,firstAuthor:ilBibliographicRecord.author,year:ilBibliographicRecord.publicationDate,lang:ilBibliographicRecord.language}:null})))},"./src/core/utils/helpers/usePatronData.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ix:()=>usePatronData,lX:()=>getBlockedStatus});var _fbs_fbs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/fbs/fbs.ts"),_types_BlockedTypes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/utils/types/BlockedTypes.ts"),_user__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/helpers/user.ts");const usePatronData=()=>(0,_fbs_fbs__WEBPACK_IMPORTED_MODULE_0__.wq)({enabled:!(0,_user__WEBPACK_IMPORTED_MODULE_2__.ok)()}),getBlockedStatus=patron=>{var _patron$blockStatus;return null!=patron&&patron.blockStatus&&(null==patron||null===(_patron$blockStatus=patron.blockStatus)||void 0===_patron$blockStatus?void 0:_patron$blockStatus.length)>0?patron.blockStatus[0].blockedReason:_types_BlockedTypes__WEBPACK_IMPORTED_MODULE_1__.A.unknown}},"./src/core/utils/types/BlockedTypes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var BlockedTypes=function(BlockedTypes){return BlockedTypes.extendedSuspension="F",BlockedTypes.deceased="D",BlockedTypes.fee="E",BlockedTypes.missingPatronCategory="W",BlockedTypes.accountStolen="O",BlockedTypes.suspension="U",BlockedTypes.blockedFromSelfservice="S",BlockedTypes.unknown="unknown",BlockedTypes}(BlockedTypes||{});const __WEBPACK_DEFAULT_EXPORT__=BlockedTypes},"./src/core/utils/types/loan-type.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isLoanType(item){return!!item.loanId||!!item.identifier}function loanId(loan){return String(loan.loanId||loan.identifier)}__webpack_require__.d(__webpack_exports__,{G:()=>loanId,R:()=>isLoanType})},"./src/core/utils/useRequestsWithStatus.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$K:()=>useSingleRequestWithStatus,mi:()=>useMultipleRequestsWithStatus});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const useMultipleRequestsWithStatus=({requests,onError,onSuccess})=>{const[requestStatus,setRequestStatus]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("idle");return{handler:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{setRequestStatus("pending");const operations=[];requests.forEach((({params,operation})=>{if("function"!=typeof operation)throw new Error("Operation must be a function.");operations.push(new Promise(((resolve,reject)=>{operation(params,{onSuccess:result=>{resolve(result)},onError:error=>{reject(error)}})})))})),Promise.all(operations).then((allResults=>{setRequestStatus("success"),onSuccess&&onSuccess(allResults)})).catch((error=>{setRequestStatus("error"),onError&&onError(error)}))}),[requests,onSuccess,onError]),requestStatus,setRequestStatus}},useSingleRequestWithStatus=({request,onError,onSuccess})=>useMultipleRequestsWithStatus({requests:[request],onError:onError?errors=>onError(errors[0]):void 0,onSuccess:onSuccess?results=>{onSuccess(results[0])}:void 0});try{useMultipleRequestsWithStatus.displayName="useMultipleRequestsWithStatus",useMultipleRequestsWithStatus.__docgenInfo={description:"",displayName:"useMultipleRequestsWithStatus",props:{requests:{defaultValue:null,description:"",name:"requests",required:!0,type:{name:"{ params: TParams; operation: TRequest; }[]"}},onSuccess:{defaultValue:null,description:"",name:"onSuccess",required:!1,type:{name:"((results: TResponse[]) => void) | undefined"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((errors: unknown[]) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/utils/useRequestsWithStatus.tsx#useMultipleRequestsWithStatus"]={docgenInfo:useMultipleRequestsWithStatus.__docgenInfo,name:"useMultipleRequestsWithStatus",path:"src/core/utils/useRequestsWithStatus.tsx#useMultipleRequestsWithStatus"})}catch(__react_docgen_typescript_loader_error){}try{useSingleRequestWithStatus.displayName="useSingleRequestWithStatus",useSingleRequestWithStatus.__docgenInfo={description:"",displayName:"useSingleRequestWithStatus",props:{request:{defaultValue:null,description:"",name:"request",required:!0,type:{name:"{ params: TParams; operation: TRequest; }"}},onSuccess:{defaultValue:null,description:"",name:"onSuccess",required:!1,type:{name:"((results: TResponse) => void) | undefined"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((error: unknown) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/utils/useRequestsWithStatus.tsx#useSingleRequestWithStatus"]={docgenInfo:useSingleRequestWithStatus.__docgenInfo,name:"useSingleRequestWithStatus",path:"src/core/utils/useRequestsWithStatus.tsx#useSingleRequestWithStatus"})}catch(__react_docgen_typescript_loader_error){}}}]);