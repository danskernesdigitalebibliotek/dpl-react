(globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react=globalThis.webpackChunk_danskernesdigitalebibliotek_dpl_react||[]).push([[7035],{"./node_modules/clsx/dist/clsx.mjs":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function r(e){var t,f,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=" "),n+=f)}else for(f in e)e[f]&&(n&&(n+=" "),n+=f);return n}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function clsx(){for(var e,t,f=0,n="",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n}},"./node_modules/lodash/first.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/lodash/head.js")},"./node_modules/lodash/head.js":module=>{module.exports=function head(array){return array&&array.length?array[0]:void 0}},"./src/components/cover/cover.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MultiplePids:()=>MultiplePids,NoIds:()=>NoIds,WithIsbn:()=>WithIsbn,WithPid:()=>WithPid,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_cover__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/cover/cover.tsx"),_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/core/utils/helpers/url.ts"),_core_utils_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/utils/url.tsx"),_core_storybook_serviceUrlArgs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/storybook/serviceUrlArgs.ts"),_core_storybook_globalTextArgs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/storybook/globalTextArgs.ts"),_core_storybook_globalConfigArgs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/core/storybook/globalConfigArgs.ts");const __WEBPACK_DEFAULT_EXPORT__={title:"Components / Cover",component:_cover__WEBPACK_IMPORTED_MODULE_1__.Y,argTypes:{..._core_storybook_serviceUrlArgs__WEBPACK_IMPORTED_MODULE_3__.U,..._core_storybook_globalTextArgs__WEBPACK_IMPORTED_MODULE_4__.U,..._core_storybook_globalConfigArgs__WEBPACK_IMPORTED_MODULE_5__.U,size:{name:"Image size",control:{type:"radio"}},tint:{name:"Background color tint",control:{type:"radio"}},animate:{name:"Use animation",control:{type:"boolean"}},url:{name:"URL",control:{type:"text"}},alt:{name:"Alt text",control:{type:"text"}}},args:{..._core_storybook_serviceUrlArgs__WEBPACK_IMPORTED_MODULE_3__.A,..._core_storybook_globalTextArgs__WEBPACK_IMPORTED_MODULE_4__.A,..._core_storybook_globalConfigArgs__WEBPACK_IMPORTED_MODULE_5__.A,size:"small",animate:!0,tint:"120",url:new URL("/",(0,_core_utils_helpers_url__WEBPACK_IMPORTED_MODULE_6__.Lu)()),alt:"alt text for the image"}},NoIds={render:args=>{const WrappedCover=(0,_core_utils_url__WEBPACK_IMPORTED_MODULE_2__.nU)(_cover__WEBPACK_IMPORTED_MODULE_1__.Y);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedCover,args)}},WithPid={args:{ids:["870970-basis:53292968"]},render:args=>{const WrappedCover=(0,_core_utils_url__WEBPACK_IMPORTED_MODULE_2__.nU)(_cover__WEBPACK_IMPORTED_MODULE_1__.Y);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedCover,args)}},MultiplePids={args:{ids:["870970-basis:06373674","870970-basis:53292968"]},render:args=>{const WrappedCover=(0,_core_utils_url__WEBPACK_IMPORTED_MODULE_2__.nU)(_cover__WEBPACK_IMPORTED_MODULE_1__.Y);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedCover,args)}},WithIsbn={args:{ids:["9788763844123"],idType:"isbn"},render:args=>{const WrappedCover=(0,_core_utils_url__WEBPACK_IMPORTED_MODULE_2__.nU)(_cover__WEBPACK_IMPORTED_MODULE_1__.Y);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedCover,args)}};NoIds.parameters={...NoIds.parameters,docs:{...NoIds.parameters?.docs,source:{originalSource:"{\n  render: args => {\n    const WrappedCover = withUrls(Cover);\n    return <WrappedCover {...args} />;\n  }\n}",...NoIds.parameters?.docs?.source}}},WithPid.parameters={...WithPid.parameters,docs:{...WithPid.parameters?.docs,source:{originalSource:'{\n  args: {\n    ids: ["870970-basis:53292968"]\n  },\n  render: args => {\n    const WrappedCover = withUrls(Cover);\n    return <WrappedCover {...args} />;\n  }\n}',...WithPid.parameters?.docs?.source}}},MultiplePids.parameters={...MultiplePids.parameters,docs:{...MultiplePids.parameters?.docs,source:{originalSource:'{\n  args: {\n    ids: ["870970-basis:06373674", "870970-basis:53292968"]\n  },\n  render: args => {\n    const WrappedCover = withUrls(Cover);\n    return <WrappedCover {...args} />;\n  }\n}',...MultiplePids.parameters?.docs?.source}}},WithIsbn.parameters={...WithIsbn.parameters,docs:{...WithIsbn.parameters?.docs,source:{originalSource:'{\n  args: {\n    ids: ["9788763844123"],\n    idType: "isbn"\n  },\n  render: args => {\n    const WrappedCover = withUrls(Cover);\n    return <WrappedCover {...args} />;\n  }\n}',...WithIsbn.parameters?.docs?.source}}}},"./src/components/cover/cover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>Cover});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),graphql=__webpack_require__("./src/core/dbc-gateway/generated/graphql.ts"),LinkNoStyle=__webpack_require__("./src/components/atoms/links/LinkNoStyle.tsx");const cover_image=({src,altText,animate,setImageLoaded,shadow})=>react.createElement("img",{onLoad:setImageLoaded,className:(0,clsx.A)("cover__img",{"cover__img--animate":animate},{"cover__img--shadow-small":"small"===shadow,"cover__img--shadow-medium":"medium"===shadow}),src,alt:altText||""});try{coverimage.displayName="coverimage",coverimage.__docgenInfo={description:"",displayName:"coverimage",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string | undefined"}},animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"boolean"}},setImageLoaded:{defaultValue:null,description:"",name:"setImageLoaded",required:!0,type:{name:"() => void"}},shadow:{defaultValue:null,description:"",name:"shadow",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"medium"'},{value:'"small"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/cover/cover-image.tsx#coverimage"]={docgenInfo:coverimage.__docgenInfo,name:"coverimage",path:"src/components/cover/cover-image.tsx#coverimage"})}catch(__react_docgen_typescript_loader_error){}var first=__webpack_require__("./node_modules/lodash/first.js"),first_default=__webpack_require__.n(first);const graphQLKeyToCssSize={xSmall:"xsmall",small:"small",medium:"medium",large:"large"};const getUrl=(cover,size)=>{var _cover$size;return(null==cover||null===(_cover$size=cover[size])||void 0===_cover$size?void 0:_cover$size.url)??null},getCoverUrl=({coverData,bestRepresentation,size})=>{if(!coverData)return null;const covers=(({coverData,size})=>coverData?coverData.filter((item=>!!getUrl(item.cover,size))):[])({coverData,size}),firstCover=first_default()(covers);if(!bestRepresentation&&firstCover&&getUrl(firstCover.cover,size))return getUrl(firstCover.cover,size);const bestRepresentationCover=first_default()(covers.filter((item=>(null==bestRepresentation?void 0:bestRepresentation.pid)===item.pid)));return bestRepresentationCover&&getUrl(bestRepresentationCover.cover,size)?getUrl(bestRepresentationCover.cover,size):firstCover&&getUrl(firstCover.cover,size)?getUrl(firstCover.cover,size):null};const createIsbnCql=(ids=[])=>ids.length?ids.map((id=>`term.isbn=${id}`)).join(" OR "):"";const Cover=({url,alt,size,displaySize,animate,tint,ids,bestRepresentation,idType="pid",shadow,linkAriaLabelledBy,trackClick})=>{var _isbnData$complexSear,_isbnData$complexSear2,_isbnData$complexSear3,_isbnData$complexSear4,_isbnData$complexSear5;const[imageLoaded,setImageLoaded]=(0,react.useState)(!1),handleSetImageLoaded=(0,react.useCallback)((()=>{setImageLoaded(!0)}),[]),isIsbn="isbn"===idType,hasIds=ids&&ids.length>0,{data:isbnData}=(0,graphql.Vt)({cql:createIsbnCql(ids),offset:0,limit:1,filters:{}},{enabled:isIsbn&&hasIds}),pidsToQuery=function resolveCoverPidValues({idType,ids,resolvedIsbnPid}){return"isbn"===idType?resolvedIsbnPid?[resolvedIsbnPid]:[]:Array.isArray(ids)?ids:[]}({idType,ids,resolvedIsbnPid:null==isbnData||null===(_isbnData$complexSear=isbnData.complexSearch)||void 0===_isbnData$complexSear||null===(_isbnData$complexSear2=_isbnData$complexSear.works)||void 0===_isbnData$complexSear2||null===(_isbnData$complexSear3=_isbnData$complexSear2[0])||void 0===_isbnData$complexSear3||null===(_isbnData$complexSear4=_isbnData$complexSear3.manifestations)||void 0===_isbnData$complexSear4||null===(_isbnData$complexSear5=_isbnData$complexSear4.bestRepresentation)||void 0===_isbnData$complexSear5?void 0:_isbnData$complexSear5.pid}),{data:coverResult}=(0,graphql.TH)({pids:pidsToQuery},{enabled:pidsToQuery.length>0}),coverData=function filterNonNullManifestations(manifestations){return(null==manifestations?void 0:manifestations.filter((m=>null!=m)))??[]}(null==coverResult?void 0:coverResult.manifestations),coverDisplaySize=function getCoverDisplaySize({displaySize,size}){return displaySize??graphQLKeyToCssSize[size]}({displaySize,size}),coverSrc=getCoverUrl({coverData,bestRepresentation,size}),classes={wrapper:(0,clsx.A)("cover",`cover--size-${coverDisplaySize}`,`cover--aspect-${coverDisplaySize}`,imageLoaded||{default:"bg-identity-tint-120",120:"bg-identity-tint-120",100:"bg-identity-tint-100",80:"bg-identity-tint-80",40:"bg-identity-tint-40",20:"bg-identity-tint-20"}[tint||"default"])};return url?react.createElement(LinkNoStyle.A,{className:classes.wrapper,url,ariaLabelledBy:linkAriaLabelledBy,isHiddenFromScreenReaders:!alt,trackClick},coverSrc&&react.createElement(cover_image,{setImageLoaded:handleSetImageLoaded,src:coverSrc,altText:alt,animate,shadow})):react.createElement("div",{className:classes.wrapper},coverSrc&&react.createElement(cover_image,{setImageLoaded:handleSetImageLoaded,src:coverSrc,altText:alt,animate,shadow}))};try{Cover.displayName="Cover",Cover.__docgenInfo={description:"",displayName:"Cover",props:{animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"large"'},{value:'"medium"'},{value:'"small"'},{value:'"xSmall"'}]}},displaySize:{defaultValue:null,description:"",name:"displaySize",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"large"'},{value:'"medium"'},{value:'"small"'},{value:'"2xsmall"'},{value:'"xsmall"'},{value:'"xlarge"'}]}},tint:{defaultValue:null,description:"",name:"tint",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"20"'},{value:'"40"'},{value:'"80"'},{value:'"100"'},{value:'"120"'}]}},ids:{defaultValue:null,description:"",name:"ids",required:!0,type:{name:"string[]"}},bestRepresentation:{defaultValue:null,description:"",name:"bestRepresentation",required:!1,type:{name:"Manifestation | undefined"}},alt:{defaultValue:null,description:"",name:"alt",required:!1,type:{name:"string | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"URL | undefined"}},idType:{defaultValue:{value:"pid"},description:"",name:"idType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"pid"'},{value:'"isbn"'}]}},shadow:{defaultValue:null,description:"",name:"shadow",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"medium"'},{value:'"small"'}]}},linkAriaLabelledBy:{defaultValue:null,description:"",name:"linkAriaLabelledBy",required:!1,type:{name:"string | undefined"}},trackClick:{defaultValue:null,description:"",name:"trackClick",required:!1,type:{name:"(() => Promise<unknown>) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/cover/cover.tsx#Cover"]={docgenInfo:Cover.__docgenInfo,name:"Cover",path:"src/components/cover/cover.tsx#Cover"})}catch(__react_docgen_typescript_loader_error){}},"./src/core/storybook/globalConfigArgs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,U:()=>argTypes});const argTypes={errorMessagesConfig:{description:"Configuration for error messages behaviour",control:{type:"text"},table:{type:{summary:"text"},defaultValue:{summary:'{"containerId":"dpl-react-apps-error-messages","shouldOnlyShowOneError":true,"showCloseButton":true}'}}}},__WEBPACK_DEFAULT_EXPORT__={errorMessagesConfig:'{"containerId":"dpl-react-apps-error-messages","shouldOnlyShowOneError":true,"showCloseButton":true}'}}}]);